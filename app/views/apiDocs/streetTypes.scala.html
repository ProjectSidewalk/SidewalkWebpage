@(activePage: String = "street-types")(implicit request: RequestHeader, assets: AssetsFinder, cityName: String)

@content = {
<div class="api-section" id="street-types-intro-section">
  <h1 class="api-heading" id="street-types-api">Street Types API <a href="#street-types-api" class="permalink">#</a></h1> 
  <p>
    The Street Types API provides information about the different types of streets 
    (<a href="https://wiki.openstreetmap.org/wiki/Way">way types</a>) used by 
    Project Sidewalk in <strong>@cityName.</strong> Project Sidewalk pre-filters streets based on their 
    <a href="https://wiki.openstreetmap.org/wiki/Key:highway#Roads">OpenStreetMap 
    classification</a> (<i>e.g.,</i> residential, primary, secondary) to ensure that the data collected 
    is relevant and useful for sidewalks. Note: each Project Sidewalk city may have a different set of 
    street types.
  </p>
  <p>
    You can filter streets by type or analyze the correspondence between problem labels and street types
    using the <a href="@routes.ApiDocsController.streets()">Streets API</a>.
  </p>
</div>

<div class="api-section" id="visual-example-section">
  <h2 class="api-heading" id="visual-example">Street Types API Preview <a href="#visual-example" class="permalink">#</a></h2>
  <p>Below is a live preview of the street segments by street type in @cityName directly from the API, sorted by prevalence:</p>
  
  <div id="street-types-preview">Loading street types data...</div>
  
  <link rel="stylesheet" href="@assets.path("stylesheets/api-docs/street-types.css")">
  <script src="@routes.Assets.versioned("javascripts/api-docs/street-types-preview.js")"></script>
  <script>
    // Initialize the street types preview
    document.addEventListener('DOMContentLoaded', function() {
      StreetTypesPreview.setup({
        maxWidth: 1000
      }).init();
    });
  </script>
</div>

<div class="api-section" id="endpoint-section">
  <h2 class="api-heading" id="endpoint">Endpoint <a href="#endpoint" class="permalink">#</a></h2> 
  <p>Retrieve a list of all street types with their metadata and counts.</p>
  <p><code>GET /v3/api/streetTypes</code></p>
  <div class="api-subsection" id="endpoint-example-section">
    <h3 class="api-heading" id="endpoint-examples">Examples<a href="#endpoint-examples" class="permalink">#</a></h3>
    <p><code><a href="/v3/api/streetTypes">/v3/api/streetTypes</a></code> Get all street types in JSON</p>
  </div>
</div>

<div class="api-section" id="responses-section">
  <h2 class="api-heading" id="responses">Responses<a href="#responses" class="permalink">#</a></h2> 

  <h3 class="api-heading" id="success-response-200-ok">Success Response (200 OK)<a href="#success-response-200-ok" class="permalink">#</a></h3> 
  <p>
      On success, the API returns an HTTP <code>200 OK</code> status code and a JSON object containing an array of street types.
  </p>

  <pre><code class="language-json">
{
  "status": "OK",
  "streetTypes": [
    {
      "name": "residential",
      "description": "Roads that primarily provide access to residential properties and housing developments. These are generally low-speed with traffic calming measures, designed for local access rather than through traffic. In urban areas, they typically form the bulk of the street network within neighborhoods.",
      "count": 1243
    },
    {
      "name": "primary",
      "description": "Major highways forming a key part of a regional road network, connecting larger towns and cities. In urban areas, these often function as arterial roads with significant traffic volume. In less developed areas, road surface quality may vary considerably, as the classification is based on the road's importance in the network hierarchy rather than its physical characteristics.",
      "count": 87
    },
    // ... more street types
  ]
}
  </code></pre>

  <h4 id="response-fields">Response Fields <a href="#response-fields" class="permalink">#</a></h4>
  <div class="api-table-wrapper">
    <table class="api-table">
      <thead>
        <tr>
          <th>Field</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>status</code></td>
          <td><code>string</code></td>
          <td>Always "OK" for successful responses.</td>
        </tr>
        <tr>
          <td><code>streetTypes</code></td>
          <td><code>array</code></td>
          <td>Array of street type objects.</td>
        </tr>
        <tr>
          <td><code>streetTypes[].name</code></td>
          <td><code>string</code></td>
          <td>The OpenStreetMap highway tag value for this street type (e.g., "residential", "primary").</td>
        </tr>
        <tr>
          <td><code>streetTypes[].description</code></td>
          <td><code>string</code></td>
          <td>Human-readable description of the street type according to OpenStreetMap standards.</td>
        </tr>
        <tr>
          <td><code>streetTypes[].count</code></td>
          <td><code>integer</code></td>
          <td>Number of street segments with this type in the database.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="api-heading" id="error-responses">Error Responses<a href="#error-responses" class="permalink">#</a></h3> 
  <p>If an error occurs, the API will return an appropriate HTTP status code and a JSON response body containing details about the error.</p>
  <ul>
    <li><strong><code>500 Internal Server Error</code>:</strong> An unexpected error occurred on the server.</li>
    <li><strong><code>503 Service Unavailable</code>:</strong> The server is temporarily unable to handle the request (e.g., during maintenance).</li>
  </ul>

  <h4 id="error-body">Error Response Body <a href="#error-body" class="permalink">#</a></h4>
  <p>Error responses include a JSON body with the following structure:</p>
  <pre><code class="language-json">
{
  "status": 500, // HTTP Status Code
  "code": "INTERNAL_SERVER_ERROR", // Machine-readable error code
  "message": "Failed to retrieve street types: Database connection error" // Human-readable description
}
  </code></pre>
</div>

}

@apiDocs.layout(activePage)(content)