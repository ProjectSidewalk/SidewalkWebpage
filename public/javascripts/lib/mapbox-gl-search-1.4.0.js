var mapboxsearch=(()=>{var El=Object.create;var hr=Object.defineProperty,Sl=Object.defineProperties,Al=Object.getOwnPropertyDescriptor,Tl=Object.getOwnPropertyDescriptors,Ml=Object.getOwnPropertyNames,dn=Object.getOwnPropertySymbols,wl=Object.getPrototypeOf,ws=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable;var Ao=(t,e,r)=>e in t?hr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,f=(t,e)=>{for(var r in e||(e={}))ws.call(e,r)&&Ao(t,r,e[r]);if(dn)for(var r of dn(e))To.call(e,r)&&Ao(t,r,e[r]);return t},M=(t,e)=>Sl(t,Tl(e)),Mo=t=>hr(t,"__esModule",{value:!0});var wo=(t,e)=>{var r={};for(var n in t)ws.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&dn)for(var n of dn(t))e.indexOf(n)<0&&To.call(t,n)&&(r[n]=t[n]);return r};var Ls=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ll=(t,e)=>{for(var r in e)hr(t,r,{get:e[r],enumerable:!0})},Lo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ml(e))!ws.call(t,s)&&(r||s!=="default")&&hr(t,s,{get:()=>e[s],enumerable:!(n=Al(e,s))||n.enumerable});return t},un=(t,e)=>Lo(Mo(hr(t!=null?El(wl(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),kl=(t=>(e,r)=>t&&t.get(e)||(r=Lo(Mo({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var ks=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var i=(t,e,r)=>(ks(t,e,"read from private field"),r?r.call(t):e.get(t)),c=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},p=(t,e,r,n)=>(ks(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var ze=(t,e,r)=>(ks(t,e,"access private method"),r);var _=(t,e,r)=>new Promise((n,s)=>{var o=d=>{try{a(r.next(d))}catch(u){s(u)}},l=d=>{try{a(r.throw(d))}catch(u){s(u)}},a=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);a((r=r.apply(t,e)).next())});var Ua=Ls(($a,Nn)=>{(function(t){var e=!1,r,n;function s(){if(typeof r!="undefined")return r;var h=document.documentElement,m=document.createElement("div");return m.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),h.appendChild(m),r=m.offsetWidth-m.clientWidth,h.removeChild(m),r}function o(){return document.documentElement.scrollHeight>window.innerHeight}function l(h){if(!(typeof document=="undefined"||e)){var m=document.documentElement;n=window.pageYOffset,o()?m.style.width="calc(100% - "+s()+"px)":m.style.width="100%",m.style.position="fixed",m.style.top=-n+"px",m.style.overflow="hidden",e=!0}}function a(){if(!(typeof document=="undefined"||!e)){var h=document.documentElement;h.style.width="",h.style.position="",h.style.top="",h.style.overflow="",window.scroll(0,n),e=!1}}function d(){if(e){a();return}l()}var u={on:l,off:a,toggle:d};typeof Nn!="undefined"&&typeof Nn.exports!="undefined"?Nn.exports=u:t.noScroll=u})($a)});var go=Ls((ol,ls)=>{(function(t,e,r){typeof ls!="undefined"&&ls.exports?ls.exports=r():t[e]=r()})(ol,"subtag",function(){var t="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(a){return a.match(e)||[]}function n(a){return r(a).filter(function(d,u){return d&&u})}function s(a){return a=r(a),{language:a[1]||t,extlang:a[2]||t,script:a[3]||t,region:a[4]||t}}function o(a,d,u){Object.defineProperty(a,d,{value:u,enumerable:!0})}function l(a,d,u){function h(m){return r(m)[a]||t}o(h,"pattern",d),o(s,u,h)}return l(1,/^[a-zA-Z]{2,3}$/,"language"),l(2,/^[a-zA-Z]{3}$/,"extlang"),l(3,/^[a-zA-Z]{4}$/,"script"),l(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(s,"split",n),s})});var ul=Ls((vo,bo)=>{var bd=function(){var t={},e=1e-10,r=Math.PI/180,n=180/Math.PI,s=6378137,o=20037508342789244e-9;function l(d){return Number(d)===d&&d%1!==0}function a(d){if(d=d||{},this.size=d.size||256,this.expansion=d.antimeridian===!0?2:1,!t[this.size]){var u=this.size,h=t[this.size]={};h.Bc=[],h.Cc=[],h.zc=[],h.Ac=[];for(var m=0;m<30;m++)h.Bc.push(u/360),h.Cc.push(u/(2*Math.PI)),h.zc.push(u/2),h.Ac.push(u),u*=2}this.Bc=t[this.size].Bc,this.Cc=t[this.size].Cc,this.zc=t[this.size].zc,this.Ac=t[this.size].Ac}return a.prototype.px=function(d,u){if(l(u)){var h=this.size*Math.pow(2,u),m=h/2,v=h/360,S=h/(2*Math.PI),y=h,x=Math.min(Math.max(Math.sin(r*d[1]),-.9999),.9999),A=m+d[0]*v,C=m+.5*Math.log((1+x)/(1-x))*-S;return A>y*this.expansion&&(A=y*this.expansion),C>y&&(C=y),[A,C]}else{var m=this.zc[u],x=Math.min(Math.max(Math.sin(r*d[1]),-.9999),.9999),A=Math.round(m+d[0]*this.Bc[u]),C=Math.round(m+.5*Math.log((1+x)/(1-x))*-this.Cc[u]);return A>this.Ac[u]*this.expansion&&(A=this.Ac[u]*this.expansion),C>this.Ac[u]&&(C=this.Ac[u]),[A,C]}},a.prototype.ll=function(d,u){if(l(u)){var h=this.size*Math.pow(2,u),m=h/360,v=h/(2*Math.PI),S=h/2,y=(d[1]-S)/-v,x=(d[0]-S)/m,A=n*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[x,A]}else{var y=(d[1]-this.zc[u])/-this.Cc[u],x=(d[0]-this.zc[u])/this.Bc[u],A=n*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[x,A]}},a.prototype.bbox=function(d,u,h,m,v){m&&(u=Math.pow(2,h)-1-u);var S=[d*this.size,(+u+1)*this.size],y=[(+d+1)*this.size,u*this.size],x=this.ll(S,h).concat(this.ll(y,h));return v==="900913"?this.convert(x,"900913"):x},a.prototype.xyz=function(d,u,h,m){m==="900913"&&(d=this.convert(d,"WGS84"));var v=[d[0],d[1]],S=[d[2],d[3]],y=this.px(v,u),x=this.px(S,u),A=[Math.floor(y[0]/this.size),Math.floor((x[0]-1)/this.size)],C=[Math.floor(x[1]/this.size),Math.floor((y[1]-1)/this.size)],U={minX:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),minY:Math.min.apply(Math,C)<0?0:Math.min.apply(Math,C),maxX:Math.max.apply(Math,A),maxY:Math.max.apply(Math,C)};if(h){var F={minY:Math.pow(2,u)-1-U.maxY,maxY:Math.pow(2,u)-1-U.minY};U.minY=F.minY,U.maxY=F.maxY}return U},a.prototype.convert=function(d,u){return u==="900913"?this.forward(d.slice(0,2)).concat(this.forward(d.slice(2,4))):this.inverse(d.slice(0,2)).concat(this.inverse(d.slice(2,4)))},a.prototype.forward=function(d){var u=[s*d[0]*r,s*Math.log(Math.tan(Math.PI*.25+.5*d[1]*r))];return u[0]>o&&(u[0]=o),u[0]<-o&&(u[0]=-o),u[1]>o&&(u[1]=o),u[1]<-o&&(u[1]=-o),u},a.prototype.inverse=function(d){return[d[0]*n/s,(Math.PI*.5-2*Math.atan(Math.exp(-d[1]/s)))*n]},a}();typeof bo!="undefined"&&typeof vo!="undefined"&&(bo.exports=vo=bd)});var Td={};Ll(Td,{MapboxAddressAutofill:()=>Wt,MapboxAddressConfirmation:()=>ft,MapboxAddressMinimap:()=>ir,MapboxGeocoder:()=>Qt,MapboxHTMLEvent:()=>E,MapboxSearchBox:()=>Xt,autofill:()=>yl,config:()=>H,confirmAddress:()=>$n,getAutofillSearchText:()=>Bt,getFormAutofillValues:()=>Hn});var ko=document.implementation.createHTMLDocument();function te(t,e){let r={};for(let[n,s]of Object.entries(e))r[n]=t.querySelector(s);return r}function Co(t){return Array.from(t.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function G(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild}function Io(t){let e=ko.createElement("style");return e.textContent=t,ko.head.appendChild(e),e.sheet}function Oo(t){return window.getComputedStyle(t).display!=="none"}function fe(t,e){if(!t)return;Object.getOwnPropertyDescriptor(t.constructor.prototype,"value").set.call(t,e);let n=t;n._valueTracker&&n._valueTracker.setValue("");let s=new Event("input",{bubbles:!0});s.simulated=!0,t.dispatchEvent(s);let o=new Event("change",{bubbles:!0});o.simulated=!0,t.dispatchEvent(o)}function hn(t,e=!1){let r,n,s=t.getBoundingClientRect();if(t.style.display==="none"||s.height===0&&s.width===0){let o=t.cloneNode(e);t.parentElement.appendChild(o),o.style.setProperty("display","block","important");let l=o.getBoundingClientRect();r=l.width,n=l.height,o.style.setProperty("display","none"),o.remove()}else r=s.width,n=s.height;return{height:Math.floor(n),width:Math.floor(r)}}function Ro(t){let e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}var Cl=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),Il=new RegExp(`\\.${Cl.source}`,"g"),Ol=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function pr(t,e){return t.replace(Il,r=>"."+e(r.slice(1)))}function Cs(t,e){let n=Io(t).cssRules;function s(l){if(l instanceof CSSStyleRule)return`${pr(l.selectorText,e)} { ${l.style.cssText} }`;let a=Ol.exec(l.cssText.split(`
`).join(""));if(a&&a.length>2){let d=a[1],u=a[2];return`${d} { ${Cs(u,e)} }`}return l.cssText}let o="";for(let l of Array.from(n))o+=s(l)+`

`;return o.trim()}function Is(t,e){let r=Array.from(t.querySelectorAll("[class]"));r.push(t);for(let n of r){let{classList:s}=n;for(let o of Array.from(s))s.remove(o),s.add(e(o))}return t}var Rl=Object.defineProperty,Pl=Object.defineProperties,_l=Object.getOwnPropertyDescriptors,yn=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable,Po=(t,e,r)=>e in t?Rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I=(t,e)=>{for(var r in e||(e={}))Ho.call(e,r)&&Po(t,r,e[r]);if(yn)for(var r of yn(e))Fo.call(e,r)&&Po(t,r,e[r]);return t},Re=(t,e)=>Pl(t,_l(e)),xn=(t,e)=>{var r={};for(var n in t)Ho.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&yn)for(var n of yn(t))e.indexOf(n)<0&&Fo.call(t,n)&&(r[n]=t[n]);return r},Fs=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},W=(t,e,r)=>(Fs(t,e,"read from private field"),r?r.call(t):e.get(t)),Q=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ge=(t,e,r,n)=>(Fs(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Bl=(t,e,r,n)=>({set _(s){ge(t,e,s,r)},get _(){return W(t,e,n)}}),Ve=(t,e,r)=>(Fs(t,e,"access private method"),r),re=(t,e,r)=>new Promise((n,s)=>{var o=d=>{try{a(r.next(d))}catch(u){s(u)}},l=d=>{try{a(r.throw(d))}catch(u){s(u)}},a=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);a((r=r.apply(t,e)).next())}),Do="https://api.mapbox.com/autofill/v1",Hl="suggest",Fl="retrieve",Dl=`${Do}/${Hl}`,Nl=`${Do}/${Fl}`,B=class{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");if(this.lng>180||this.lng<-180)throw new Error("Invalid LngLat longitude value: must be between -180 and 180")}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}static convert(t){if(t instanceof B)return new B(t.lng,t.lat);if(Array.isArray(t)&&t.length===2)return new B(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null&&("lng"in t||"lon"in t)&&"lat"in t)return new B(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},X=class{constructor(t,e){this._sw=B.convert(t),this._ne=B.convert(e)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new B(this.getWest(),this.getNorth())}getSouthEast(){return new B(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toFlatArray(){return[this._sw.lng,this._sw.lat,this._ne.lng,this._ne.lat]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}static convert(t){if(!t)throw new Error("Invalid LngLatBounds convert value: falsy");if(t instanceof X)return new X(t.getSouthWest(),t.getNorthEast());if(Array.isArray(t)&&t.length===2)return new X(B.convert(t[0]),B.convert(t[1]));if(Array.isArray(t)&&t.length===4)return new X(B.convert([t[0],t[1]]),B.convert([t[2],t[3]]));throw new Error("`LngLatBoundsLike` argument must be specified as an array [<LngLatLike>, <LngLatLike>] or an array [<west>, <south>, <east>, <north>]")}};function jl(){let e=(Math.random().toString(16)+Date.now().toString(16)+Math.random().toString(16)).replace(/\./g,"");return[e.slice(0,8),e.slice(8,12),"4"+e.slice(12,15)+"-8"+e.slice(15,18),e.slice(18,30)].join("-")}var ie=class{constructor(t){this.id=t!=null?t:jl()}toString(){return this.id}static convert(t){return new ie(t instanceof ie?t.id:t.toString())}},Gl="Unknown error",$l=class extends Error{constructor(t,e){super(String(t.message||t.error||Gl));this.name="MapboxError",this.statusCode=e}toString(){return`${this.name} (${this.statusCode}): ${this.message}`}};function Oe(t){return re(this,null,function*(){if(!t.ok){let e=yield t.json();throw new $l(e,t.status)}})}var _o=globalThis.fetch,Ul=globalThis.AbortController;function Ae(){if(!_o)throw new Error("Fetch implementation not found. Please include a fetch polyfill in your application or use `polyfillFetch` from `@mapbox/search-js-core` to fix this issue.");return{fetch:_o,AbortController:Ul}}function ot(...t){let e=[];for(let r of t){if(!r)continue;let n=Object.entries(r);for(let[s,o]of n)o!=null&&e.push(`${s}=${encodeURIComponent(String(o))}`)}return e.join("&")}var pn,Rs,No,jo=class{constructor(t={}){Q(this,Rs),Q(this,pn,void 0);let e=t,{accessToken:r}=e,n=xn(e,["accessToken"]);this.accessToken=r,this.defaults=I(I({},jo.defaults),n)}get responseHeaders(){return W(this,pn)}suggest(t,e){return re(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:n}=e,s=Re(I(I({},this.defaults),e),{sessionToken:r}),o=new URL(`${Dl}/${encodeURIComponent(t)}`);o.search=Ve(this,Rs,No).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});ge(this,pn,a.headers),yield Oe(a);let d=yield a.json();return Re(I({},d),{suggestions:d.suggestions.map(u=>Re(I({},u),{original_search_text:t,_source:"mapbox"})),url:o.toString()})})}retrieve(t,e){return re(this,null,function*(){if(!t)throw new Error("suggestion is required");if(!this.canRetrieve(t))throw new Error("suggestion cannot be retrieved");let{sessionToken:r,signal:n}=e,s=ie.convert(r),o=new URL(`${Nl}/${t.action.id}`);o.search=ot({access_token:this.accessToken,session_token:s.id});let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Oe(a);let d=yield a.json();return d.url=o.toString(),d})}canRetrieve(t){let e=t.action;return typeof(e==null?void 0:e.id)=="string"}},vr=jo;pn=new WeakMap;Rs=new WeakSet;No=function(t){return ot({types:"address",access_token:this.accessToken,streets:t.streets,language:t.language,country:t.country,limit:t.limit},t.sessionToken&&{session_token:ie.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:X.convert(t.bbox).toFlatArray().join(",")})};vr.defaults={language:"en",proximity:"ip",streets:!0};var En="https://api.mapbox.com/search/searchbox/v1",ql="suggest",zl="retrieve",Wl="category",Vl="reverse",Yl=`${En}/${ql}`,Xl=`${En}/${zl}`,Kl=`${En}/${Wl}`,Zl=`${En}/${Vl}`,Go="\\.\\d{1,256}",Ql=`\\d{1,3}(${Go})?`,Bo=`(-?(${Ql}|${Go}))`,$o=new RegExp(`^[ ]*${Bo},\\s*${Bo}[ ]*$`),Uo=/[\s,]+/,mn,Ps,_s,qo,Ds,zo,Wo=class{constructor(t={}){Q(this,mn),Q(this,_s),Q(this,Ds);let e=t,{accessToken:r}=e,n=xn(e,["accessToken"]);this.accessToken=r,this.defaults=I(I({},Wo.defaults),n)}suggest(t,e){return re(this,null,function*(){var r;if(!t)throw new Error("searchText is required");if($o.test(t)&&e.allowReverse){let m=t.trim().split(Uo).map(y=>y.trim());e.flipCoordinates&&(m=m.reverse());let v=m.join(","),S=yield this.reverse(v,e);return Ve(this,_s,qo).call(this,S)}let{sessionToken:s,signal:o}=e,l=Re(I(I({},this.defaults),e),{q:t,sessionToken:s});if(l.eta_type&&(!l.origin||!l.navigation_profile))throw new Error("to provide eta estimate: eta, navigation_profile, and origin are required");if(l.origin&&!l.navigation_profile)throw new Error("to provide distance estimate: both navigation_profile and origin are required");let a=new URL(Yl);a.search=Ve(this,mn,Ps).call(this,l);let{fetch:d}=Ae(),u=yield d(a.toString(),{signal:o});yield Oe(u);let h=yield u.json();return h.url=a.toString(),(r=h.suggestions)==null||r.forEach(m=>{m._source="mapbox"}),h})}retrieve(t,e){return re(this,null,function*(){if(!t)throw new Error("suggestion is required");if(t._originalFeature)return{type:"FeatureCollection",features:[t._originalFeature],url:t._originalUrl||""};if(t._geometry)return{type:"FeatureCollection",features:[{type:"Feature",properties:t,geometry:t._geometry}]};let{sessionToken:r,signal:n,language:s}=e,o=ie.convert(r),l=I(I({},this.defaults),s&&{language:s}),a=new URL(`${Xl}/${encodeURIComponent(t.mapbox_id)}`);a.search=ot({access_token:this.accessToken,session_token:o.id},{language:l.language});let{fetch:d}=Ae(),u=yield d(a.toString(),{signal:n});yield Oe(u);let h=yield u.json();return h.url=a.toString(),h})}category(t){return re(this,arguments,function*(e,r={}){if(!e)throw new Error("category is required");let n=I(I({},this.defaults),r),s=new URL(`${Kl}/${encodeURIComponent(e)}`);s.search=Ve(this,mn,Ps).call(this,n);let{fetch:o}=Ae(),l=yield o(s.toString(),{signal:n.signal});yield Oe(l);let a=yield l.json();return a.url=s.toString(),a})}reverse(t){return re(this,arguments,function*(e,r={}){var n;if(!e)throw new Error("lngLat is required");let[s,o]=typeof e=="string"?e.split(",").map(m=>parseFloat(m)):B.convert(e).toArray();if(isNaN(s)||isNaN(o))throw new Error("lngLat is required");let l=I(I({},this.defaults),r),a=new URL(Zl);a.search=ot({access_token:this.accessToken,language:l.language,limit:l.limit,longitude:s,latitude:o},l.types&&{types:typeof l.types=="string"?l.types:[...l.types].join(",")});let{fetch:d}=Ae(),u=yield d(a.toString(),{signal:l.signal});yield Oe(u);let h=yield u.json();return h.url=a.toString(),(n=h.features)==null||n.forEach(m=>{m._source="mapbox"}),h})}},Ns=Wo;mn=new WeakSet;Ps=function(t){return ot({q:t.q,access_token:this.accessToken,language:t.language,limit:t.limit,navigation_profile:t.navigation_profile,route:t.route,route_geometry:t.route_geometry,sar_type:t.sar_type,time_deviation:t.time_deviation,eta_type:t.eta_type,country:t.country,poi_category:t.poi_category,rich_metadata_provider:t.rich_metadata_provider,poi_category_exclusions:t.poi_category_exclusions},t.sessionToken&&{session_token:ie.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.origin&&{origin:typeof t.origin=="string"?t.origin:B.convert(t.origin).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:X.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};_s=new WeakSet;qo=function(t){return{suggestions:t.features.map(e=>Ve(this,Ds,zo).call(this,e,t.url)),attribution:t.attribution,url:t.url}};Ds=new WeakSet;zo=function(t,e){return Re(I({},t.properties),{_originalFeature:t,_originalUrl:e,_source:t._source})};Ns.defaults={language:"en"};var Jl="https://api.mapbox.com/autofill/v1",ec="retrieve",tc=`${Jl}/${ec}`,Bs,Vo,Yo=class{constructor(t={}){Q(this,Bs);let e=t,{accessToken:r}=e,n=xn(e,["accessToken"]);this.accessToken=r,this.defaults=I(I({},Yo.defaults),n)}validate(t,e){return re(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:n}=e,s=Re(I(I({},this.defaults),e),{sessionToken:r}),o=new URL(`${tc}/${encodeURIComponent(t)}`);o.search=Ve(this,Bs,Vo).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Oe(a);let d=yield a.json();return d.url=o.toString(),d.features.length>0&&(d.features=[d.features[0]]),d})}},js=Yo;Bs=new WeakSet;Vo=function(t){return ot({access_token:this.accessToken,language:t.language,country:t.country},t.sessionToken&&{session_token:ie.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:X.convert(t.bbox).toFlatArray().join(",")})};js.defaults={language:"en",proximity:"ip"};var Gs="https://api.mapbox.com/search/geocode/v6",rc=`${Gs}/forward`,ic=`${Gs}/reverse`,Cd=`${Gs}/batch`,mr,fn,Hs,Xo=class{constructor(t={}){Q(this,fn),Q(this,mr,void 0);let e=t,{accessToken:r}=e,n=xn(e,["accessToken"]);this.accessToken=r,this.defaults=I({},n)}get responseHeaders(){return W(this,mr)}forward(t,e){return re(this,null,function*(){var r;if(!t)throw new Error("searchText is required");let n;e&&({signal:n}=e);let s=Re(I(I({},this.defaults),e),{q:t}),o=new URL(`${rc}`);o.search=Ve(this,fn,Hs).call(this,s);let{fetch:l}=Ae(),a=n?{signal:n}:{},d=yield l(o.toString(),a);ge(this,mr,d.headers),yield Oe(d);let u=yield d.json();return u.url=o.toString(),(r=u.features)==null||r.forEach(h=>{h._source="mapbox"}),u})}reverse(t,e){return re(this,null,function*(){var r;if(!t)throw new Error("lngLat is required");let n;e&&({signal:n}=e);let s;if(typeof t=="string"){let[m,v]=t.split(",");s=new B(Number(m),Number(v))}else s=B.convert(t);let o=Re(I(I({},this.defaults),e),{longitude:s.lng,latitude:s.lat}),l=new URL(`${ic}`);l.search=Ve(this,fn,Hs).call(this,o,!0);let{fetch:a}=Ae(),d=n?{signal:n}:{},u=yield a(l.toString(),d);ge(this,mr,u.headers),yield Oe(u);let h=yield u.json();return h.url=l.toString(),(r=h.features)==null||r.forEach(m=>{m._source="mapbox"}),h})}suggest(t,e){return re(this,null,function*(){if($o.test(t)){let n=t.trim().split(Uo).map(o=>o.trim());e.flipCoordinates&&(n=n.reverse());let s=n.join(",");return this.reverse(s,e)}else return this.forward(t,e)})}retrieve(t){return re(this,null,function*(){return t})}};mr=new WeakMap;fn=new WeakSet;Hs=function(t,e=!1){return e&&["proximity","autocomplete","bbox"].forEach(r=>{r in t&&delete t[r]}),ot({q:t.q,longitude:t.longitude,latitude:t.latitude,access_token:this.accessToken,permanent:t.permanent,language:t.language,country:t.country,limit:t.limit,autocomplete:t.autocomplete,worldview:t.worldview},t.sessionToken&&{session_token:ie.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:X.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};var $s=(t=>(t.exact="exact",t.high="high",t.medium="medium",t.low="low",t))($s||{}),fr,Us=class{constructor(){Q(this,fr,{})}addEventListener(t,e){let r=W(this,fr);r[t]||(r[t]=[]),r[t].push(e)}removeEventListener(t,e){let r=W(this,fr);if(!r[t])return;let n=r[t],s=n.indexOf(e);s!==-1&&n.splice(s,1)}fire(t,e){let r=W(this,fr);if(!r[t])return;let n=r[t];for(let s of n)s(e)}};fr=new WeakMap;function qs(t,e,r){let n=null;return(...s)=>{n!==null&&clearTimeout(n);let o=r&&r();n=setTimeout(()=>{n=null,!(o==null?void 0:o.aborted)&&t(...s)},e)}}function Os(){let{AbortController:t}=Ae();return new t}var gr,gn,vn,kt,We,bn,Ye=class extends Us{constructor(t,e=0){super();Q(this,gr,new ie),Q(this,gn,0),Q(this,vn,!1),Q(this,kt,void 0),Q(this,We,Os()),Q(this,bn,void 0),ge(this,bn,qs((r,...n)=>re(this,[r,...n],function*(s,o={}){if(W(this,We).abort(),ge(this,We,Os()),!s){ge(this,kt,null),this.fire("suggest",W(this,kt));return}try{let l=yield this.search.suggest(s,Re(I({sessionToken:this.sessionToken},o),{signal:W(this,We).signal}));ge(this,kt,l),this.fire("suggest",l)}catch(l){if(l.name==="AbortError")return;this.fire("suggesterror",l)}}),e,()=>W(this,We).signal)),Object.defineProperties(this,{search:{value:t,writable:!1},debounce:{value:e,writable:!1}})}get sessionToken(){return W(this,vn)?W(this,gr).id:`${W(this,gr).id}.${W(this,gn)}`}set sessionToken(t){ge(this,vn,!0),ge(this,gr,new ie(t))}get suggestions(){return W(this,kt)}suggest(t,e){return W(this,bn).call(this,t,e),new Promise((r,n)=>{let s,o;s=l=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),r(l)},o=l=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),n(l)},this.addEventListener("suggest",s),this.addEventListener("suggesterror",o)})}clear(){this.suggest("")}retrieve(t,e){return re(this,null,function*(){let r=yield this.search.retrieve(t,I({sessionToken:this.sessionToken},e));return this.fire("retrieve",r),r})}canRetrieve(t){return this.search.canRetrieve?this.search.canRetrieve(t):!0}canSuggest(t){return this.search.canSuggest?this.search.canSuggest(t):!0}abort(){W(this,We).abort(),ge(this,We,Os())}incrementSession(){Bl(this,gn)._++}};gr=new WeakMap;gn=new WeakMap;vn=new WeakMap;kt=new WeakMap;We=new WeakMap;bn=new WeakMap;function Ct(t){let{properties:e}=t;return I({},e)}var br=1.4;function Sn(t,e,r=.5){let{center:n,zoom:s}=t.cameraForBounds(e),o=Math.max(s-r,0);return{center:n,zoom:o,speed:br}}function An(t){switch(t){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function Tn(t,e){return`https://api.mapbox.com/styles/v1/${t}/${e}/static/`}var yr='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>';var zs='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/></svg>';var Ko=Tn("mapbox","satellite-streets-v11"),Zo="20d01",Qo=["mapbox.com","mapbox.cn","tilestream.net"],Jo=G(`
<template>
  <div class="MapboxSearch">
    <div class="Label" role="label" aria-live="polite" aria-atomic="true">
    </div>
    <div class="Results" aria-hidden="true">
      <div class="ResultsList" role="listbox">
      </div>
      <div class="ResultsAttribution" aria-hidden="true">
        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
          Powered by Mapbox
        </a>
      </div>
    </div>
  </div>
</template>
`),ea=G(`
<template>
  <div class="Suggestion" role="option" tabindex="-1">
    <div class="SuggestionIcon" aria-hidden="true"></div>
    <div class="SuggestionText">
      <div class="SuggestionName"></div>
      <div class="SuggestionDesc"></div>
    </div>
  </div>
</template>
`),ta=G(`
<template>
  <div class="SearchBox">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${yr}</button>
      <div class="LoadingIcon">${zs}</div>
    </div>
  </div>
</template>
`),ra=G(`
<template>
  <div class="Geocoder">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${yr}</button>
      <div class="LoadingIcon">${zs}</div>
    </div>
  </div>
</template>
`);function Te(){return"mbx"+new ie().id.slice(0,8)}function Pe(t){try{return JSON.parse(t)}catch(e){return null}}function at(t,e){if(t==null||e==null||typeof t!="object"||typeof e!="object")return t===e;let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let s of r)if(!at(t[s],e[s]))return!1;return!0}function Ws(t,e){let r=Math.pow(10,e);return Math.round(t*r)/r}function ia(t){return Boolean(t.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function na(t){return Boolean(Qo.some(e=>t.includes(e)))}var It,lt,ct,V=class extends HTMLElement{constructor(){super(...arguments);c(this,It,Te());c(this,lt,void 0);c(this,ct,e=>`${i(this,It)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,r){let n=l=>l.replace(e,r);Is(this,n);let s=Array.from(this.querySelectorAll("style"));for(let l of s)l.textContent=pr(l.textContent,n);s.length&&p(this,lt,s[s.length-1]);let o=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(let l of o)l.id=l.id.replace(e,r)}connectedCallback(){if(this.childElementCount>0){let s=this.dataset.seed,o=i(this,It);s&&s!==o&&(this.clonedCallback(s,o),this.dataset.seed=o);return}this.dataset.seed=i(this,It);let e=this.template;if(e){let s=this.prepareTemplate(e);this.appendChild(s)}let r=this.templateStyle;if(r){let s=document.createElement("style");s.textContent=this.prepareCSS(r),this.appendChild(s)}let n=document.createElement("style");this.templateUserStyle&&(n.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(n),p(this,lt,n)}prepareTemplate(e){let r=e.content.firstElementChild;return Is(r.cloneNode(!0),i(this,ct))}prepareCSS(e){return Cs(e,i(this,ct))}updateTemplateUserStyle(e){!i(this,lt)||(i(this,lt).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(pr(e,i(this,ct)))}querySelectorAll(e){return super.querySelectorAll(pr(e,i(this,ct)))}addEventListener(e,r,n){super.addEventListener(e,r,n)}removeEventListener(e,r,n){super.removeEventListener(e,r,n)}dispatchEvent(e){return super.dispatchEvent(e)}};It=new WeakMap,lt=new WeakMap,ct=new WeakMap;var sa='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>';var oa='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>';var aa=`<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />
</svg>`;var la=`<!-- TODO: I'm not sure if the way I added the circle will "scale" properly, need to check that -->
<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>
    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>
</svg>`;var ca=`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>
</svg>`;var ua="@mapbox/search-js-web",dt="1.4.0";var uc=`https://api.mapbox.com/search-js/v${dt}/img/style-toggle-satellite.jpg`,hc=`https://api.mapbox.com/search-js/v${dt}/img/style-toggle-default.jpg`,pc=768-1,mc=`@media only screen and (max-width: ${pc}px)`,Vs={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:yr,question:sa,marker:oa,street:aa,addressMarker:la,search:ca},images:{styleToggleDefault:hc,styleToggleSatellite:uc}};function j(t,e={}){let r=f(f({},Vs.variables),e.variables||{}),n=e.cssText||"",s="";for(let[o,l]of Object.entries(r)){if(!Array.isArray(l)){s+=`--${o}: ${l};`;continue}if(l[0]!=="mobile"){let u=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${o} ${u}`)}let[,a,d]=l;n+=`${mc} { ${t} { --${o}: ${a} !important; } }`,s+=`--${o}: ${d};`}return n+`${t} { ${s} }`}function q(t,e={}){return f(f({},Vs.icons),e.icons||{})[t]}function ha(t,e={}){return f(f({},Vs.images),e.images||{})[t]}function wn(t){return t.split("-")[0]}function Ys(t){return t.split("-")[1]}function Xs(t){return["top","bottom"].includes(wn(t))?"x":"y"}function fa(t){return t==="y"?"height":"width"}function pa(t,e,r){let{reference:n,floating:s}=t,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2,a=Xs(e),d=fa(a),u=n[d]/2-s[d]/2,h=a==="x",m;switch(wn(e)){case"top":m={x:o,y:n.y-s.height};break;case"bottom":m={x:o,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:l};break;case"left":m={x:n.x-s.width,y:l};break;default:m={x:n.x,y:n.y}}switch(Ys(e)){case"start":m[a]-=u*(r&&h?-1:1);break;case"end":m[a]+=u*(r&&h?-1:1)}return m}var ga=(t,e,r)=>_(void 0,null,function*(){let{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:l}=r,a=yield l.isRTL==null?void 0:l.isRTL(e),d=yield l.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=pa(d,n,a),m=n,v={};for(let S=0;S<o.length;S++){let{name:y,fn:x}=o[S],{x:A,y:C,data:U,reset:F}=yield x({x:u,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:v,rects:d,platform:l,elements:{reference:t,floating:e}});u=A!=null?A:u,h=C!=null?C:h,v=M(f({},v),{[y]:f(f({},v[y]),U)}),F&&(typeof F=="object"&&(F.placement&&(m=F.placement),F.rects&&(d=F.rects===!0?yield l.getElementRects({reference:t,floating:e,strategy:s}):F.rects),{x:u,y:h}=pa(d,m,a)),S=-1)}return{x:u,y:h,placement:m,strategy:s,middlewareData:v}});function fc(t){return typeof t!="number"?function(e){return f({top:0,right:0,bottom:0,left:0},e)}(t):{top:t,right:t,bottom:t,left:t}}function xr(t){return M(f({},t),{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}function va(t,e){return _(this,null,function*(){var r;e===void 0&&(e={});let{x:n,y:s,platform:o,rects:l,elements:a,strategy:d}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:v=!1,padding:S=0}=e,y=fc(S),x=a[v?m==="floating"?"reference":"floating":m],A=xr(yield o.getClippingRect({element:(r=yield o.isElement==null?void 0:o.isElement(x))==null||r?x:x.contextElement||(yield o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:d})),C=xr(o.convertOffsetParentRelativeRectToViewportRelativeRect?yield o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m==="floating"?M(f({},l.floating),{x:n,y:s}):l.reference,offsetParent:yield o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating),strategy:d}):l[m]);return{top:A.top-C.top+y.top,bottom:C.bottom-A.bottom+y.bottom,left:A.left-C.left+y.left,right:C.right-A.right+y.right}})}var gc={left:"right",right:"left",bottom:"top",top:"bottom"};function Mn(t){return t.replace(/left|right|bottom|top/g,e=>gc[e])}function vc(t,e,r){r===void 0&&(r=!1);let n=Ys(t),s=Xs(t),o=fa(s),l=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Mn(l)),{main:l,cross:Mn(l)}}var bc={start:"end",end:"start"};function ma(t){return t.replace(/start|end/g,e=>bc[e])}var yc=["top","right","bottom","left"],su=yc.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);var Ks=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(e){return _(this,null,function*(){var r;let{placement:n,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:d}=e,T=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",flipAlignment:S=!0}=T,y=wo(T,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),x=wn(n),A=m||(x===l||!S?[Mn(l)]:function(O){let P=Mn(O);return[ma(O),P,ma(P)]}(l)),C=[l,...A],U=yield va(e,y),F=[],st=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&F.push(U[x]),h){let{main:O,cross:P}=vc(n,o,yield a.isRTL==null?void 0:a.isRTL(d.floating));F.push(U[O],U[P])}if(st=[...st,{placement:n,overflows:F}],!F.every(O=>O<=0)){var D,g;let O=((D=(g=s.flip)==null?void 0:g.index)!=null?D:0)+1,P=C[O];if(P)return{data:{index:O,overflows:st},reset:{placement:P}};let N="bottom";switch(v){case"bestFit":{var b;let qe=(b=st.map(he=>[he,he.overflows.filter(me=>me>0).reduce((me,Ms)=>me+Ms,0)]).sort((he,me)=>he[1]-me[1])[0])==null?void 0:b[0].placement;qe&&(N=qe);break}case"initialPlacement":N=l}if(n!==N)return{reset:{placement:N}}}return{}})}}};var Zs=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(e){return _(this,null,function*(){let{x:r,y:n}=e,s=yield function(o,l){return _(this,null,function*(){let{placement:a,platform:d,elements:u}=o,h=yield d.isRTL==null?void 0:d.isRTL(u.floating),m=wn(a),v=Ys(a),S=Xs(a)==="x",y=["left","top"].includes(m)?-1:1,x=h&&S?-1:1,A=typeof l=="function"?l(o):l,{mainAxis:C,crossAxis:U,alignmentAxis:F}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:f({mainAxis:0,crossAxis:0,alignmentAxis:null},A);return v&&typeof F=="number"&&(U=v==="end"?-1*F:F),S?{x:U*x,y:C*y}:{x:C*y,y:U*x}})}(e,t);return{x:r+s.x,y:n+s.y,data:s}})}}};function Aa(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function He(t){if(t==null)return window;if(!Aa(t)){let e=t.ownerDocument;return e&&e.defaultView||window}return t}function Sr(t){return He(t).getComputedStyle(t)}function _e(t){return Aa(t)?"":t?(t.nodeName||"").toLowerCase():""}function Ta(){let t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Me(t){return t instanceof He(t).HTMLElement}function Ke(t){return t instanceof He(t).Element}function Js(t){return typeof ShadowRoot=="undefined"?!1:t instanceof He(t).ShadowRoot||t instanceof ShadowRoot}function Cn(t){let{overflow:e,overflowX:r,overflowY:n}=Sr(t);return/auto|scroll|overlay|hidden/.test(e+n+r)}function xc(t){return["table","td","th"].includes(_e(t))}function ba(t){let e=/firefox/i.test(Ta()),r=Sr(t);return r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].includes(r.willChange)||e&&r.willChange==="filter"||e&&!!r.filter&&r.filter!=="none"}function Ma(){return!/^((?!chrome|android).)*safari/i.test(Ta())}var ya=Math.min,Er=Math.max,Ln=Math.round;function Be(t,e,r){var n,s,o,l;e===void 0&&(e=!1),r===void 0&&(r=!1);let a=t.getBoundingClientRect(),d=1,u=1;e&&Me(t)&&(d=t.offsetWidth>0&&Ln(a.width)/t.offsetWidth||1,u=t.offsetHeight>0&&Ln(a.height)/t.offsetHeight||1);let h=Ke(t)?He(t):window,m=!Ma()&&r,v=(a.left+(m&&(n=(s=h.visualViewport)==null?void 0:s.offsetLeft)!=null?n:0))/d,S=(a.top+(m&&(o=(l=h.visualViewport)==null?void 0:l.offsetTop)!=null?o:0))/u,y=a.width/d,x=a.height/u;return{width:y,height:x,top:S,right:v+y,bottom:S+x,left:v,x:v,y:S}}function Xe(t){return(e=t,(e instanceof He(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function In(t){return Ke(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wa(t){return Be(Xe(t)).left+In(t).scrollLeft}function Ec(t,e,r){let n=Me(e),s=Xe(e),o=Be(t,n&&function(d){let u=Be(d);return Ln(u.width)!==d.offsetWidth||Ln(u.height)!==d.offsetHeight}(e),r==="fixed"),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(n||!n&&r!=="fixed")if((_e(e)!=="body"||Cn(s))&&(l=In(e)),Me(e)){let d=Be(e,!0);a.x=d.x+e.clientLeft,a.y=d.y+e.clientTop}else s&&(a.x=wa(s));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function La(t){return _e(t)==="html"?t:t.assignedSlot||t.parentNode||(Js(t)?t.host:null)||Xe(t)}function xa(t){return Me(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function Qs(t){let e=He(t),r=xa(t);for(;r&&xc(r)&&getComputedStyle(r).position==="static";)r=xa(r);return r&&(_e(r)==="html"||_e(r)==="body"&&getComputedStyle(r).position==="static"&&!ba(r))?e:r||function(n){let s=La(n);for(Js(s)&&(s=s.host);Me(s)&&!["html","body"].includes(_e(s));){if(ba(s))return s;s=s.parentNode}return null}(t)||e}function Ea(t){if(Me(t))return{width:t.offsetWidth,height:t.offsetHeight};let e=Be(t);return{width:e.width,height:e.height}}function ka(t){let e=La(t);return["html","body","#document"].includes(_e(e))?t.ownerDocument.body:Me(e)&&Cn(e)?e:ka(e)}function kn(t,e){var r;e===void 0&&(e=[]);let n=ka(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=He(n),l=s?[o].concat(o.visualViewport||[],Cn(n)?n:[]):n,a=e.concat(l);return s?a:a.concat(kn(l))}function Sa(t,e,r){return e==="viewport"?xr(function(n,s){let o=He(n),l=Xe(n),a=o.visualViewport,d=l.clientWidth,u=l.clientHeight,h=0,m=0;if(a){d=a.width,u=a.height;let v=Ma();(v||!v&&s==="fixed")&&(h=a.offsetLeft,m=a.offsetTop)}return{width:d,height:u,x:h,y:m}}(t,r)):Ke(e)?function(n,s){let o=Be(n,!1,s==="fixed"),l=o.top+n.clientTop,a=o.left+n.clientLeft;return{top:l,left:a,x:a,y:l,right:a+n.clientWidth,bottom:l+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}(e,r):xr(function(n){var s;let o=Xe(n),l=In(n),a=(s=n.ownerDocument)==null?void 0:s.body,d=Er(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=Er(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),h=-l.scrollLeft+wa(n),m=-l.scrollTop;return Sr(a||o).direction==="rtl"&&(h+=Er(o.clientWidth,a?a.clientWidth:0)-d),{width:d,height:u,x:h,y:m}}(Xe(t)))}function Sc(t){let e=kn(t),r=["absolute","fixed"].includes(Sr(t).position)&&Me(t)?Qs(t):t;return Ke(r)?e.filter(n=>Ke(n)&&function(s,o){let l=o.getRootNode==null?void 0:o.getRootNode();if(s.contains(o))return!0;if(l&&Js(l)){let a=o;do{if(a&&s===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(n,r)&&_e(n)!=="body"):[]}var Ac={getClippingRect:function(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t,o=[...r==="clippingAncestors"?Sc(e):[].concat(r),n],l=o[0],a=o.reduce((d,u)=>{let h=Sa(e,u,s);return d.top=Er(h.top,d.top),d.right=ya(h.right,d.right),d.bottom=ya(h.bottom,d.bottom),d.left=Er(h.left,d.left),d},Sa(e,l,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:r,strategy:n}=t,s=Me(r),o=Xe(r);if(r===o)return e;let l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if((s||!s&&n!=="fixed")&&((_e(r)!=="body"||Cn(o))&&(l=In(r)),Me(r))){let d=Be(r,!0);a.x=d.x+r.clientLeft,a.y=d.y+r.clientTop}return M(f({},e),{x:e.x-l.scrollLeft+a.x,y:e.y-l.scrollTop+a.y})},isElement:Ke,getDimensions:Ea,getOffsetParent:Qs,getDocumentElement:Xe,getElementRects:t=>{let{reference:e,floating:r,strategy:n}=t;return{reference:Ec(e,Qs(r),n),floating:M(f({},Ea(r)),{x:0,y:0})}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Sr(t).direction==="rtl"};function Ca(t,e,r,n){n===void 0&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=!0,animationFrame:a=!1}=n,d=s&&!a,u=o&&!a,h=d||u?[...Ke(t)?kn(t):[],...kn(e)]:[];h.forEach(y=>{d&&y.addEventListener("scroll",r,{passive:!0}),u&&y.addEventListener("resize",r)});let m,v=null;l&&(v=new ResizeObserver(r),Ke(t)&&!a&&v.observe(t),v.observe(e));let S=a?Be(t):null;return a&&function y(){let x=Be(t);!S||x.x===S.x&&x.y===S.y&&x.width===S.width&&x.height===S.height||r(),S=x,m=requestAnimationFrame(y)}(),l||r(),()=>{var y;h.forEach(x=>{d&&x.removeEventListener("scroll",r),u&&x.removeEventListener("resize",r)}),(y=v)==null||y.disconnect(),v=null,a&&cancelAnimationFrame(m)}}var Ia=(t,e,r)=>ga(t,e,f({platform:Ac},r));var ut,On,Rn=class{constructor(e,r,n){c(this,ut,void 0);c(this,On,{placement:"bottom-start",flip:!1,offset:10});this.update=()=>_(this,null,function*(){let e={placement:this.options.placement,middleware:[Zs(this.options.offset),this.options.flip&&Ks()].filter(Boolean)},{x:r,y:n}=yield Ia(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${r}px`,top:`${n}px`})});this.referenceEl=e,this.floatingEl=r,p(this,ut,f(f({},i(this,On)),n)),this.destroy=Ca(this.referenceEl,this.floatingEl,this.update)}get options(){return i(this,ut)}set options(e){p(this,ut,f(f({},i(this,ut)),e))}};ut=new WeakMap,On=new WeakMap;var ne=".Geocoder *,.MapboxAddressConfirmation *,.MapboxAddressConfirmationFeature *,.MapboxAddressConfirmationNoFeature *,.MapboxAddressMinimap *,.MapboxSearch *,.SearchBox *{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Geocoder,.SearchBox{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);padding-bottom:0;padding-top:0;position:relative;width:100%}.SearchIcon{fill:#757575;left:.5em}.ActionIcon,.SearchIcon{bottom:0;height:20px;margin:auto 0;position:absolute;top:0;width:20px}.ActionIcon{right:.5em}.ActionIcon>button{background:none;border:none;color:inherit;cursor:pointer;font:inherit;height:100%;outline:inherit;padding:0;width:100%}.ActionIcon>button:hover{background:none!important}.ClearBtn{display:none}.ClearBtn:hover{color:#909090}.ClearBtn:focus{border:1.5px solid #909090;border-radius:4px}.LoadingIcon{-moz-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;-webkit-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;display:none;height:100%}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.Input{background-color:transparent;border:0;color:#404040;color:rgba(0,0,0,.75);font:inherit;height:36px;margin:0;overflow:hidden;padding:0 40px;text-overflow:ellipsis;white-space:nowrap;width:100%}.Input::-ms-clear{display:none}.Input:focus{border:thin dotted;border-radius:var(--borderRadius);box-shadow:none;color:#404040;color:rgba(0,0,0,.75);outline:0}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var E=class extends CustomEvent{constructor(e,r){super(e,{composed:!0,detail:r})}clone(e){let r=new E(this.type,this.detail);return e&&Object.defineProperty(r,"target",{value:e}),r}};var Oa="Type in 2 or more characters for results.",Ra="When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",Pa="No search results.",_a=(t,e,r)=>`${e} ${e===1?"result is":"results are"} available. ${t}. ${r} of ${e} is selected.`,Ba=t=>`${t} ${t===1?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`;function Pn(t){let e=t.currentTarget;(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var Ha="search-listbox__description",Ze=t=>{let e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.setAttribute("role","status"),e.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");let r=document.createElement("div");return r.setAttribute("id",`${t}--${Ha}`),e.appendChild(r),e},eo=(t,e)=>{var n;let r=(n=document.body.querySelector(`[id="${e}--${Ha}"]`))!=null?n:null;r&&(r.textContent=t)},_n=t=>{t.name=t.name+" address-search",t.setAttribute("data-lpignore","true")},Fa=(t,e,r)=>{let n=null,s=!e||e.length===0;if((t==null?void 0:t.length)<2)n=Oa+" "+Ra;else if(s)n=Pa;else if(r!==void 0){let o=e[r],l=o.name||o.feature_name||o.properties.name;n=_a(l,e.length,r+1)}else n=Ba(e.length);return n};var Ar=(t,e)=>{switch(e){case 0:return t.matching_name||t.feature_name||t.address_line1;case 2:return t.name;case 1:return t.properties.name;default:return""}},Da=(t,e)=>{switch(e){case 0:return t.description;case 2:return t.feature_type==="poi"?t.full_address:t.place_formatted;case 1:return t.properties.place_formatted;default:return""}};function to(t,e){return`${t}-${e}`}var Y,K,Ot,we,Rt,Tr,Pt,Mr,Na,Bn,Mc,wr,Lr,kr,Cr,_t,ht,Ir,ve=class extends V{constructor(){super(...arguments);c(this,Mr);c(this,Bn);this.suggestions=null;c(this,Y,null);c(this,K,void 0);c(this,Ot,void 0);c(this,we,void 0);c(this,Rt,void 0);c(this,Tr,null);c(this,Pt,void 0);c(this,wr,{});c(this,Lr,{});c(this,kr,e=>{let{Results:r}=i(this,K),n=e.target;if(n.dataset.mapboxSuccess){delete n.dataset.mapboxSuccess;return}let s=n.value;this.renderAriaMessage(),r.setAttribute("aria-busy","true"),this.dispatchEvent(new E("input",{lastInput:e.data,inputText:s}))});this.renderAriaMessage=()=>{var r;let e=Fa((r=this.input)==null?void 0:r.value,this.suggestions,this.selectedIndex);eo(e,this.dataset.seed)};this.clearAriaMessage=()=>{eo("",this.dataset.seed)};this.handleSuggest=e=>{if(this.suggestions=e,(!e||e.length===0)&&this.renderAriaMessage(),!e){this.hideResults();return}ze(this,Bn,Mc).call(this),e.length&&ze(this,Mr,Na).call(this);let{Results:r}=i(this,K);r.setAttribute("aria-busy","false")};this.handleError=()=>{let{Results:e}=i(this,K);e.setAttribute("aria-busy","false"),this.hideResults()};c(this,Cr,(e,r)=>_(this,null,function*(){let n=this.input;n&&(n.dataset.mapboxSuccess="true");let s={suggestion:e,selectedIndex:r};this.dispatchEvent(new E("select",s)),this.hideResults()}));c(this,_t,()=>{let e=this.input;delete e.dataset.mapboxSuccess,this.dispatchEvent(new E("focus")),this.renderAriaMessage(),ze(this,Mr,Na).call(this)});c(this,ht,()=>{document.activeElement!==this.input&&(this.dispatchEvent(new E("blur")),this.clearAriaMessage())});this.handleArrowUp=()=>{this.selectedIndex===void 0?this.selectedIndex=this.suggestions.length-1:this.selectedIndex===0?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)};this.handleArrowDown=()=>{this.selectedIndex===void 0?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)};c(this,Ir,e=>{var r;if(!!((r=this.suggestions)==null?void 0:r.length)){if(e.key==="ArrowDown"){e.preventDefault(),this.handleArrowDown();return}if(e.key==="ArrowUp"){e.preventDefault(),this.handleArrowUp();return}if(e.key==="Escape"){this.hideResults();return}if(this.selectedIndex!==void 0&&e.key==="Enter"){e.preventDefault(),i(this,Cr).call(this,this.suggestions[this.selectedIndex],this.selectedIndex);return}}})}get template(){return Jo}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxSearch",this.theme)}get input(){return i(this,Rt)}set input(e){let r=i(this,Rt);r&&(r.removeEventListener("input",i(this,kr)),r.removeEventListener("focus",i(this,_t)),r.removeEventListener("blur",i(this,ht)),r.removeEventListener("keydown",i(this,Ir)),i(this,Y)&&i(this,Y).destroy()),e&&(e.addEventListener("input",i(this,kr)),e.addEventListener("focus",i(this,_t)),e.addEventListener("blur",i(this,ht)),e.addEventListener("keydown",i(this,Ir)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",i(this,we)),this.isConnected&&p(this,Y,new Rn(e,i(this,K).Results,this.popoverOptions))),p(this,Rt,e)}get searchService(){return i(this,Tr)}set searchService(e){p(this,Tr,e)}get selectedIndex(){return i(this,Pt)}set selectedIndex(e){let r=i(this,Pt);p(this,Pt,e);let{ResultsList:n}=i(this,K),s=to(i(this,we),e);if(e!==void 0?(this.input.setAttribute("aria-activedescendant",s),n.setAttribute("aria-activedescendant",s)):(this.input.removeAttribute("aria-activedescendant"),n.removeAttribute("aria-activedescendant")),r!==e){let o=to(i(this,we),r),l=n.querySelector(`#${o}`);if(l==null||l.removeAttribute("aria-selected"),l==null||l.setAttribute("tabindex","-1"),e!==void 0){let a=n.querySelector(`#${s}`);a==null||a.setAttribute("aria-selected","true"),a==null||a.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){let{Results:e,ResultsList:r}=i(this,K);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),r.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){let r=this.prepareTemplate(ea);return r.id=to(i(this,we),e),r}fillItem(e,r,n,s){let o=e.querySelector('[class$="SuggestionIcon"]'),l=e.querySelector('[class$="SuggestionName"]'),a=e.querySelector('[class$="SuggestionDesc"]');this.searchService===0?(o.innerHTML=q(r.accuracy==="street"?"street":"addressMarker",this.theme),o.removeAttribute("aria-hidden")):o.setAttribute("aria-hidden","true"),l.textContent=a.textContent="",l.textContent=Ar(r,this.searchService),a.textContent=Da(r,this.searchService),n===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(n+1).toString()),e.setAttribute("aria-setsize",s.toString())}get theme(){return i(this,wr)}set theme(e){p(this,wr,e),!(!i(this,K)||!e)&&this.updateTemplateUserStyle(j(".MapboxSearch",e))}get popoverOptions(){return i(this,Lr)}set popoverOptions(e){p(this,Lr,e),i(this,Y)&&(i(this,Y).options=e,i(this,Y).update())}connectedCallback(){super.connectedCallback(),this.dataSeed=this.dataset.seed,p(this,Ot,this.dataset.seed+"-Label"),p(this,we,this.dataset.seed+"-ResultsList"),this.input&&this.input.setAttribute("aria-controls",i(this,we)),p(this,K,te(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:r,Label:n}=i(this,K);n.id=i(this,Ot),r.id=i(this,we),r.setAttribute("aria-labelledby",i(this,Ot)),e.addEventListener("blur",i(this,ht)),!i(this,Y)&&this.input&&p(this,Y,new Rn(this.input,i(this,K).Results,this.popoverOptions)),requestAnimationFrame(()=>{i(this,Y)&&i(this,Y).update()})}disconnectedCallback(){this.input=null;let{Results:e}=i(this,K);e.removeEventListener("blur",i(this,ht)),i(this,Y)&&i(this,Y).destroy()}focus(){document.activeElement===this.input?i(this,_t).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){i(this,Y)&&i(this,Y).update()}};Y=new WeakMap,K=new WeakMap,Ot=new WeakMap,we=new WeakMap,Rt=new WeakMap,Tr=new WeakMap,Pt=new WeakMap,Mr=new WeakSet,Na=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:r}=i(this,K),n=this.input.getBoundingClientRect();r.style.setProperty("--width",`${n.width}px`),r.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0},Bn=new WeakSet,Mc=function(){let{ResultsList:e}=i(this,K);if(!this.suggestions||!this.suggestions.length){e.innerHTML="",this.hideResults();return}let r=Co(e);if(this.suggestions.length>r.length)for(let n=r.length;n<this.suggestions.length;n++){let s=this.renderItem(n);r.push(s),s.onmouseenter=()=>{this.selectedIndex=n},s.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(s)}if(this.suggestions.length<r.length)for(let n=this.suggestions.length;n<r.length;n++)r[n].remove();for(let n=0;n<this.suggestions.length;n++){let s=this.suggestions[n],o=r[n];this.fillItem(o,s,n,this.suggestions.length),o.onclick=()=>{i(this,Cr).call(this,s,n)}}},wr=new WeakMap,Lr=new WeakMap,kr=new WeakMap,Cr=new WeakMap,_t=new WeakMap,ht=new WeakMap,Ir=new WeakMap;window.MapboxSearchListbox=ve;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",ve);var wc=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),Lc=new Set(["off","on","true","false"]);function ro(t){let e=t.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function Or(t){let e=t||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var kc="section-",Cc="section-default",Ic="section-shipping",Oc="section-billing";function Rr(t){let e=Array.from(t.querySelectorAll("[autocomplete]")).filter(n=>{let s=n.tagName.toLowerCase();return s==="input"||s==="select"||s==="textarea"}),r=[];for(let n of e){if(!Oo(n))continue;let s=n.getAttribute("autocomplete")||"";if(!s||Lc.has(s))continue;let o=s.toLowerCase().split(" ");if(o.length>3)continue;let l=o[o.length-1];if(!wc.has(l))continue;o.pop();let a=Cc;if(o.length){let d=o[o.length-1];d==="shipping"&&(a=Ic,o.pop()),d==="billing"&&(a=Oc,o.pop())}if(o.length){let d=o[o.length-1];d.startsWith(kc)&&(a=d)}r.push({input:n,section:a,field:l})}return r}function pt(t,e){let r=[],n=[],s=Rr(t),o=null;for(let{input:l,section:a,field:d}of s){let u=r.length-1,h=!1;if(r.length?(n[u]!==a||r[u][d])&&(h=!0):h=!0,h){if(o)break;r.push({[d]:l}),n.push(a),u++}else r[u][d]=l;l===e&&(o=r[u])}return o!=null?o:{}}function io(t,e,r){var l;let n=pt(t,e),s=[r.address_line1,r.address_line2,r.address_line3].filter(a=>Boolean(a)).join(", ");fe(n["street-address"],n["address-line2"]?r.address_line1||"":s),fe(n["address-line1"],r.address_line1||""),fe(n["address-line2"],r.address_line2||""),fe(n["address-level1"],r.address_level1||""),fe(n["address-level2"],r.address_level2||""),fe(n["address-level3"],r.address_level3||"");let o=r.country_code||((l=r.metadata)==null?void 0:l.iso_3166_1)||"";if(n.country&&n.country instanceof HTMLSelectElement){let a=n.country.querySelector("option").value;a===""&&(a=n.country.querySelectorAll("option")[1].value);let d=a===a.toUpperCase();fe(n.country,d?o.toUpperCase():o)}else fe(n.country,o);fe(n["country-name"],r.country||""),fe(n["postal-code"],r.postcode||"")}function Hn(t,e){let r=pt(t,e),n={};for(let[s,o]of Object.entries(r))(o==null?void 0:o.value)&&(n[s]=o.value);return n}function Bt(t){let e=[];return t["street-address"]?e.push(t["street-address"]):e.push(t["address-line1"]||""),e.push(t["address-line2"]||""),e.push(t["address-line3"]||""),e.push(t["address-level3"]||""),e.push(t["address-level2"]||""),e.push(t["address-level1"]||""),e.push(t["postal-code"]||""),t["country-name"]?e.push(t["country-name"]):e.push(t.country||""),e.filter(r=>Boolean(r)).map(r=>r.trim()).join(", ")}function Pr(t,e){let r=ro(e);if(!r)return;let n=Ct(t);io(r,e,n);let s=pt(r,e);s["address-line2"]&&!n.address_line2&&s["address-line2"].focus()}function ja(t){var n;let e={},r=[t.properties.address_line1,t.properties.address_line2,t.properties.address_line3].filter(s=>Boolean(s)).join(", ");return e["street-address"]=r,e["address-line1"]=t.properties.address_line1,e["address-line2"]=t.properties.address_line2,e["address-line3"]=t.properties.address_line3,e["address-level1"]=t.properties.address_level1,e["address-level2"]=t.properties.address_level2,e["address-level3"]=t.properties.address_level3,e.country=(n=t.properties.metadata)==null?void 0:n.iso_3166_1,e["country-name"]=t.properties.country,e["postal-code"]=t.properties.postcode,e}function Ga(t,e){for(let[r,n]of Object.entries(t))if(e[r]!==n)return!0;return!1}var Fn=t=>t.filter((e,r,n)=>{let s=Ar(e,0);return e.accuracy!=="street"||n.findIndex(o=>s===Ar(o,0))===r}),pe=(t,e,r)=>{let o=r?e||"address-line1":"new-password";t&&(t.autocomplete=o)},Dn=(t,e,r)=>{if(!t||!r)return;pe(t,e,!0);let n={properties:M(f({},r),{address_line1:r.address_line1+" ",postcode:null})};Pr(n,t),pe(t,e,!1),t==null||t.focus()};var lo=un(Ua());var qa=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],no=qa.join(","),_r=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,za=function(e,r,n){var s=Array.prototype.slice.apply(e.querySelectorAll(no));return r&&_r.call(e,no)&&s.unshift(e),s=s.filter(n),s},Rc=function(e){return e.contentEditable==="true"},Wa=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return isNaN(r)?Rc(e)||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:r},Pc=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},so=function(e){return e.tagName==="INPUT"},_c=function(e){return so(e)&&e.type==="hidden"},Bc=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return r},Hc=function(e,r){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===r)return e[n]},Fc=function(e){if(!e.name)return!0;var r=e.form||e.ownerDocument,n=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=Hc(s,e.form);return!o||o===e},Dc=function(e){return so(e)&&e.type==="radio"},Nc=function(e){return Dc(e)&&!Fc(e)},jc=function(e,r){if(getComputedStyle(e).visibility==="hidden")return!0;var n=_r.call(e,"details>summary:first-of-type"),s=n?e.parentElement:e;if(_r.call(s,"details:not([open]) *"))return!0;if(!r||r==="full")for(;e;){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}else if(r==="non-zero-area"){var o=e.getBoundingClientRect(),l=o.width,a=o.height;return l===0&&a===0}return!1},Gc=function(e){if(so(e)||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="BUTTON")for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var s=r.children.item(n);if(s.tagName==="LEGEND")return!s.contains(e)}return!0}r=r.parentElement}return!1},oo=function(e,r){return!(r.disabled||_c(r)||jc(r,e.displayCheck)||Bc(r)||Gc(r))},Va=function(e,r){return!(!oo(e,r)||Nc(r)||Wa(r)<0)},Ya=function(e,r){r=r||{};var n=[],s=[],o=za(e,r.includeContainer,Va.bind(null,r));o.forEach(function(a,d){var u=Wa(a);u===0?n.push(a):s.push({documentOrder:d,tabIndex:u,node:a})});var l=s.sort(Pc).map(function(a){return a.node}).concat(n);return l},Xa=function(e,r){r=r||{};var n=za(e,r.includeContainer,oo.bind(null,r));return n},Br=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return _r.call(e,no)===!1?!1:Va(r,e)},$c=qa.concat("iframe").join(","),jn=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return _r.call(e,$c)===!1?!1:oo(r,e)};function Ka(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Uc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ka(Object(r),!0).forEach(function(n){qc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ka(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Za=function(){var t=[];return{activateTrap:function(r){if(t.length>0){var n=t[t.length-1];n!==r&&n.pause()}var s=t.indexOf(r);s===-1||t.splice(s,1),t.push(r)},deactivateTrap:function(r){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}}}(),zc=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Wc=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Vc=function(e){return e.key==="Tab"||e.keyCode===9},Qa=function(e){return setTimeout(e,0)},ao=function(e,r){var n=-1;return e.every(function(s,o){return r(s)?(n=o,!1):!0}),n},Hr=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,n):e},Gn=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ja=function(e,r){var n=(r==null?void 0:r.document)||document,s=Uc({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),o={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,a=function(g,b,T){return g&&g[b]!==void 0?g[b]:s[T||b]},d=function(g){return!!(g&&o.containers.some(function(b){return b.contains(g)}))},u=function(g){var b=s[g];if(typeof b=="function"){for(var T=arguments.length,O=new Array(T>1?T-1:0),P=1;P<T;P++)O[P-1]=arguments[P];b=b.apply(void 0,O)}if(!b){if(b===void 0||b===!1)return b;throw new Error("`".concat(g,"` was specified but was not a node, or did not return a node"))}var N=b;if(typeof b=="string"&&(N=n.querySelector(b),!N))throw new Error("`".concat(g,"` as selector refers to no known node"));return N},h=function(){var g=u("initialFocus");if(g===!1)return!1;if(g===void 0)if(d(n.activeElement))g=n.activeElement;else{var b=o.tabbableGroups[0],T=b&&b.firstTabbableNode;g=T||u("fallbackFocus")}if(!g)throw new Error("Your focus-trap needs to have at least one focusable element");return g},m=function(){if(o.tabbableGroups=o.containers.map(function(g){var b=Ya(g),T=Xa(g);if(b.length>0)return{container:g,firstTabbableNode:b[0],lastTabbableNode:b[b.length-1],nextTabbableNode:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,qe=T.findIndex(function(he){return he===P});return N?T.slice(qe+1).find(function(he){return Br(he)}):T.slice(0,qe).reverse().find(function(he){return Br(he)})}}}).filter(function(g){return!!g}),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},v=function D(g){if(g!==!1&&g!==n.activeElement){if(!g||!g.focus){D(h());return}g.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=g,zc(g)&&g.select()}},S=function(g){var b=u("setReturnFocus",g);return b||(b===!1?!1:g)},y=function(g){var b=Gn(g);if(!d(b)){if(Hr(s.clickOutsideDeactivates,g)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!jn(b)});return}Hr(s.allowOutsideClick,g)||g.preventDefault()}},x=function(g){var b=Gn(g),T=d(b);T||b instanceof Document?T&&(o.mostRecentlyFocusedNode=b):(g.stopImmediatePropagation(),v(o.mostRecentlyFocusedNode||h()))},A=function(g){var b=Gn(g);m();var T=null;if(o.tabbableGroups.length>0){var O=ao(o.tabbableGroups,function(dr){var ur=dr.container;return ur.contains(b)}),P=O>=0?o.tabbableGroups[O]:void 0;if(O<0)g.shiftKey?T=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:T=o.tabbableGroups[0].firstTabbableNode;else if(g.shiftKey){var N=ao(o.tabbableGroups,function(dr){var ur=dr.firstTabbableNode;return b===ur});if(N<0&&(P.container===b||jn(b)&&!Br(b)&&!P.nextTabbableNode(b,!1))&&(N=O),N>=0){var qe=N===0?o.tabbableGroups.length-1:N-1,he=o.tabbableGroups[qe];T=he.lastTabbableNode}}else{var me=ao(o.tabbableGroups,function(dr){var ur=dr.lastTabbableNode;return b===ur});if(me<0&&(P.container===b||jn(b)&&!Br(b)&&!P.nextTabbableNode(b))&&(me=O),me>=0){var Ms=me===o.tabbableGroups.length-1?0:me+1,xl=o.tabbableGroups[Ms];T=xl.firstTabbableNode}}}else T=u("fallbackFocus");T&&(g.preventDefault(),v(T))},C=function(g){if(Wc(g)&&Hr(s.escapeDeactivates,g)!==!1){g.preventDefault(),l.deactivate();return}if(Vc(g)){A(g);return}},U=function(g){if(!Hr(s.clickOutsideDeactivates,g)){var b=Gn(g);d(b)||Hr(s.allowOutsideClick,g)||(g.preventDefault(),g.stopImmediatePropagation())}},F=function(){if(!!o.active)return Za.activateTrap(l),o.delayInitialFocusTimer=s.delayInitialFocus?Qa(function(){v(h())}):v(h()),n.addEventListener("focusin",x,!0),n.addEventListener("mousedown",y,{capture:!0,passive:!1}),n.addEventListener("touchstart",y,{capture:!0,passive:!1}),n.addEventListener("click",U,{capture:!0,passive:!1}),n.addEventListener("keydown",C,{capture:!0,passive:!1}),l},st=function(){if(!!o.active)return n.removeEventListener("focusin",x,!0),n.removeEventListener("mousedown",y,!0),n.removeEventListener("touchstart",y,!0),n.removeEventListener("click",U,!0),n.removeEventListener("keydown",C,!0),l};return l={activate:function(g){if(o.active)return this;var b=a(g,"onActivate"),T=a(g,"onPostActivate"),O=a(g,"checkCanFocusTrap");O||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,b&&b();var P=function(){O&&m(),F(),T&&T()};return O?(O(o.containers.concat()).then(P,P),this):(P(),this)},deactivate:function(g){if(!o.active)return this;clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,st(),o.active=!1,o.paused=!1,Za.deactivateTrap(l);var b=a(g,"onDeactivate"),T=a(g,"onPostDeactivate"),O=a(g,"checkCanReturnFocus");b&&b();var P=a(g,"returnFocus","returnFocusOnDeactivate"),N=function(){Qa(function(){P&&v(S(o.nodeFocusedBeforeActivation)),T&&T()})};return P&&O?(O(S(o.nodeFocusedBeforeActivation)).then(N,N),this):(N(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,st(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,m(),F(),this)},updateContainerElements:function(g){var b=[].concat(g).filter(Boolean);return o.containers=b.map(function(T){return typeof T=="string"?n.querySelector(T):T}),o.active&&m(),this}},l.updateContainerElements(e),l};var el=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new ie;this.autofillSessionEnabled=!1;this.detectBrowserAutofillEnabled=!1}},H=new el;Object.defineProperty(H,"autofillSessionToken",{configurable:!1,writable:!1});var Yc=G(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),Fr,ce,mt,Dr,ft=class extends V{constructor(){super(...arguments);c(this,Fr,!1);c(this,ce,void 0);c(this,mt,void 0);c(this,Dr,{})}get template(){return Yc}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressConfirmation",this.theme)}get theme(){return i(this,Dr)}set theme(e){if(p(this,Dr,e),!i(this,ce)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressConfirmation",e));let{ContentFeature:r,ContentNoFeature:n}=i(this,ce);r.theme=e,n.theme=e}connectedCallback(){super.connectedCallback(),p(this,ce,te(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=i(this,ce);e.setAttribute("aria-hidden","true");let r=this.theme;if(r){let{ContentFeature:n,ContentNoFeature:s}=i(this,ce);n.theme=r,s.theme=r}}disconnectedCallback(){p(this,mt,null)}hide(){var r;if(p(this,Fr,!1),!i(this,ce))return;let{MapboxAddressConfirmation:e}=i(this,ce);e.setAttribute("aria-hidden","true"),(r=i(this,mt))==null||r.deactivate(),lo.default.off()}show(e,r,n){return _(this,null,function*(){var v;if(!i(this,ce))return{type:"cancel"};let{MapboxAddressConfirmation:s,ContentFeature:o,ContentNoFeature:l}=i(this,ce),{accessToken:a,minimap:d=!1,theme:u,footer:h}=r;this.theme=u,n?(o.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),o.minimap=d,o.accessToken=a,o.footer=h,o.update(n,e)):(o.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),p(this,Fr,!0),s.removeAttribute("aria-hidden"),lo.default.on();let m=n?o:l;return p(this,mt,Ja(s,{fallbackFocus:m,escapeDeactivates:()=>(this.hide(),!0)})),(v=i(this,mt))==null||v.activate(),new Promise(S=>{let y=m,x=A=>{y.removeEventListener("result",x);let C=A.detail;this.hide(),S(C==="change"?{type:"change",feature:n}:{type:C})};y.addEventListener("result",x)})})}tryShow(e,r){return _(this,null,function*(){if(!i(this,ce))return{type:"cancel"};let{accessToken:n,options:s={}}=r,o=new js(f({accessToken:n},s)),l=Bt(e),d=(yield o.validate(l,{sessionToken:H.autofillSessionToken})).features[0];if(d){let u=m=>m.properties.match_code.confidence===$s.exact,{skipConfirmModal:h=u}=r;if(h(d))return{type:"nochange"}}return yield this.show(e,r,d)})}};Fr=new WeakMap,ce=new WeakMap,mt=new WeakMap,Dr=new WeakMap;window.MapboxAddressConfirmation=ft;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",ft);var co=new ft;function $n(r){return _(this,arguments,function*(t,e={}){var d;let{sections:n=[]}=e;co.parentNode||document.body.appendChild(co);let s={type:"nochange"},o=Or(t),l=Rr(t),a=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let u of o){if(n.length){let x=l.find(A=>A.input===u);if(!x||!n.includes(x.section))continue}let h=Hn(t,u),m=a.find(x=>x.input===u),v=m==null?void 0:m.autofillHost;if(v){let x=v.retrieveFeature;if(x){let A=ja(x);if(!Ga(h,A))continue}}let S=e.accessToken||H.accessToken,y=yield co.tryShow(h,M(f({},e),{accessToken:S}));if(y.type==="change"){let x=pt(t,u);if(((d=x["address-line2"])==null?void 0:d.value)&&(y.feature.properties.address_line2=x["address-line2"].value),m)v.simulateRetrieve(y.feature);else{u.dataset.mapboxSuccess="true";let A=Ct(y.feature);io(t,u,A)}}y.type==="change"&&s.type!=="cancel"&&(s=y),y.type==="cancel"&&(s=y)}return s})}function Un(t,e,r,n,s){if(e){let o=G(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[l,a]=Array.from(o.querySelectorAll("span > span"));if(r&&n)l.textContent=r,a.textContent=n;else{let d=e.split(",");l.textContent=d[0].trim(),a.textContent=d.slice(1).join(",").trim()}if(!s){if(t["address-line2"]){let d=document.createElement("span");d.textContent=t["address-line2"],o.insertBefore(d,a),o.insertBefore(document.createElement("br"),a)}if(t["address-line3"]){let d=document.createElement("span");d.textContent=t["address-line3"],o.insertBefore(d,a),o.insertBefore(document.createElement("br"),a)}}return o}else{let o=t["street-address"]||t["address-line1"]||"",l=t["address-line2"],a=t["address-line3"],d=[t["address-level4"]||"",t["address-level3"]||"",t["address-level2"]||"",`${t["address-level1"]||""} ${t["postal-code"]||""}`,t.country||t["country-name"]||""].filter(Boolean).join(", "),h=[o,l,a,d].filter(Boolean).map(v=>`<span>${v}</span>`).join("<br />");return G(`
        <span>${h}</span>
      `)}}function qn(t,e,r,n){return _(this,null,function*(){if(!r)return;let s=ro(t),o=Object.values(pt(s,t));if(!e.detail.elements.some(v=>o.includes(v)))return;let l=Rr(s),d=l.find(v=>v.input===t).section,u=Array.from(new Set(l.filter(v=>e.detail.elements.includes(v.input)).map(v=>v.section)));if(!u.includes(d))return;let h=typeof r=="object"&&r.sections||[];if(h.length&&!h.some(v=>u.includes(v)))return;let m=typeof r=="object"?r:{};m=M(f({},m),{accessToken:n,sections:[d]}),yield $n(s,m)})}var Xc="https://contribute-api.mapbox.com/v1",Kc="https://contribute-api-staging.tilestream.net/v1",Zc="edit-suggestion";function zn(t,e){if(!H.feedbackEnabled)return;let r=window.location.hostname,s=`${ia(r)||na(r)?Kc:Xc}/${Zc}/address?access_token=${t}`,{originalCoordinate:o,originalAddress:l,changes:a,labels:d}=e,u={version:"1.18",action:"update",reason:"incorrect_data",location:{longitude:o[0],latitude:o[1]},userEmail:"no-reply-autofill@mapbox.com",changes:a,placeName:l,labels:d,notificationsDisabled:!0,submissionNotificationDisabled:!0};fetch(s,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${dt}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(u)})}var Qc=G(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),Le,Nr,Ht,jr,Gr,$r,Ur,qr,uo=class extends V{constructor(){super(...arguments);c(this,Le,void 0);c(this,Nr,{});this.minimap=!1;c(this,Ht,void 0);c(this,jr,void 0);this.update=(e,r)=>{var a;p(this,Ht,e),p(this,jr,r);let{ModalMap:n,Minimap:s,ModalAddressApprove:o}=i(this,Le);if(this.minimap){if(n.removeAttribute("aria-hidden"),s.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:d,theme:u,mapStyleMode:h,satelliteToggle:m}=this.minimap;d&&(s.defaultMapStyle=this.minimap.defaultMapStyle),u&&(s.theme=this.minimap.theme),h&&(s.mapStyleMode=h),m!==void 0&&(s.satelliteToggle=m)}s.feature=e}else n.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;o.innerHTML="",o.appendChild(Un(r,l,e.properties.feature_name,e.properties.description,((a=e.properties.place_type)==null?void 0:a[0])==="secondary_address"))};c(this,Gr,()=>{this.dispatchEvent(new E("result","cancel"))});this.approve=()=>{this.dispatchEvent(new E("result","change"))};this.reject=()=>{this.dispatchEvent(new E("result","nochange")),zn(this.accessToken,{originalCoordinate:i(this,Ht).geometry.coordinates,originalAddress:i(this,Ht).properties.full_address,changes:{address:Bt(i(this,jr))},labels:["address_confirm_form"]})};c(this,$r,Te());c(this,Ur,Te());c(this,qr,Te())}get template(){return Qc}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return i(this,Nr)}set theme(e){if(p(this,Nr,e),!i(this,Le)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressConfirmationFeature",e));let{IconQuestion:r,IconClose:n}=i(this,Le);r.innerHTML=q("question",e),n.innerHTML=q("close",e)}set footer(e){if(e===void 0)return;let r=this.querySelector(".ModalFooter");typeof e=="string"?(r.textContent=e,r.removeAttribute("aria-hidden")):e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),p(this,Le,te(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:r,IconClose:n,ButtonApprove:s,ButtonReject:o,ModalAddressApprove:l}=i(this,Le);e.setAttribute("aria-labelledby",i(this,Ur)),e.setAttribute("aria-describedby",i(this,qr)),n.setAttribute("aria-controls",i(this,$r)),e.id=i(this,$r),r.id=i(this,Ur),l.id=i(this,qr);let a=Array.from(this.querySelectorAll('[role="button"]'));for(let u of a)u.addEventListener("keydown",Pn);n.addEventListener("click",i(this,Gr)),s.addEventListener("click",this.approve),o.addEventListener("click",this.reject);let d=this.theme;if(d){let{IconQuestion:u,IconClose:h}=i(this,Le);u.innerHTML=q("question",d),h.innerHTML=q("close",d)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:r}=i(this,Le);e.removeEventListener("click",i(this,Gr)),r.removeEventListener("click",this.approve)}};Le=new WeakMap,Nr=new WeakMap,Ht=new WeakMap,jr=new WeakMap,Gr=new WeakMap,$r=new WeakMap,Ur=new WeakMap,qr=new WeakMap;window.MapboxAddressConfirmationFeature=uo;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",uo);var Jc=G(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),ke,zr,Wr,Vr,Yr,Xr,ho=class extends V{constructor(){super(...arguments);c(this,ke,void 0);c(this,zr,{});this.update=e=>{let{ModalAddress:r}=i(this,ke);r.innerHTML="",r.appendChild(Un(e))};c(this,Wr,()=>{this.dispatchEvent(new E("result","cancel"))});this.reject=()=>{this.dispatchEvent(new E("result","nochange"))};c(this,Vr,Te());c(this,Yr,Te());c(this,Xr,Te())}get template(){return Jc}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return i(this,zr)}set theme(e){if(p(this,zr,e),!i(this,ke)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:r,IconClose:n}=i(this,ke);r.innerHTML=q("question",e),n.innerHTML=q("close",e)}connectedCallback(){super.connectedCallback(),p(this,ke,te(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:r,IconClose:n,ModalAddress:s,ButtonReject:o}=i(this,ke);e.setAttribute("aria-labelledby",i(this,Yr)),e.setAttribute("aria-describedby",i(this,Xr)),n.setAttribute("aria-controls",i(this,Vr)),e.id=i(this,Vr),r.id=i(this,Yr),s.id=i(this,Xr);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let d of l)d.addEventListener("keydown",Pn);n.addEventListener("click",i(this,Wr)),o.addEventListener("click",this.reject);let a=this.theme;if(a){let{IconQuestion:d,IconClose:u}=i(this,ke);d.innerHTML=q("question",a),u.innerHTML=q("close",a)}}disconnectedCallback(){let{IconClose:e,ButtonReject:r}=i(this,ke);e.removeEventListener("click",i(this,Wr)),r.removeEventListener("click",this.reject)}};ke=new WeakMap,zr=new WeakMap,Wr=new WeakMap,Vr=new WeakMap,Yr=new WeakMap,Xr=new WeakMap;window.MapboxAddressConfirmationNoFeature=ho;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",ho);var tl='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}';var Wn="browser-autofilled",po=[];function td(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:po}})),po=[]}var rd=qs(td,5);function rl(t){t.hasAttribute(Wn)||(t.setAttribute(Wn,""),po.push(t),rd())}function il(t){!t.hasAttribute(Wn)||t.removeAttribute(Wn)}function id(t){t.animationName==="onbrowserautofillstart"?rl(t.target):il(t.target)}function nd(t){let e=t.target;e.nodeName.toLowerCase()!=="select"&&!t.simulated&&!(t instanceof E)&&(t.inputType==="insertReplacementText"||!("data"in t))?rl(e):il(e)}function Vn(){H.detectBrowserAutofillEnabled||(H.detectBrowserAutofillEnabled=!0,Ro(tl),document.addEventListener("animationstart",id,!0),document.addEventListener("input",nd,!0))}var mo=(t,e)=>{if(typeof t=="string")if(t==="ip"){let r=e==null?void 0:e.get("ip-proximity");return r&&typeof r=="string"?r.split(",").map(parseFloat):[999,999]}else return t.split(",").map(Number);else return B.convert(t).toArray()},sd=t=>{let e={};return t.bbox&&(typeof t.bbox=="string"?e.bbox=t.bbox.split(",").map(Number):e.bbox=X.convert(t.bbox).toFlatArray()),t.proximity&&(e.proximity=mo(t.proximity)),t.country&&(e.country=t.country.split(",")),t.language&&(e.language=t.language.split(",")),t.types&&(typeof t.types=="string"?e.types=t.types.split(","):e.types=Array.from(t.types)),t.limit&&(typeof t.limit=="string"?e.limit=parseInt(t.limit):e.limit=t.limit),e},od=(t,e)=>{let r={};return t.bbox&&(typeof t.bbox=="string"?r.bbox=t.bbox.split(",").map(Number):r.bbox=X.convert(t.bbox).toFlatArray()),t.proximity&&(r.proximity=mo(t.proximity,e)),t.country&&(r.country=t.country.split(",")),t.language&&(r.language=t.language.split(",")),t.types&&(typeof t.types=="string"?r.types=t.types.split(","):r.types=Array.from(t.types)),t.limit&&(typeof t.limit=="string"?r.limit=parseInt(t.limit):r.limit=t.limit),typeof t.autocomplete=="boolean"&&(r.autocomplete=t.autocomplete),t.worldview&&(r.worldview=t.worldview),t.permanent&&(r.permanent=t.permanent),r},ad=(t,e)=>{let r={};return t.bbox&&(typeof t.bbox=="string"?r.bbox=t.bbox.split(",").map(Number):r.bbox=X.convert(t.bbox).toFlatArray()),t.proximity&&(r.proximity=mo(t.proximity,e)),t.country&&(r.country=t.country.split(",")),t.language&&(r.language=t.language.split(",")),t.limit&&(typeof t.limit=="string"?r.limit=parseInt(t.limit):r.limit=t.limit),t.streets!==void 0&&t.streets!==null&&(typeof t.streets=="string"?r.streets=t.streets==="true":r.streets=t.streets),r},nl=(t,e,r)=>{switch(e){case 2:return sd(t);case 1:return od(t,r);case 0:return ad(t,r)}},ld=t=>({suggestionIds:t.map(e=>e.mapbox_id||""),suggestionNames:t.map(e=>e.feature_type==="poi"?[e.name,e.full_address].filter(Boolean).join(", "):e.full_address?e.full_address:e.name),suggestionTypes:t.map(e=>e.feature_type||""),suggestionSources:t.map(e=>e._source||"")}),cd=t=>({suggestionIds:t.map(e=>e.properties.mapbox_id||e.id||""),suggestionNames:t.map(e=>e.properties.full_address||""),suggestionTypes:t.map(e=>e.properties.feature_type||""),suggestionSources:t.map(e=>e._source||"")}),dd=t=>({suggestionIds:t.map(e=>e.mapbox_id||""),suggestionNames:t.map(e=>e.full_address||""),suggestionTypes:t.map(e=>{var r;return((r=e.place_type)==null?void 0:r[0])||""}),suggestionSources:t.map(e=>e._source||"")}),sl=(t,e)=>{switch(e){case 2:return ld(t);case 1:return cd(t);case 0:return dd(t)}},fo=(t,e)=>{switch(t){case 2:return"search/searchbox/v1/suggest";case 1:return`search/geocode/v6/${/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/.test(e)?"reverse":"forward"}`;case 0:return"autofill/v1/suggest"}};var Yn,Xn,Je,Kr,Kn,et,Ft,Dt,Nt,jt,Zn,gt,Ce,Qn,Jn,es,Gt,ts,rs,is,ns,ss,os,$t,tt,Ut,Fe=class{constructor(e){c(this,Yn,"https://api.mapbox.com");c(this,Xn,"events/v2");c(this,Je,void 0);c(this,Kr,void 0);c(this,Kn,navigator.language||null);c(this,et,[]);c(this,Ft,"");c(this,Dt,0);c(this,Nt,!0);c(this,jt,1e3);c(this,Zn,100);c(this,gt,void 0);c(this,Ce,void 0);this.start=(e,r,n,s)=>{p(this,Je,r.accessToken);let o=i(this,Gt).call(this,"search.start",{queryString:e,options:r,map:n,responseHeaders:s});!o||i(this,Ut).call(this,o)};this.input=(e,r,n,s,o)=>{if(p(this,Je,n.accessToken),i(this,Nt)&&(this.start(e,n,s,o),p(this,Nt,!1)),!r)return;let l=i(this,Gt).call(this,"search.keystroke",{lastInput:r,queryString:e,options:n,map:s,responseHeaders:o});!l||i(this,Ut).call(this,l)};this.select=(e,r,n,s,o,l)=>{p(this,Je,s.accessToken);let a=i(this,Gt).call(this,"search.select",{queryString:e,selectedIndex:r,suggestions:n,options:s,map:o,responseHeaders:l});!a||a.resultIndex===i(this,Dt)&&a.queryString===i(this,Ft)||a.resultIndex===-1||(p(this,Dt,a.resultIndex),p(this,Ft,a.queryString),i(this,Ut).call(this,a))};this.clear=()=>{p(this,Nt,!0),p(this,Ft,""),p(this,Dt,0),i(this,tt).call(this)};c(this,Qn,e=>{let r=`${i(this,Yn)}/${i(this,Xn)}?access_token=${i(this,Je)}`,n=i(this,Jn).call(this,e);try{fetch(r,n)}catch(s){i(this,es).call(this,s)}});c(this,Jn,e=>(Array.isArray(e)||(e=[e]),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));c(this,es,e=>{console.log(e)});c(this,Gt,(e,r)=>{if(e==="search.select"&&!(typeof r.selectedIndex=="number"||r.suggestions)||e==="search.keystroke"&&!r.lastInput)return null;let n=nl(r.options,i(this,Ce),r.responseHeaders),s=i(this,ts).call(this,e,r,n);return e==="search.keystroke"?i(this,rs).call(this,s,r,n):e==="search.select"&&i(this,is).call(this,s,r,n),i(this,os).call(this,s)?s:null});c(this,ts,(e,r,n)=>{let s={event:e,version:i(this,ss).call(this,e),created:+new Date,sessionIdentifier:r.options.sessionToken,userAgent:i(this,Kr),keyboardLocale:i(this,Kn),queryString:r.queryString};if(n&&(s=f(f({},s),n)),e==="search.start")for(let o of["streets","permanent"])delete s[o];if(r.map){let o=r.map.getZoom()||void 0,l=r.map.getCenter();s=M(f({},s),{mapZoom:o,mapCenterLat:l.lat,mapCenterLng:l.lng})}return s});c(this,rs,(e,r,n)=>{switch(i(this,Ce)){case 0:n.streets&&(e.streets=n.streets);break;case 1:n.permanent&&(e.permanent=n.permanent);break}e.path=fo(i(this,Ce),r.queryString),e.lastAction=r.lastInput});c(this,is,(e,r,n)=>{switch(i(this,Ce)){case 0:n.streets&&(e.streets=n.streets);break;case 1:n.permanent&&(e.permanent=n.permanent);break}e.path=fo(i(this,Ce),r.queryString);let{selectedIndex:s,suggestions:o}=r;if(o&&o.length>0){let l=sl(o,i(this,Ce));e.resultIndex=s,e.resultPlaceName=l.suggestionNames[s],e.resultId=l.suggestionIds[s],e.resultId.startsWith("dXJuOm1ie")&&(e.resultMapboxId=e.resultId),e.suggestionIds=l.suggestionIds,e.suggestionNames=l.suggestionNames,e.suggestionTypes=l.suggestionTypes,e.suggestionSources=l.suggestionSources}});c(this,ns,()=>`mapbox.${ua.split("/")[1]}.${dt}.${navigator.userAgent}`);c(this,ss,e=>["search.keystroke","search.select"].includes(e)?"2.2":"2.0");c(this,os,e=>{if(!e||!e.event)return!1;let r=["event","created","sessionIdentifier","queryString"],n=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],o=e.event;return o==="search.start"?i(this,$t).call(this,e,r):o==="search.keystroke"?i(this,$t).call(this,e,n):o==="search.select"?i(this,$t).call(this,e,s):!0});c(this,$t,(e,r)=>r.every(n=>n==="queryString"?typeof e[n]=="string"&&e[n].length>0:e[n]!==void 0));c(this,tt,()=>{i(this,et).length>0&&i(this,Je)&&(i(this,Qn).call(this,i(this,et)),p(this,et,[])),i(this,gt)&&clearTimeout(i(this,gt)),i(this,jt)&&p(this,gt,setTimeout(i(this,tt),i(this,jt)))});c(this,Ut,(e,r)=>{i(this,et).push(e),(i(this,et).length>=i(this,Zn)||r)&&i(this,tt).call(this)});this.remove=()=>{i(this,tt).call(this)};p(this,Ce,e),p(this,Kr,i(this,ns).call(this)),p(this,gt,setTimeout(i(this,tt),i(this,jt)))}};Yn=new WeakMap,Xn=new WeakMap,Je=new WeakMap,Kr=new WeakMap,Kn=new WeakMap,et=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,jt=new WeakMap,Zn=new WeakMap,gt=new WeakMap,Ce=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,es=new WeakMap,Gt=new WeakMap,ts=new WeakMap,rs=new WeakMap,is=new WeakMap,ns=new WeakMap,ss=new WeakMap,os=new WeakMap,$t=new WeakMap,tt=new WeakMap,Ut=new WeakMap;var De,J,ee,w,vt,Ne,qt,Zr,Qr,zt,Jr,ei,ti,ri,ii,ni,si,as,Wt=class extends V{constructor(){super(...arguments);c(this,De,new vr);c(this,J,new Ye(i(this,De)));c(this,ee,void 0);c(this,w,new ve);c(this,vt,new Fe(0));c(this,Ne,void 0);this.options={};this.confirmOnBrowserAutofill=!1;c(this,qt,!1);c(this,Zr,e=>{let r=(e==null?void 0:e.suggestions)?Fn(e.suggestions):null;i(this,w).handleSuggest(r),this.dispatchEvent(new E("suggest",e))});c(this,Qr,e=>{i(this,w).handleError(),this.dispatchEvent(new E("suggesterror",e))});c(this,zt,e=>{var n;if(this.dispatchEvent(new E("retrieve",e)),this.retrieveFeature=(n=e.features)==null?void 0:n[0],!i(this,ee))return;let r=e;!r||!r.features||!r.features.length||Pr(r.features[0],i(this,ee))});c(this,Jr,()=>{var e;try{let r=(e=this.querySelector("input"))!=null?e:null;p(this,ee,r),i(this,w).input=r}catch(r){p(this,ee,null),i(this,w).input=null,console.error(r.message||r)}});c(this,ei,new MutationObserver(i(this,Jr)));c(this,ti,e=>{i(this,w).blur(),qn(i(this,ee),e,this.confirmOnBrowserAutofill,this.accessToken)});this.retrieveFeature=null;this.interceptSearch=null;c(this,ri,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:r,inputText:n}=e.detail,s=this.browserAutofillEnabled===!0&&(n==null?void 0:n.length)<=2;if(pe(i(this,ee),i(this,Ne),s),!n){i(this,as).call(this);return}let o=this.interceptSearch&&this.interceptSearch(n),l=this.interceptSearch?o:n;if(this.interceptSearch&&!o||(l==null?void 0:l.length)<=2){i(this,w).handleSuggest(null);return}i(this,J).suggest(l,this.options),i(this,vt).input(l,r,M(f({},this.options),{sessionToken:i(this,J).sessionToken,accessToken:this.accessToken}),null,i(this,De).responseHeaders)});c(this,ii,e=>{let{suggestion:r,selectedIndex:n}=e.detail;r.accuracy!=="street"?(pe(i(this,ee),i(this,Ne),!0),i(this,J).retrieve(r,this.options),i(this,vt).select(this.input.value,n,i(this,w).suggestions,M(f({},this.options),{sessionToken:i(this,J).sessionToken,accessToken:this.accessToken}),null,i(this,De).responseHeaders)):Dn(i(this,ee),i(this,Ne),r)});c(this,ni,()=>{pe(i(this,ee),i(this,Ne),!0),i(this,J).abort(),i(this,w).hideResults()});c(this,si,()=>{var r;let e=this.browserAutofillEnabled===!0&&((r=i(this,ee).value)==null?void 0:r.length)<=2;pe(i(this,ee),i(this,Ne),e)});c(this,as,()=>{i(this,w).handleSuggest(null),i(this,vt).clear()})}get accessToken(){return i(this,De).accessToken}set accessToken(e){i(this,De).accessToken=e}get input(){return i(this,ee)}get theme(){return i(this,w).theme}set theme(e){i(this,w).theme=e}get popoverOptions(){return i(this,w).popoverOptions}set popoverOptions(e){i(this,w).popoverOptions=e}get browserAutofillEnabled(){return i(this,qt)}set browserAutofillEnabled(e){p(this,qt,e)}connectedCallback(){var r;super.connectedCallback(),H.autofillSessionEnabled=!0,i(this,J).sessionToken=H.autofillSessionToken.id,i(this,w).autofillHost=this,i(this,w).searchService=0;let e=(r=this.querySelector("input"))!=null?r:null;i(this,ei).observe(this,{subtree:!0,childList:!0}),i(this,Jr).call(this),i(this,w).addEventListener("input",i(this,ri)),i(this,w).addEventListener("select",i(this,ii)),i(this,w).addEventListener("blur",i(this,ni)),i(this,w).addEventListener("focus",i(this,si)),i(this,J).addEventListener("suggest",i(this,Zr)),i(this,J).addEventListener("suggesterror",i(this,Qr)),i(this,J).addEventListener("retrieve",i(this,zt)),document.body.appendChild(i(this,w)),e&&(e.insertAdjacentElement("beforebegin",Ze(i(this,w).dataSeed)),_n(e),p(this,Ne,e.autocomplete)),Vn(),window.addEventListener("browserautofill",i(this,ti))}disconnectedCallback(){i(this,w).remove(),i(this,w).removeEventListener("input",i(this,ri)),i(this,w).removeEventListener("select",i(this,ii)),i(this,w).removeEventListener("blur",i(this,ni)),i(this,w).removeEventListener("focus",i(this,si)),i(this,J).removeEventListener("suggest",i(this,Zr)),i(this,J).removeEventListener("suggesterror",i(this,Qr)),i(this,J).removeEventListener("retrieve",i(this,zt)),i(this,vt).remove(),i(this,ei).disconnect(),window.removeEventListener("browserautofill",i(this,ti))}attributeChangedCallback(e,r,n){if(e==="access-token"){i(this,De).accessToken=n;return}if(e==="browser-autofill-enabled"){p(this,qt,Boolean(n));return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n}focus(){i(this,w).focus()}simulateRetrieve(e){let r=this.input;r&&(r.dataset.mapboxSuccess="true"),i(this,w).hideResults();let n={type:"FeatureCollection",features:[e],url:""};i(this,zt).call(this,n)}};De=new WeakMap,J=new WeakMap,ee=new WeakMap,w=new WeakMap,vt=new WeakMap,Ne=new WeakMap,qt=new WeakMap,Zr=new WeakMap,Qr=new WeakMap,zt=new WeakMap,Jr=new WeakMap,ei=new WeakMap,ti=new WeakMap,ri=new WeakMap,ii=new WeakMap,ni=new WeakMap,si=new WeakMap,as=new WeakMap,Wt.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity","streets"];window.MapboxAddressAutofill=Wt;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",Wt);var ll=un(go());var ud={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},cs={placeholder:ud};var hd=9,al={flyTo:!0},pd=["allowReverse","flipCoordinates"],se,bt,oe,de,be,L,yt,oi,ds,us,md,xt,ai,li,ci,rt,di,ui,Vt,hi,Yt,pi,je,mi,fi,hs,Xt=class extends V{constructor(){super(...arguments);c(this,us);c(this,se,void 0);c(this,bt,new Ns({}));c(this,oe,new Ye(i(this,bt)));c(this,de,null);c(this,be,void 0);c(this,L,new ve);c(this,yt,new Fe(2));this.options={};c(this,oi,f({},al));c(this,ds,()=>{let e=f({},this.componentOptions);for(let r in e)pd.indexOf(r)===-1&&delete e[r];return e});c(this,xt,void 0);c(this,ai,e=>_(this,null,function*(){i(this,je).call(this);let r=null;if(this.componentOptions.customSearch){let n=yield this.componentOptions.customSearch(this.value);n&&n.length&&(n.forEach(s=>{s._source="custom"}),r=n)}e&&e.suggestions&&(r?r=r.concat(e.suggestions):r=e.suggestions),i(this,L).handleSuggest(r||null),i(this,se).SearchBox.contains(document.activeElement)||this.focus(),this.dispatchEvent(new E("suggest",e))}));c(this,li,e=>_(this,null,function*(){if(i(this,je).call(this),this.componentOptions.customSearch){let r=yield this.componentOptions.customSearch(this.value);r&&r.length?(r.forEach(n=>{n._source="custom"}),i(this,L).handleSuggest(r||null)):i(this,L).handleError()}else i(this,L).handleError();this.dispatchEvent(new E("suggesterror",e))}));c(this,ci,e=>{i(this,je).call(this),this.dispatchEvent(new E("retrieve",e));let r=e;if(!r||!r.features.length)return;let n=Ct(r.features[0]);i(this,be).value=n.name;let s=r.features[0];!s||!i(this,de)||(this.componentOptions.flyTo&&i(this,hs).call(this,s),this.marker&&this.mapboxgl&&i(this,ui).call(this,s))});c(this,rt,void 0);c(this,di,()=>{i(this,rt)&&(i(this,rt).remove(),p(this,rt,null))});c(this,ui,e=>{if(!i(this,de)||(i(this,di).call(this),!e))return;let n=f(f({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);p(this,rt,new this.mapboxgl.Marker(n)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&i(this,rt).setLngLat(e.geometry.coordinates).addTo(i(this,de))});this.interceptSearch=null;c(this,Vt,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:r,inputText:n}=e.detail;if(!n){i(this,mi).call(this);return}let s=this.interceptSearch&&this.interceptSearch(n),o=this.interceptSearch?s:n;if(this.interceptSearch&&!s){i(this,L).hideResults();return}i(this,oe).suggest(o,f(f({},this.options),i(this,ds).call(this))),i(this,yt).input(o,r,M(f({},this.options),{sessionToken:i(this,oe).sessionToken,accessToken:this.accessToken}),i(this,de)),i(this,je).call(this,!0)});c(this,hi,e=>{let{suggestion:r,selectedIndex:n}=e.detail;i(this,oe).retrieve(r,this.options),i(this,yt).select(this.value,n,i(this,L).suggestions,M(f({},this.options),{sessionToken:i(this,oe).sessionToken,accessToken:this.accessToken}),i(this,de)),i(this,je).call(this,!0)});c(this,Yt,()=>{});c(this,pi,e=>{i(this,se).SearchBox.contains(e.relatedTarget)||(i(this,Yt).call(this),i(this,L).hideResults(),this.dispatchEvent(new E("blur")))});c(this,je,(e=!1)=>{e?(i(this,se).ClearBtn.style.display="none",i(this,se).LoadingIcon.style.display="block"):(i(this,se).LoadingIcon.style.display="none",i(this,se).ClearBtn.style.display=this.value?"block":"none")});c(this,mi,()=>{this.value="",i(this,je).call(this),i(this,ui).call(this,null),i(this,L).handleSuggest(null),i(this,L).focus(),i(this,yt).clear(),i(this,oe).incrementSession(),this.dispatchEvent(new E("clear"))});this.marker=!0;c(this,fi,()=>{let e=i(this,de),r=f({},this.options);if(e.getZoom()<=hd){delete r.proximity,this.options=r;return}let n=e.getCenter();this.options=M(f({},r),{proximity:n})});c(this,hs,e=>{let r=i(this,de);if(!r)return;let n=e.properties.feature_type,s,o=e.properties.bbox;if(o)s=Sn(r,X.convert(o).toFlatArray());else{let l=e.geometry.coordinates,a=An(n);s={center:l,zoom:a,speed:br}}s=Object.assign(s,this.componentOptions.flyTo),r.flyTo(s)})}get accessToken(){return i(this,bt).accessToken}set accessToken(e){i(this,bt).accessToken=e}get value(){return i(this,be).value}set value(e){i(this,be).value=e||""}get input(){return i(this,be)}get template(){return ta}get templateStyle(){return ne}get templateUserStyle(){return j(".SearchBox",i(this,L).theme)}get componentOptions(){return i(this,oi)}set componentOptions(e){p(this,oi,f(f({},al),e))}get theme(){return i(this,L).theme}set theme(e){if(i(this,L).theme=e,!i(this,se)||!e)return;this.updateTemplateUserStyle(j(".SearchBox",e)),i(this,L).updatePopover();let{SearchIcon:r}=i(this,se);r.innerHTML=q("search",e)}get popoverOptions(){return i(this,L).popoverOptions}set popoverOptions(e){i(this,L).popoverOptions=e}get placeholder(){return i(this,xt)||ze(this,us,md).call(this)}set placeholder(e){p(this,xt,e),i(this,be)&&(i(this,be).placeholder=this.placeholder,i(this,be).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),p(this,se,te(this,{SearchBox:".SearchBox",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=f({},this.theme);let{Input:e,ClearBtn:r,SearchBox:n}=i(this,se);n.addEventListener("focusout",i(this,pi)),p(this,be,e),i(this,L).input=e,i(this,L).searchService=2,i(this,L).addEventListener("input",i(this,Vt)),i(this,L).addEventListener("select",i(this,hi)),i(this,L).addEventListener("blur",i(this,Yt)),i(this,oe).addEventListener("suggest",i(this,ai)),i(this,oe).addEventListener("suggesterror",i(this,li)),i(this,oe).addEventListener("retrieve",i(this,ci)),r.addEventListener("click",i(this,mi)),this.placeholder=i(this,xt),this.parentElement.appendChild(i(this,L)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Ze(i(this,L).dataSeed)))}disconnectedCallback(){let{SearchBox:e}=i(this,se);e.removeEventListener("focusout",i(this,pi)),i(this,L).remove(),i(this,L).input=null,i(this,L).removeEventListener("input",i(this,Vt)),i(this,L).removeEventListener("select",i(this,hi)),i(this,L).removeEventListener("blur",i(this,Yt)),i(this,oe).removeEventListener("suggest",i(this,ai)),i(this,oe).removeEventListener("suggesterror",i(this,li)),i(this,oe).removeEventListener("retrieve",i(this,ci)),i(this,yt).remove()}attributeChangedCallback(e,r,n){if(e==="access-token"){i(this,bt).accessToken=n;return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}if(e==="placeholder"){this.placeholder=n;return}if(e==="allow-reverse"){this.componentOptions.allowReverse=n==="true";return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=n==="true";return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n,s==="language"&&(this.placeholder=i(this,xt))}focus(){i(this,L).focus()}search(e){this.value=e;let r={lastInput:e,inputText:e};i(this,Vt).call(this,new E("input",r))}bindMap(e){i(this,de)&&i(this,de).off("moveend",i(this,fi)),e&&e.on("moveend",i(this,fi)),p(this,de,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let r=document.createElement("div");return r.className="mapboxgl-ctrl",r.style.width="300px",r.appendChild(this),r}onRemove(){this.remove(),this.unbindMap(),i(this,di).call(this)}getDefaultPosition(){return"top-right"}};se=new WeakMap,bt=new WeakMap,oe=new WeakMap,de=new WeakMap,be=new WeakMap,L=new WeakMap,yt=new WeakMap,oi=new WeakMap,ds=new WeakMap,us=new WeakSet,md=function(){if(this.options.language){let e=this.options.language.split(",")[0],r=ll.default.language(e),n=cs.placeholder[r];if(n)return n}return"Search"},xt=new WeakMap,ai=new WeakMap,li=new WeakMap,ci=new WeakMap,rt=new WeakMap,di=new WeakMap,ui=new WeakMap,Vt=new WeakMap,hi=new WeakMap,Yt=new WeakMap,pi=new WeakMap,je=new WeakMap,mi=new WeakMap,fi=new WeakMap,hs=new WeakMap,Xt.observedAttributes=["access-token","theme","popover-options","placeholder","allow-reverse","flip-coordinates","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=Xt;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",Xt);var dl=un(go());var fd=9,cl={flyTo:!0},gd=["flipCoordinates"],ae,Ge,le,ue,ye,k,Et,gi,ps,ms,vd,St,vi,bi,yi,it,xi,Ei,Kt,Si,Zt,Ai,$e,Ti,Mi,fs,Qt=class extends V{constructor(){super(...arguments);c(this,ms);c(this,ae,void 0);c(this,Ge,new Xo({}));c(this,le,new Ye(i(this,Ge)));c(this,ue,null);c(this,ye,void 0);c(this,k,new ve);c(this,Et,new Fe(1));this.options={};c(this,gi,f({},cl));c(this,ps,()=>{let e=f({},this.componentOptions);for(let r in e)gd.indexOf(r)===-1&&delete e[r];return e});c(this,St,void 0);c(this,vi,e=>_(this,null,function*(){i(this,$e).call(this);let r=null;if(this.componentOptions.customSearch){let n=yield this.componentOptions.customSearch(this.value);n&&n.length&&(n.forEach(s=>{s._source="custom"}),r=n)}e&&e.features&&(r?r=r.concat(e.features):r=e.features),i(this,k).handleSuggest(r||null),i(this,ae).Geocoder.contains(document.activeElement)||this.focus(),this.dispatchEvent(new E("suggest",e))}));c(this,bi,e=>_(this,null,function*(){if(i(this,$e).call(this),this.componentOptions.customSearch){let r=yield this.componentOptions.customSearch(this.value);r&&r.length?(r.forEach(n=>{n._source="custom"}),i(this,k).handleSuggest(r||null)):i(this,k).handleError()}else i(this,k).handleError();this.dispatchEvent(new E("suggesterror",e))}));c(this,yi,e=>{i(this,$e).call(this),this.dispatchEvent(new E("retrieve",e));let r=e;!r||(i(this,ye).value=r.properties.full_address,!i(this,ue))||(this.componentOptions.flyTo&&i(this,fs).call(this,r),this.marker&&this.mapboxgl&&i(this,Ei).call(this,r))});c(this,it,void 0);c(this,xi,()=>{i(this,it)&&(i(this,it).remove(),p(this,it,null))});c(this,Ei,e=>{if(!i(this,ue)||(i(this,xi).call(this),!e))return;let n=f(f({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);p(this,it,new this.mapboxgl.Marker(n)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&i(this,it).setLngLat(e.geometry.coordinates).addTo(i(this,ue))});this.interceptSearch=null;c(this,Kt,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:r,inputText:n}=e.detail;if(!n){i(this,Ti).call(this);return}let s=this.interceptSearch&&this.interceptSearch(n),o=this.interceptSearch?s:n;if(this.interceptSearch&&!s){i(this,k).hideResults();return}i(this,le).suggest(o,f(f({},this.options),i(this,ps).call(this))),i(this,Et).input(o,r,M(f({},this.options),{sessionToken:i(this,le).sessionToken,accessToken:this.accessToken}),i(this,ue),i(this,Ge).responseHeaders),i(this,$e).call(this,!0)});c(this,Si,e=>{let{suggestion:r,selectedIndex:n}=e.detail;i(this,le).retrieve(r,this.options),i(this,Et).select(this.value,n,i(this,k).suggestions,M(f({},this.options),{sessionToken:i(this,le).sessionToken,accessToken:this.accessToken}),i(this,ue),i(this,Ge).responseHeaders),i(this,$e).call(this,!0)});c(this,Zt,()=>{});c(this,Ai,e=>{i(this,ae).Geocoder.contains(e.relatedTarget)||(i(this,Zt).call(this),i(this,k).hideResults(),this.dispatchEvent(new E("blur")))});c(this,$e,(e=!1)=>{e?(i(this,ae).ClearBtn.style.display="none",i(this,ae).LoadingIcon.style.display="block"):(i(this,ae).LoadingIcon.style.display="none",i(this,ae).ClearBtn.style.display=this.value?"block":"none")});c(this,Ti,()=>{this.value="",i(this,$e).call(this),i(this,Ei).call(this,null),i(this,k).handleSuggest(null),i(this,k).focus(),i(this,Et).clear(),i(this,le).incrementSession(),this.dispatchEvent(new E("clear"))});this.marker=!0;c(this,Mi,()=>{let e=i(this,ue),r=f({},this.options);if(e.getZoom()<=fd){delete r.proximity,this.options=r;return}let n=e.getCenter();this.options=M(f({},r),{proximity:n})});c(this,fs,e=>{let r=i(this,ue);if(!r)return;let n=e.properties.feature_type,s,o=e.properties.bbox;if(o)s=Sn(r,X.convert(o).toFlatArray());else{let l=e.geometry.coordinates,a=An(n);s={center:l,zoom:a,speed:br}}s=Object.assign(s,this.componentOptions.flyTo),r.flyTo(s)})}get accessToken(){return i(this,Ge).accessToken}set accessToken(e){i(this,Ge).accessToken=e}get value(){return i(this,ye).value}set value(e){i(this,ye).value=e||""}get input(){return i(this,ye)}get template(){return ra}get templateStyle(){return ne}get templateUserStyle(){return j(".Geocoder",i(this,k).theme)}get componentOptions(){return i(this,gi)}set componentOptions(e){p(this,gi,f(f({},cl),e))}get theme(){return i(this,k).theme}set theme(e){if(i(this,k).theme=e,!i(this,ae)||!e)return;this.updateTemplateUserStyle(j(".Geocoder",e)),i(this,k).updatePopover();let{SearchIcon:r}=i(this,ae);r.innerHTML=q("search",e)}get popoverOptions(){return i(this,k).popoverOptions}set popoverOptions(e){i(this,k).popoverOptions=e}get placeholder(){return i(this,St)||ze(this,ms,vd).call(this)}set placeholder(e){p(this,St,e),i(this,ye)&&(i(this,ye).placeholder=this.placeholder,i(this,ye).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),p(this,ae,te(this,{Geocoder:".Geocoder",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=f({},this.theme);let{Input:e,ClearBtn:r,Geocoder:n}=i(this,ae);n.addEventListener("focusout",i(this,Ai)),p(this,ye,e),i(this,k).input=e,i(this,k).searchService=1,i(this,k).addEventListener("input",i(this,Kt)),i(this,k).addEventListener("select",i(this,Si)),i(this,k).addEventListener("blur",i(this,Zt)),i(this,le).addEventListener("suggest",i(this,vi)),i(this,le).addEventListener("suggesterror",i(this,bi)),i(this,le).addEventListener("retrieve",i(this,yi)),r.addEventListener("click",i(this,Ti)),this.placeholder=i(this,St),this.parentElement.appendChild(i(this,k)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Ze(i(this,k).dataSeed)))}disconnectedCallback(){let{Geocoder:e}=i(this,ae);e.removeEventListener("focusout",i(this,Ai)),i(this,k).remove(),i(this,k).input=null,i(this,k).removeEventListener("input",i(this,Kt)),i(this,k).removeEventListener("select",i(this,Si)),i(this,k).removeEventListener("blur",i(this,Zt)),i(this,le).removeEventListener("suggest",i(this,vi)),i(this,le).removeEventListener("suggesterror",i(this,bi)),i(this,le).removeEventListener("retrieve",i(this,yi)),i(this,Et).remove()}attributeChangedCallback(e,r,n){if(e==="access-token"){i(this,Ge).accessToken=n;return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}if(e==="placeholder"){this.placeholder=n;return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=n==="true";return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n,s==="language"&&(this.placeholder=i(this,St))}focus(){i(this,k).focus()}search(e){this.value=e;let r={lastInput:e,inputText:e};i(this,Kt).call(this,new E("input",r))}bindMap(e){i(this,ue)&&i(this,ue).off("moveend",i(this,Mi)),e&&e.on("moveend",i(this,Mi)),p(this,ue,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let r=document.createElement("div");return r.className="mapboxgl-ctrl",r.style.width="300px",r.appendChild(this),r}onRemove(){this.remove(),this.unbindMap(),i(this,xi).call(this)}getDefaultPosition(){return"top-right"}};ae=new WeakMap,Ge=new WeakMap,le=new WeakMap,ue=new WeakMap,ye=new WeakMap,k=new WeakMap,Et=new WeakMap,gi=new WeakMap,ps=new WeakMap,ms=new WeakSet,vd=function(){if(this.options.language){let e=this.options.language.split(",")[0],r=dl.default.language(e),n=cs.placeholder[r];if(n)return n}return"Search"},St=new WeakMap,vi=new WeakMap,bi=new WeakMap,yi=new WeakMap,it=new WeakMap,xi=new WeakMap,Ei=new WeakMap,Kt=new WeakMap,Si=new WeakMap,Zt=new WeakMap,Ai=new WeakMap,$e=new WeakMap,Ti=new WeakMap,Mi=new WeakMap,fs=new WeakMap,Qt.observedAttributes=["access-token","theme","popover-options","placeholder","flip-coordinates","autocomplete","language","country","bbox","limit","proximity","types","worldview","permanent"];window.MapboxGeocoder=Qt;window.customElements.get("mapbox-geocoder")||customElements.define("mapbox-geocoder",Qt);var ml=un(ul());var hl=new ml.default({size:512,antimeridian:!0}),Mt=1280;function pl(t,e){let{width:r,height:n}=hn(t,!0);switch(e){case"center":return[0,0];case"top":return[0,n/2];case"bottom":return[0,-1*n/2];case"left":return[r/2,0];case"right":return[-1*r/2,0];case"top-left":return[r/2,n/2];case"top-right":return[-1*r/2,n/2];case"bottom-left":return[r/2,-1*n/2];case"bottom-right":return[-1*r/2,-1*n/2]}}var wi,gs,At,Li,ki,vs,Ci,Ii,bs,Oi,Ri,Tt,ys,Pi,yo=class{constructor(e,r,n,s,o,l){c(this,wi,void 0);c(this,gs,()=>{[this.anchorOffsetX,this.anchorOffsetY]=pl(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});c(this,At,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0});c(this,Li,!1);c(this,ki,void 0);c(this,vs,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),i(this,Tt).call(this,e),window.addEventListener("pointermove",i(this,Ii)),window.addEventListener("pointerup",i(this,Ci)))});c(this,Ci,()=>{window.removeEventListener("pointermove",i(this,Ii)),window.removeEventListener("pointerup",i(this,Ci))});c(this,Ii,e=>{e.preventDefault(),e.stopPropagation();let r=this.curPointerXPos-e.pageX,n=this.curPointerYPos-e.pageY;this.markerDeltaX+=r,this.markerDeltaY-=n,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let s=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],o=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-s,a=this.markerDeltaY+o;this.markerTransform={globalX:l,globalY:a},i(this,Tt).call(this,e)});c(this,bs,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),i(this,Tt).call(this,e),window.addEventListener("pointermove",i(this,Ri)),window.addEventListener("pointerup",i(this,Oi)))});c(this,Oi,()=>{window.removeEventListener("pointermove",i(this,Ri)),window.removeEventListener("pointerup",i(this,Oi))});c(this,Ri,e=>{e.preventDefault();let r=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));r=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,r),0);let n=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));n=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,n),0),this.imgContainerElement.scrollTop=r,this.imgContainerElement.scrollLeft=n;let s=Math.round(n-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),o=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-r);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+s,this.imgCenterPx[1]-o],!this.keepMarkerCentered){let l=this.markerDeltaX+s,a=this.markerDeltaY+o;this.markerTransform={globalX:l,globalY:a}}i(this,Pi).call(this,n,r),i(this,Tt).call(this,e)});c(this,Tt,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});c(this,ys,()=>{let{anchorX:e,anchorY:r,globalX:n,globalY:s,correctionX:o,correctionY:l}=i(this,At),a=e-n+o,d=r+s+l;this.markerElement.style.transform=`translate(calc(-50% + ${a}px), calc(-50% + ${d}px))`});this.reCenter=()=>{let e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,r=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=r,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}};this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let e=this.imgCenterOffset.x,r=this.imgCenterOffset.y,n=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,s=this.imgElement.height/2-r-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=n,this.imgContainerElement.scrollTop=s,i(this,Pi).call(this,n,s)};c(this,Pi,(e,r)=>{let n=this.imgCenterOffset.x,s=this.imgCenterOffset.y,{correctionX:o,correctionY:l}=this.markerTransform,a={};if(e/2<n*-1){let d=n*-1-e/2;a.correctionX=d*2}else e<0?a.correctionX=e:o!==0&&(a.correctionX=0);if(r/2<s*-1){let d=s*-1-r/2;a.correctionY=d*2}else r<0?a.correctionY=r:l!==0&&(a.correctionY=0);this.markerTransform=a});this.markerElement=n,this.imgContainerElement=e,this.imgElement=r,this.keepMarkerCentered=s,this.zoom=o,this.anchor=l,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",i(this,bs)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",i(this,vs)),new ResizeObserver(i(this,gs)).observe(this.markerElement)}get anchor(){return i(this,wi)}set anchor(e){p(this,wi,e),[this.anchorOffsetX,this.anchorOffsetY]=pl(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return i(this,At)}set markerTransform(e){p(this,At,f(f({},i(this,At)),e)),i(this,ys).call(this)}get isActive(){return i(this,Li)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",p(this,Li,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(at(e,this.imgCenterPx))return i(this,ki);{let r=hl.ll(e,this.zoom);return[Ws(r[0],6),Ws(r[1],6)]}}set coordinate(e){p(this,ki,e),this.imgCenterPx=this.imgCenterAdjustedPx=hl.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};wi=new WeakMap,gs=new WeakMap,At=new WeakMap,Li=new WeakMap,ki=new WeakMap,vs=new WeakMap,Ci=new WeakMap,Ii=new WeakMap,bs=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,Tt=new WeakMap,ys=new WeakMap,Pi=new WeakMap;var fl='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>';var gl=16,xd=G(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${fl}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),Ed=G(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),Sd=G(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),xo="Adjust pin",Eo="Save",So="Cancel",Ad=G(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">${xo}</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${Eo}</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">${So}</div>
  </div>
</template>
`),_i,wt,Jt,Ie,nt,xe,Ee,R,$,Bi,Hi,Fi,Lt,Di,Ni,ji,Gi,$i,Ui,er,qi,zi,Wi,Vi,xs,Es,Yi,tr,rr,Xi,Ki,Ss,Zi,As,ir=class extends V{constructor(){super(...arguments);c(this,_i,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";c(this,wt,!1);c(this,Jt,!1);c(this,Ie,void 0);c(this,nt,"");c(this,xe,void 0);c(this,Ee,void 0);c(this,R,void 0);c(this,$,void 0);c(this,Bi,void 0);c(this,Hi,{});c(this,Fi,!1);c(this,Lt,"default");c(this,Di,void 0);c(this,Ni,void 0);c(this,ji,void 0);c(this,Gi,["mapbox","streets-v11"]);c(this,$i,void 0);c(this,Ui,void 0);c(this,er,()=>{let{ImageContainer:e,ButtonAdjust:r,ButtonSave:n,ButtonCancel:s}=i(this,R);i(this,wt)?(e.classList.add(`${this.dataset.seed}--draggable`),i(this,$).isActive=!0,r.setAttribute("aria-hidden","true"),n.removeAttribute("aria-hidden"),s.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),i(this,$).isActive=!1,r.removeAttribute("aria-hidden"),n.setAttribute("aria-hidden","true"),s.setAttribute("aria-hidden","true"))});c(this,qi,()=>{p(this,wt,!0),i(this,er).call(this)});c(this,zi,()=>{if(this.feature.properties.full_address&&!at(this.feature.geometry.coordinates,i(this,$).coordinate)){let[e,r]=i(this,$).coordinate;zn(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:r}},labels:["address_minimap"]})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(i(this,$).coordinate),p(this,wt,!1),i(this,er).call(this)});c(this,Wi,()=>{i(this,$).reCenter(),p(this,wt,!1),i(this,er).call(this)});c(this,Vi,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});c(this,xs,()=>{i(this,Jt)||i(this,$).reCenter(),p(this,Jt,!0),i(this,$)&&i(this,$).handleMinimapResize()});c(this,Es,()=>{p(this,Jt,!1)});c(this,Yi,e=>{if(i(this,xe)===0||i(this,Ee)===0)return"";let[r,n]=this.defaultMapStyle,s=Tn(r,n),o=this.mapStyleMode==="default"?s:Ko,l=Zo+H.autofillSessionToken.toString(),a=o+B.convert(e).toArray().join(",")+","+gl+",0/"+Math.min(i(this,xe)*2,Mt)+"x"+Math.min(i(this,Ee)*2,Mt)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return H.autofillSessionEnabled&&(a+=`&sku=${l}`),a});c(this,tr,()=>{if(i(this,Ie)){let e=i(this,Ie).geometry.coordinates;p(this,nt,i(this,Yi).call(this,e));let{Image:r}=i(this,R);r.src=i(this,nt)}});c(this,rr,e=>`url("${ha(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);c(this,Xi,()=>{let{MapboxAddressMinimap:e,ImageContainer:r,Image:n}=i(this,R),{width:s,height:o}=hn(this.container),[l,a]=[i(this,xe),i(this,Ee)];p(this,xe,Math.min(s,Mt)),p(this,Ee,Math.min(o,Mt)),e.style.setProperty("width",`${i(this,xe)}px`),e.style.setProperty("height",`${i(this,Ee)}px`),r.style.setProperty("height",`${i(this,Ee)}px`),r.style.setProperty("width",`${i(this,xe)}px`);let[d,u]=[n.width,n.height];i(this,xe)>l&&i(this,xe)>d/2&&d<Mt||i(this,Ee)>a&&i(this,Ee)>u/2&&u<Mt?i(this,tr).call(this):i(this,$)&&i(this,$).handleMinimapResize()});c(this,Ki,()=>{if(this.querySelector(".MinimapFooter"))return;let r=this.prepareTemplate(Sd),n=this.querySelector(".MapboxAddressMinimap");if(!n||(n.appendChild(r),this.querySelector(".MinimapEditButtons")))return;let o=this.prepareTemplate(Ad);this.querySelector(".MinimapInnerFrame").appendChild(o),p(this,R,M(f({},i(this,R)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:a,ButtonSave:d,ButtonCancel:u}=i(this,R);a.addEventListener("click",i(this,qi)),d.addEventListener("click",i(this,zi)),u.addEventListener("click",i(this,Wi))});c(this,Ss,()=>{if(!i(this,R))return;let{EditButtons:e,ButtonAdjust:r,ButtonSave:n,ButtonCancel:s}=i(this,R),o=this.querySelector(".MinimapFooter");o==null||o.remove(),e==null||e.remove(),r&&(r.remove(),r.removeEventListener("click",i(this,qi))),n&&(n.remove(),n.removeEventListener("click",i(this,zi))),s&&(s.remove(),s.removeEventListener("click",i(this,Wi))),delete i(this,R).EditButtons,delete i(this,R).ButtonAdjust,delete i(this,R).ButtonSave,delete i(this,R).ButtonCancel});c(this,Zi,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let r=this.prepareTemplate(Ed),n=this.querySelector(".MinimapInnerFrame");!n||(n.appendChild(r),i(this,R).MapStyleToggle=r,r.addEventListener("click",i(this,Vi)),r.style.backgroundImage=i(this,rr).call(this,this.mapStyleMode==="default"?"satellite":"default"),r.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});c(this,As,()=>{if(!i(this,R))return;let{MapStyleToggle:e}=i(this,R);!e||(e.remove(),e.removeEventListener("click",i(this,Vi)),delete i(this,R).MapStyleToggle)})}get canAdjustMarker(){return i(this,_i)}set canAdjustMarker(e){p(this,_i,e),e?i(this,Ki).call(this):i(this,Ss).call(this)}get accessToken(){return i(this,Bi)||H.accessToken}set accessToken(e){p(this,Bi,e)}get feature(){return i(this,Ie)}set feature(e){p(this,Ie,e),e?this.show():this.hide()}get template(){return xd}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return i(this,Fi)}set satelliteToggle(e){p(this,Fi,e),e?i(this,Zi).call(this):i(this,As).call(this)}get theme(){return i(this,Hi)}set theme(e){if(p(this,Hi,e),!i(this,R)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressMinimap",e));let{Marker:r,MapStyleToggle:n}=i(this,R);r.innerHTML=q("marker",e),n&&(n.style.backgroundImage=i(this,rr).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get adjustBtnText(){return i(this,Di)||xo}set adjustBtnText(e){p(this,Di,e);let r=this.querySelector(".MinimapButtonAdjust");r.textContent=e||xo}get saveBtnText(){return i(this,Ni)||Eo}set saveBtnText(e){p(this,Ni,e);let r=this.querySelector(".MinimapButtonSave");r.textContent=e||Eo}get cancelBtnText(){return i(this,ji)||So}set cancelBtnText(e){p(this,ji,e);let r=this.querySelector(".MinimapButtonCancel");r.textContent=e||So}get mapStyleMode(){return i(this,Lt)}set mapStyleMode(e){let r=i(this,Lt);if(r===e||(p(this,Lt,e),!i(this,R)))return;let{MapStyleToggle:n}=i(this,R);!n||(n.style.backgroundImage=i(this,rr).call(this,r),n.setAttribute("title",`Switch to ${r==="satellite"?"Satellite":"Default"}`),i(this,tr).call(this))}get defaultMapStyle(){return i(this,Gi)}set defaultMapStyle(e){p(this,Gi,e),i(this,tr).call(this)}get footer(){return i(this,$i)}set footer(e){p(this,$i,e);let r=this.querySelector(".MinimapFooter");r&&(typeof e=="string"?(r.textContent=e,r.removeAttribute("aria-hidden")):e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true"))}get container(){return i(this,Ui)}set container(e){e&&(e.style.position="relative",p(this,Ui,e))}show(){if(!i(this,Ie))return;let e=i(this,Ie).geometry.coordinates;i(this,$).coordinate=e,p(this,nt,i(this,Yi).call(this,e));let{MapboxAddressMinimap:r,Image:n}=i(this,R);n.src=i(this,nt),r.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=i(this,R);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),p(this,R,te(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=i(this,Lt),this.theme=f({},this.theme),this.canAdjustMarker&&i(this,Ki).call(this),this.satelliteToggle&&i(this,Zi).call(this),this.container=this.parentElement,new ResizeObserver(i(this,Xi)).observe(this.container),i(this,Xi).call(this);let{MapboxAddressMinimap:r,ImageContainer:n,Image:s,Marker:o}=i(this,R);p(this,$,new yo(n,s,o,this.keepMarkerCentered,gl,this.markerAnchor)),i(this,$).reCenter(),s.onload=i(this,xs),s.onerror=i(this,Es),s.src=i(this,nt),i(this,Ie)?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true")}attributeChangedCallback(e,r,n){if(e==="access-token")this.accessToken=n;else if(e==="can-adjust-marker")this.canAdjustMarker=n==="true";else if(e==="keep-marker-centered")this.keepMarkerCentered=n==="true";else if(e==="marker-anchor"){let s=n;this.markerAnchor=s,i(this,$)&&(i(this,$).anchor=s)}else e==="satellite-toggle"&&(this.satelliteToggle=n==="true")}};_i=new WeakMap,wt=new WeakMap,Jt=new WeakMap,Ie=new WeakMap,nt=new WeakMap,xe=new WeakMap,Ee=new WeakMap,R=new WeakMap,$=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,Fi=new WeakMap,Lt=new WeakMap,Di=new WeakMap,Ni=new WeakMap,ji=new WeakMap,Gi=new WeakMap,$i=new WeakMap,Ui=new WeakMap,er=new WeakMap,qi=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Vi=new WeakMap,xs=new WeakMap,Es=new WeakMap,Yi=new WeakMap,tr=new WeakMap,rr=new WeakMap,Xi=new WeakMap,Ki=new WeakMap,Ss=new WeakMap,Zi=new WeakMap,As=new WeakMap,ir.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=ir;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",ir);var z,Se,Z,nr,sr,Ue,Qi,Ji,en,tn,Ts,rn,nn,or,vl=class{constructor(e,r,n){c(this,z,void 0);c(this,Se,void 0);c(this,Z,void 0);c(this,nr,void 0);this.options={};this.retrieveFeature=null;this.listbox=new ve;c(this,sr,new Fe(0));c(this,Ue,void 0);c(this,Qi,e=>{let{lastInput:r,inputText:n}=e.detail,s=i(this,Se).browserAutofillEnabled===!0&&(n==null?void 0:n.length)<=2;if(pe(i(this,z),i(this,Ue),s),!n){i(this,Ts).call(this);return}if((n==null?void 0:n.length)<=2){this.listbox.handleSuggest(null);return}i(this,Z).suggest(n,this.options),i(this,sr).input(n,r,M(f({},this.options),{sessionToken:i(this,Z).sessionToken,accessToken:i(this,Se).accessToken}),null,i(this,nr).responseHeaders)});c(this,Ji,e=>{let{suggestion:r,selectedIndex:n}=e.detail;r.accuracy!=="street"?(pe(i(this,z),i(this,Ue),!0),i(this,Z).retrieve(r,this.options),i(this,sr).select(this.input.value,n,this.listbox.suggestions,M(f({},this.options),{sessionToken:i(this,Z).sessionToken,accessToken:i(this,Se).accessToken}),null,i(this,nr).responseHeaders)):Dn(i(this,z),i(this,Ue),r)});c(this,en,()=>{pe(i(this,z),i(this,Ue),!0),i(this,Z).abort(),this.listbox.hideResults()});c(this,tn,()=>{var r;let e=i(this,Se).browserAutofillEnabled===!0&&((r=i(this,z).value)==null?void 0:r.length)<=2;pe(i(this,z),i(this,Ue),e)});c(this,Ts,()=>{this.listbox.handleSuggest(null),i(this,sr).clear()});c(this,rn,e=>{let r=(e==null?void 0:e.suggestions)?Fn(e.suggestions):null;this.listbox.handleSuggest(r);let n=new E("suggest",e);Object.defineProperty(n,"target",{value:i(this,z)}),i(this,Se).fire("suggest",n)});c(this,nn,e=>{this.listbox.handleError();let r=new E("suggesterror",e);Object.defineProperty(r,"target",{value:i(this,z)}),i(this,Se).fire("suggesterror",r)});c(this,or,e=>{var s;let r=new E("retrieve",e);if(Object.defineProperty(r,"target",{value:i(this,z)}),i(this,Se).fire("retrieve",r),this.retrieveFeature=(s=e.features)==null?void 0:s[0],!i(this,z))return;let n=e;!n||!n.features||!n.features.length||Pr(n.features[0],i(this,z))});p(this,z,r),p(this,Se,e),p(this,Z,new Ye(n)),i(this,Z).sessionToken=H.autofillSessionToken.id,p(this,nr,n),this.listbox.input=i(this,z),this.listbox.autofillHost=this,this.listbox.searchService=0,this.listbox.addEventListener("input",i(this,Qi)),this.listbox.addEventListener("select",i(this,Ji)),this.listbox.addEventListener("blur",i(this,en)),this.listbox.addEventListener("focus",i(this,tn)),i(this,Z).addEventListener("suggest",i(this,rn)),i(this,Z).addEventListener("suggesterror",i(this,nn)),i(this,Z).addEventListener("retrieve",i(this,or)),document.body.appendChild(this.listbox),r&&(r.insertAdjacentElement("beforebegin",Ze(this.listbox.dataSeed)),_n(r),p(this,Ue,r.autocomplete))}get input(){return i(this,z)}remove(){this.listbox.remove(),this.listbox.removeEventListener("input",i(this,Qi)),this.listbox.removeEventListener("select",i(this,Ji)),this.listbox.removeEventListener("blur",i(this,en)),this.listbox.removeEventListener("focus",i(this,tn)),i(this,Z).removeEventListener("suggest",i(this,rn)),i(this,Z).removeEventListener("suggesterror",i(this,nn)),i(this,Z).removeEventListener("retrieve",i(this,or))}simulateRetrieve(e){let r=i(this,z);r&&(r.dataset.mapboxSuccess="true"),this.listbox.hideResults();let n={type:"FeatureCollection",features:[e],url:""};i(this,or).call(this,n)}};z=new WeakMap,Se=new WeakMap,Z=new WeakMap,nr=new WeakMap,sr=new WeakMap,Ue=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,en=new WeakMap,tn=new WeakMap,Ts=new WeakMap,rn=new WeakMap,nn=new WeakMap,or=new WeakMap;var ar,lr,cr,sn,on,an,ln,cn,bl=class extends Us{constructor({accessToken:e,options:r,theme:n,popoverOptions:s,confirmOnBrowserAutofill:o,browserAutofillEnabled:l}){super();this.instances=[];c(this,ar,void 0);c(this,lr,new vr);c(this,cr,void 0);c(this,sn,void 0);c(this,on,void 0);this.confirmOnBrowserAutofill=!1;this.browserAutofillEnabled=!1;c(this,an,()=>{at(Or(),i(this,ar))||this.update()});c(this,ln,new MutationObserver(i(this,an)));c(this,cn,e=>_(this,null,function*(){this.instances.forEach(r=>r.listbox.blur());for(let r of this.instances){let n=r.listbox.input;yield qn(n,e,this.confirmOnBrowserAutofill,this.accessToken)}}));Vn(),window.addEventListener("browserautofill",i(this,cn)),H.autofillSessionEnabled=!0,this.accessToken=e||H.accessToken,r&&(this.options=r),n&&(this.theme=n),s&&(this.popoverOptions=s),o&&(this.confirmOnBrowserAutofill=o),l&&(this.browserAutofillEnabled=l),this.update()}get accessToken(){return i(this,lr).accessToken}set accessToken(e){i(this,lr).accessToken=e}get options(){return i(this,cr)}set options(e){p(this,cr,f(f({},i(this,cr)),e)),this.instances.forEach(r=>{r.options=f(f({},r.options),e)})}get theme(){return i(this,sn)}set theme(e){p(this,sn,e),this.instances.forEach(r=>{r.listbox.theme=e})}get popoverOptions(){return i(this,on)}set popoverOptions(e){p(this,on,e),this.instances.forEach(r=>{r.listbox.popoverOptions=e})}update(){this.instances.forEach(e=>{e.remove()}),p(this,ar,Or()),this.instances=[],i(this,ar).forEach(e=>{let r=new vl(this,e,i(this,lr));r.options=this.options,r.listbox.theme=this.theme,r.listbox.popoverOptions=this.popoverOptions,this.instances.push(r)})}observe(){i(this,ln).observe(document,{subtree:!0,childList:!0}),i(this,an).call(this)}unobserve(){i(this,ln).disconnect()}remove(){this.instances.forEach(e=>{e.remove()}),this.unobserve(),window.removeEventListener("browserautofill",i(this,cn))}};ar=new WeakMap,lr=new WeakMap,cr=new WeakMap,sn=new WeakMap,on=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap;function yl(t){return new bl(t)}return kl(Td);})();
/*!
* focus-trap 6.7.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
//# sourceMappingURL=mapboxsearch.js.map
