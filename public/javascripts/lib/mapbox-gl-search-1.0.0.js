var mapboxsearch=(()=>{var il=Object.create;var ur=Object.defineProperty,nl=Object.defineProperties,sl=Object.getOwnPropertyDescriptor,ol=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertyNames,on=Object.getOwnPropertySymbols,ll=Object.getPrototypeOf,bs=Object.prototype.hasOwnProperty,mo=Object.prototype.propertyIsEnumerable;var po=(t,e,r)=>e in t?ur(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g=(t,e)=>{for(var r in e||(e={}))bs.call(e,r)&&po(t,r,e[r]);if(on)for(var r of on(e))mo.call(e,r)&&po(t,r,e[r]);return t},M=(t,e)=>nl(t,ol(e)),fo=t=>ur(t,"__esModule",{value:!0});var go=(t,e)=>{var r={};for(var n in t)bs.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&on)for(var n of on(t))e.indexOf(n)<0&&mo.call(t,n)&&(r[n]=t[n]);return r};var ys=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),cl=(t,e)=>{for(var r in e)ur(t,r,{get:e[r],enumerable:!0})},vo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of al(e))!bs.call(t,s)&&(r||s!=="default")&&ur(t,s,{get:()=>e[s],enumerable:!(n=sl(e,s))||n.enumerable});return t},an=(t,e)=>vo(fo(ur(t!=null?il(ll(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),dl=(t=>(e,r)=>t&&t.get(e)||(r=vo(fo({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var xs=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var i=(t,e,r)=>(xs(t,e,"read from private field"),r?r.call(t):e.get(t)),d=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},h=(t,e,r,n)=>(xs(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var qe=(t,e,r)=>(xs(t,e,"access private method"),r);var j=(t,e,r)=>new Promise((n,s)=>{var o=c=>{try{a(r.next(c))}catch(u){s(u)}},l=c=>{try{a(r.throw(c))}catch(u){s(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,l);a((r=r.apply(t,e)).next())});var La=ys((wa,_n)=>{(function(t){var e=!1,r,n;function s(){if(typeof r!="undefined")return r;var p=document.documentElement,m=document.createElement("div");return m.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),p.appendChild(m),r=m.offsetWidth-m.clientWidth,p.removeChild(m),r}function o(){return document.documentElement.scrollHeight>window.innerHeight}function l(p){if(!(typeof document=="undefined"||e)){var m=document.documentElement;n=window.pageYOffset,o()?m.style.width="calc(100% - "+s()+"px)":m.style.width="100%",m.style.position="fixed",m.style.top=-n+"px",m.style.overflow="hidden",e=!0}}function a(){if(!(typeof document=="undefined"||!e)){var p=document.documentElement;p.style.width="",p.style.position="",p.style.top="",p.style.overflow="",window.scroll(0,n),e=!1}}function c(){if(e){a();return}l()}var u={on:l,off:a,toggle:c};typeof _n!="undefined"&&typeof _n.exports!="undefined"?_n.exports=u:t.noScroll=u})(wa)});var so=ys((qa,ns)=>{(function(t,e,r){typeof ns!="undefined"&&ns.exports?ns.exports=r():t[e]=r()})(qa,"subtag",function(){var t="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(a){return a.match(e)||[]}function n(a){return r(a).filter(function(c,u){return c&&u})}function s(a){return a=r(a),{language:a[1]||t,extlang:a[2]||t,script:a[3]||t,region:a[4]||t}}function o(a,c,u){Object.defineProperty(a,c,{value:u,enumerable:!0})}function l(a,c,u){function p(m){return r(m)[a]||t}o(p,"pattern",c),o(s,u,p)}return l(1,/^[a-zA-Z]{2,3}$/,"language"),l(2,/^[a-zA-Z]{3}$/,"extlang"),l(3,/^[a-zA-Z]{4}$/,"script"),l(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(s,"split",n),s})});var Wa=ys((oo,ao)=>{var Jc=function(){var t={},e=1e-10,r=Math.PI/180,n=180/Math.PI,s=6378137,o=20037508342789244e-9;function l(c){return Number(c)===c&&c%1!==0}function a(c){if(c=c||{},this.size=c.size||256,this.expansion=c.antimeridian===!0?2:1,!t[this.size]){var u=this.size,p=t[this.size]={};p.Bc=[],p.Cc=[],p.zc=[],p.Ac=[];for(var m=0;m<30;m++)p.Bc.push(u/360),p.Cc.push(u/(2*Math.PI)),p.zc.push(u/2),p.Ac.push(u),u*=2}this.Bc=t[this.size].Bc,this.Cc=t[this.size].Cc,this.zc=t[this.size].zc,this.Ac=t[this.size].Ac}return a.prototype.px=function(c,u){if(l(u)){var p=this.size*Math.pow(2,u),m=p/2,b=p/360,S=p/(2*Math.PI),x=p,y=Math.min(Math.max(Math.sin(r*c[1]),-.9999),.9999),A=m+c[0]*b,w=m+.5*Math.log((1+y)/(1-y))*-S;return A>x*this.expansion&&(A=x*this.expansion),w>x&&(w=x),[A,w]}else{var m=this.zc[u],y=Math.min(Math.max(Math.sin(r*c[1]),-.9999),.9999),A=Math.round(m+c[0]*this.Bc[u]),w=Math.round(m+.5*Math.log((1+y)/(1-y))*-this.Cc[u]);return A>this.Ac[u]*this.expansion&&(A=this.Ac[u]*this.expansion),w>this.Ac[u]&&(w=this.Ac[u]),[A,w]}},a.prototype.ll=function(c,u){if(l(u)){var p=this.size*Math.pow(2,u),m=p/360,b=p/(2*Math.PI),S=p/2,x=(c[1]-S)/-b,y=(c[0]-S)/m,A=n*(2*Math.atan(Math.exp(x))-.5*Math.PI);return[y,A]}else{var x=(c[1]-this.zc[u])/-this.Cc[u],y=(c[0]-this.zc[u])/this.Bc[u],A=n*(2*Math.atan(Math.exp(x))-.5*Math.PI);return[y,A]}},a.prototype.bbox=function(c,u,p,m,b){m&&(u=Math.pow(2,p)-1-u);var S=[c*this.size,(+u+1)*this.size],x=[(+c+1)*this.size,u*this.size],y=this.ll(S,p).concat(this.ll(x,p));return b==="900913"?this.convert(y,"900913"):y},a.prototype.xyz=function(c,u,p,m){m==="900913"&&(c=this.convert(c,"WGS84"));var b=[c[0],c[1]],S=[c[2],c[3]],x=this.px(b,u),y=this.px(S,u),A=[Math.floor(x[0]/this.size),Math.floor((y[0]-1)/this.size)],w=[Math.floor(y[1]/this.size),Math.floor((x[1]-1)/this.size)],U={minX:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),minY:Math.min.apply(Math,w)<0?0:Math.min.apply(Math,w),maxX:Math.max.apply(Math,A),maxY:Math.max.apply(Math,w)};if(p){var H={minY:Math.pow(2,u)-1-U.maxY,maxY:Math.pow(2,u)-1-U.minY};U.minY=H.minY,U.maxY=H.maxY}return U},a.prototype.convert=function(c,u){return u==="900913"?this.forward(c.slice(0,2)).concat(this.forward(c.slice(2,4))):this.inverse(c.slice(0,2)).concat(this.inverse(c.slice(2,4)))},a.prototype.forward=function(c){var u=[s*c[0]*r,s*Math.log(Math.tan(Math.PI*.25+.5*c[1]*r))];return u[0]>o&&(u[0]=o),u[0]<-o&&(u[0]=-o),u[1]>o&&(u[1]=o),u[1]<-o&&(u[1]=-o),u},a.prototype.inverse=function(c){return[c[0]*n/s,(Math.PI*.5-2*Math.atan(Math.exp(-c[1]/s)))*n]},a}();typeof ao!="undefined"&&typeof oo!="undefined"&&(ao.exports=oo=Jc)});var sd={};cl(sd,{MapboxAddressAutofill:()=>Wt,MapboxAddressConfirmation:()=>mt,MapboxAddressMinimap:()=>rr,MapboxGeocoder:()=>Zt,MapboxHTMLEvent:()=>E,MapboxSearchBox:()=>Yt,autofill:()=>tl,config:()=>_,confirmAddress:()=>Dn,getAutofillSearchText:()=>Ht,getFormAutofillValues:()=>Pn});var bo=document.implementation.createHTMLDocument();function re(t,e){let r={};for(let[n,s]of Object.entries(e))r[n]=t.querySelector(s);return r}function yo(t){return Array.from(t.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function $(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild}function xo(t){let e=bo.createElement("style");return e.textContent=t,bo.head.appendChild(e),e.sheet}function Eo(t){return window.getComputedStyle(t).display!=="none"}function pe(t,e){if(!t)return;Object.getOwnPropertyDescriptor(t.constructor.prototype,"value").set.call(t,e);let n=t;n._valueTracker&&n._valueTracker.setValue("");let s=new Event("input",{bubbles:!0});s.simulated=!0,t.dispatchEvent(s);let o=new Event("change",{bubbles:!0});o.simulated=!0,t.dispatchEvent(o)}function ln(t,e=!1){let r,n,s=t.getBoundingClientRect();if(t.style.display==="none"||s.height===0&&s.width===0){let o=t.cloneNode(e);t.parentElement.appendChild(o),o.style.setProperty("display","block","important");let l=o.getBoundingClientRect();r=l.width,n=l.height,o.style.setProperty("display","none"),o.remove()}else r=s.width,n=s.height;return{height:Math.floor(n),width:Math.floor(r)}}function So(t){let e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}var ul=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),hl=new RegExp(`\\.${ul.source}`,"g"),pl=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function hr(t,e){return t.replace(hl,r=>"."+e(r.slice(1)))}function Es(t,e){let n=xo(t).cssRules;function s(l){if(l instanceof CSSStyleRule)return`${hr(l.selectorText,e)} { ${l.style.cssText} }`;let a=pl.exec(l.cssText.split(`
`).join(""));if(a&&a.length>2){let c=a[1],u=a[2];return`${c} { ${Es(u,e)} }`}return l.cssText}let o="";for(let l of Array.from(n))o+=s(l)+`

`;return o.trim()}function Ss(t,e){let r=Array.from(t.querySelectorAll("[class]"));r.push(t);for(let n of r){let{classList:s}=n;for(let o of Array.from(s))s.remove(o),s.add(e(o))}return t}var ml=Object.defineProperty,fl=Object.defineProperties,gl=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,Mo=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,Ao=(t,e,r)=>e in t?ml(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,k=(t,e)=>{for(var r in e||(e={}))Mo.call(e,r)&&Ao(t,r,e[r]);if(fn)for(var r of fn(e))wo.call(e,r)&&Ao(t,r,e[r]);return t},Ve=(t,e)=>fl(t,gl(e)),gn=(t,e)=>{var r={};for(var n in t)Mo.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&fn)for(var n of fn(t))e.indexOf(n)<0&&wo.call(t,n)&&(r[n]=t[n]);return r},ks=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},V=(t,e,r)=>(ks(t,e,"read from private field"),r?r.call(t):e.get(t)),oe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},me=(t,e,r,n)=>(ks(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),vl=(t,e,r,n)=>({set _(s){me(t,e,s,r)},get _(){return V(t,e,n)}}),kt=(t,e,r)=>(ks(t,e,"access private method"),r),ie=(t,e,r)=>new Promise((n,s)=>{var o=c=>{try{a(r.next(c))}catch(u){s(u)}},l=c=>{try{a(r.throw(c))}catch(u){s(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,l);a((r=r.apply(t,e)).next())}),Lo="https://api.mapbox.com/autofill/v1",bl="suggest",yl="retrieve",xl=`${Lo}/${bl}`,El=`${Lo}/${yl}`,B=class{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");if(this.lng>180||this.lng<-180)throw new Error("Invalid LngLat longitude value: must be between -180 and 180")}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}static convert(t){if(t instanceof B)return new B(t.lng,t.lat);if(Array.isArray(t)&&t.length===2)return new B(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null&&("lng"in t||"lon"in t)&&"lat"in t)return new B(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},Y=class{constructor(t,e){this._sw=B.convert(t),this._ne=B.convert(e)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new B(this.getWest(),this.getNorth())}getSouthEast(){return new B(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toFlatArray(){return[this._sw.lng,this._sw.lat,this._ne.lng,this._ne.lat]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}static convert(t){if(!t)throw new Error("Invalid LngLatBounds convert value: falsy");if(t instanceof Y)return new Y(t.getSouthWest(),t.getNorthEast());if(Array.isArray(t)&&t.length===2)return new Y(B.convert(t[0]),B.convert(t[1]));if(Array.isArray(t)&&t.length===4)return new Y(B.convert([t[0],t[1]]),B.convert([t[2],t[3]]));throw new Error("`LngLatBoundsLike` argument must be specified as an array [<LngLatLike>, <LngLatLike>] or an array [<west>, <south>, <east>, <north>]")}};function Sl(){let e=(Math.random().toString(16)+Date.now().toString(16)+Math.random().toString(16)).replace(/\./g,"");return[e.slice(0,8),e.slice(8,12),"4"+e.slice(12,15)+"-8"+e.slice(15,18),e.slice(18,30)].join("-")}var ne=class{constructor(t){this.id=t!=null?t:Sl()}toString(){return this.id}static convert(t){return new ne(t instanceof ne?t.id:t.toString())}},Al="Unknown error",Tl=class extends Error{constructor(t,e){super(String(t.message||t.error||Al));this.name="MapboxError",this.statusCode=e}toString(){return`${this.name} (${this.statusCode}): ${this.message}`}};function Re(t){return ie(this,null,function*(){if(!t.ok){let e=yield t.json();throw new Tl(e,t.status)}})}var To=globalThis.fetch,Ml=globalThis.AbortController;function Ae(){if(!To)throw new Error("Fetch implementation not found. Please include a fetch polyfill in your application or use `polyfillFetch` from `@mapbox/search-js-core` to fix this issue.");return{fetch:To,AbortController:Ml}}function st(...t){let e=[];for(let r of t){if(!r)continue;let n=Object.entries(r);for(let[s,o]of n)o!=null&&e.push(`${s}=${encodeURIComponent(String(o))}`)}return e.join("&")}var cn,Ts,ko,Co=class{constructor(t={}){oe(this,Ts),oe(this,cn,void 0);let e=t,{accessToken:r}=e,n=gn(e,["accessToken"]);this.accessToken=r,this.defaults=k(k({},Co.defaults),n)}get responseHeaders(){return V(this,cn)}suggest(t,e){return ie(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:n}=e,s=Ve(k(k({},this.defaults),e),{sessionToken:r}),o=new URL(`${xl}/${encodeURIComponent(t)}`);o.search=kt(this,Ts,ko).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});me(this,cn,a.headers),yield Re(a);let c=yield a.json();return Ve(k({},c),{suggestions:c.suggestions.map(u=>Ve(k({},u),{original_search_text:t})),url:o.toString()})})}retrieve(t,e){return ie(this,null,function*(){if(!t)throw new Error("suggestion is required");if(!this.canRetrieve(t))throw new Error("suggestion cannot be retrieved");let{sessionToken:r,signal:n}=e,s=ne.convert(r),o=new URL(`${El}/${t.action.id}`);o.search=st({access_token:this.accessToken,session_token:s.id});let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Re(a);let c=yield a.json();return c.url=o.toString(),c})}canRetrieve(t){let e=t.action;return typeof(e==null?void 0:e.id)=="string"}},gr=Co;cn=new WeakMap;Ts=new WeakSet;ko=function(t){return st({types:"address",access_token:this.accessToken,streets:t.streets,language:t.language,country:t.country,limit:t.limit},t.sessionToken&&{session_token:ne.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:Y.convert(t.bbox).toFlatArray().join(",")})};gr.defaults={language:"en",proximity:"ip",streets:!0};var vn="https://api.mapbox.com/search/searchbox/v1",wl="suggest",Ll="retrieve",kl="category",Cl="reverse",Il=`${vn}/${wl}`,Rl=`${vn}/${Ll}`,Pl=`${vn}/${kl}`,Ol=`${vn}/${Cl}`,dn,Ms,Io=class{constructor(t={}){oe(this,dn);let e=t,{accessToken:r}=e,n=gn(e,["accessToken"]);this.accessToken=r,this.defaults=k(k({},Io.defaults),n)}suggest(t,e){return ie(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:n}=e,s=Ve(k(k({},this.defaults),e),{q:t,sessionToken:r});if(s.eta_type&&(!s.origin||!s.navigation_profile))throw new Error("to provide eta estimate: eta, navigation_profile, and origin are required");if(s.origin&&!s.navigation_profile)throw new Error("to provide distance estimate: both navigation_profile and origin are required");let o=new URL(Il);o.search=kt(this,dn,Ms).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Re(a);let c=yield a.json();return c.url=o.toString(),c})}retrieve(t,e){return ie(this,null,function*(){if(!t)throw new Error("suggestion is required");let{sessionToken:r,signal:n,language:s}=e,o=ne.convert(r),l=k(k({},this.defaults),s&&{language:s}),a=new URL(`${Rl}/${encodeURIComponent(t.mapbox_id)}`);a.search=st({access_token:this.accessToken,session_token:o.id},{language:l.language});let{fetch:c}=Ae(),u=yield c(a.toString(),{signal:n});yield Re(u);let p=yield u.json();return p.url=a.toString(),p})}category(t){return ie(this,arguments,function*(e,r={}){if(!e)throw new Error("category is required");let n=k(k({},this.defaults),r),s=new URL(`${Pl}/${encodeURIComponent(e)}`);s.search=kt(this,dn,Ms).call(this,n);let{fetch:o}=Ae(),l=yield o(s.toString(),{signal:n.signal});yield Re(l);let a=yield l.json();return a.url=s.toString(),a})}reverse(t){return ie(this,arguments,function*(e,r={}){if(!e)throw new Error("lngLat is required");let[n,s]=typeof e=="string"?e.split(",").map(p=>parseFloat(p)):B.convert(e).toArray();if(isNaN(n)||isNaN(s))throw new Error("lngLat is required");let o=k(k({},this.defaults),r),l=new URL(Ol);l.search=st({access_token:this.accessToken,language:o.language,limit:o.limit,longitude:n,latitude:s},o.types&&{types:typeof o.types=="string"?o.types:[...o.types].join(",")});let{fetch:a}=Ae(),c=yield a(l.toString(),{signal:o.signal});yield Re(c);let u=yield c.json();return u.url=l.toString(),u})}},Cs=Io;dn=new WeakSet;Ms=function(t){return st({q:t.q,access_token:this.accessToken,language:t.language,limit:t.limit,navigation_profile:t.navigation_profile,route:t.route,route_geometry:t.route_geometry,sar_type:t.sar_type,time_deviation:t.time_deviation,eta_type:t.eta_type,country:t.country,poi_category:t.poi_category,rich_metadata_provider:t.rich_metadata_provider,poi_category_exclusions:t.poi_category_exclusions},t.sessionToken&&{session_token:ne.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.origin&&{origin:typeof t.origin=="string"?t.origin:B.convert(t.origin).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:Y.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};Cs.defaults={language:"en"};var Bl="https://api.mapbox.com/autofill/v1",_l="retrieve",Hl=`${Bl}/${_l}`,ws,Ro,Po=class{constructor(t={}){oe(this,ws);let e=t,{accessToken:r}=e,n=gn(e,["accessToken"]);this.accessToken=r,this.defaults=k(k({},Po.defaults),n)}validate(t,e){return ie(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:r,signal:n}=e,s=Ve(k(k({},this.defaults),e),{sessionToken:r}),o=new URL(`${Hl}/${encodeURIComponent(t)}`);o.search=kt(this,ws,Ro).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Re(a);let c=yield a.json();return c.url=o.toString(),c.features.length>0&&(c.features=[c.features[0]]),c})}},Is=Po;ws=new WeakSet;Ro=function(t){return st({access_token:this.accessToken,language:t.language,country:t.country},t.sessionToken&&{session_token:ne.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:Y.convert(t.bbox).toFlatArray().join(",")})};Is.defaults={language:"en",proximity:"ip"};var Rs="https://api.mapbox.com/search/geocode/v6",Fl=`${Rs}/forward`,Dl=`${Rs}/reverse`,dd=`${Rs}/batch`,Nl=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/,jl=/[\s,]+/,pr,un,Ls,Oo=class{constructor(t={}){oe(this,un),oe(this,pr,void 0);let e=t,{accessToken:r}=e,n=gn(e,["accessToken"]);this.accessToken=r,this.defaults=k({},n)}get responseHeaders(){return V(this,pr)}forward(t,e){return ie(this,null,function*(){if(!t)throw new Error("searchText is required");let r;e&&({signal:r}=e);let n=Ve(k(k({},this.defaults),e),{q:t}),s=new URL(`${Fl}`);s.search=kt(this,un,Ls).call(this,n);let{fetch:o}=Ae(),l=r?{signal:r}:{},a=yield o(s.toString(),l);me(this,pr,a.headers),yield Re(a);let c=yield a.json();return c.url=s.toString(),c})}reverse(t,e){return ie(this,null,function*(){if(!t)throw new Error("lngLat is required");let r;e&&({signal:r}=e);let n;if(typeof t=="string"){let[p,m]=t.split(",");n=new B(Number(p),Number(m))}else n=B.convert(t);let s=Ve(k(k({},this.defaults),e),{longitude:n.lng,latitude:n.lat}),o=new URL(`${Dl}`);o.search=kt(this,un,Ls).call(this,s,!0);let{fetch:l}=Ae(),a=r?{signal:r}:{},c=yield l(o.toString(),a);me(this,pr,c.headers),yield Re(c);let u=yield c.json();return u.url=o.toString(),u})}suggest(t,e){return ie(this,null,function*(){if(Nl.test(t)){let n=t.trim().split(jl).map(s=>s.trim()).join(",");return this.reverse(n,e)}else return this.forward(t,e)})}retrieve(t){return ie(this,null,function*(){return t})}};pr=new WeakMap;un=new WeakSet;Ls=function(t,e=!1){return e&&["proximity","autocomplete","bbox"].forEach(r=>{r in t&&delete t[r]}),st({q:t.q,longitude:t.longitude,latitude:t.latitude,access_token:this.accessToken,permanent:t.permanent,language:t.language,country:t.country,limit:t.limit,autocomplete:t.autocomplete,worldview:t.worldview},t.sessionToken&&{session_token:ne.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:Y.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};var Ps=(t=>(t.exact="exact",t.high="high",t.medium="medium",t.low="low",t))(Ps||{}),mr,Os=class{constructor(){oe(this,mr,{})}addEventListener(t,e){let r=V(this,mr);r[t]||(r[t]=[]),r[t].push(e)}removeEventListener(t,e){let r=V(this,mr);if(!r[t])return;let n=r[t],s=n.indexOf(e);s!==-1&&n.splice(s,1)}fire(t,e){let r=V(this,mr);if(!r[t])return;let n=r[t];for(let s of n)s(e)}};mr=new WeakMap;function Bs(t,e,r){let n=null;return(...s)=>{n!==null&&clearTimeout(n);let o=r&&r();n=setTimeout(()=>{n=null,!(o==null?void 0:o.aborted)&&t(...s)},e)}}function As(){let{AbortController:t}=Ae();return new t}var fr,hn,pn,Lt,ze,mn,We=class extends Os{constructor(t,e=0){super();oe(this,fr,new ne),oe(this,hn,0),oe(this,pn,!1),oe(this,Lt,void 0),oe(this,ze,As()),oe(this,mn,void 0),me(this,mn,Bs((r,...n)=>ie(this,[r,...n],function*(s,o={}){if(V(this,ze).abort(),me(this,ze,As()),!s){me(this,Lt,null),this.fire("suggest",V(this,Lt));return}try{let l=yield this.search.suggest(s,Ve(k({sessionToken:this.sessionToken},o),{signal:V(this,ze).signal}));me(this,Lt,l),this.fire("suggest",l)}catch(l){if(l.name==="AbortError")return;this.fire("suggesterror",l)}}),e,()=>V(this,ze).signal)),Object.defineProperties(this,{search:{value:t,writable:!1},debounce:{value:e,writable:!1}})}get sessionToken(){return V(this,pn)?V(this,fr).id:`${V(this,fr).id}.${V(this,hn)}`}set sessionToken(t){me(this,pn,!0),me(this,fr,new ne(t))}get suggestions(){return V(this,Lt)}suggest(t,e){return V(this,mn).call(this,t,e),new Promise((r,n)=>{let s,o;s=l=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),r(l)},o=l=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),n(l)},this.addEventListener("suggest",s),this.addEventListener("suggesterror",o)})}clear(){this.suggest("")}retrieve(t,e){return ie(this,null,function*(){let r=yield this.search.retrieve(t,k({sessionToken:this.sessionToken},e));return this.fire("retrieve",r),r})}canRetrieve(t){return this.search.canRetrieve?this.search.canRetrieve(t):!0}canSuggest(t){return this.search.canSuggest?this.search.canSuggest(t):!0}abort(){V(this,ze).abort(),me(this,ze,As())}incrementSession(){vl(this,hn)._++}};fr=new WeakMap;hn=new WeakMap;pn=new WeakMap;Lt=new WeakMap;ze=new WeakMap;mn=new WeakMap;function Ct(t){let{properties:e}=t;return k({},e)}var vr=1.4;function bn(t,e,r=.5){let{center:n,zoom:s}=t.cameraForBounds(e),o=Math.max(s-r,0);return{center:n,zoom:o,speed:vr}}function yn(t){switch(t){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function xn(t,e){return`https://api.mapbox.com/styles/v1/${t}/${e}/static/`}var br='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>';var _s='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/></svg>';var Bo=xn("mapbox","satellite-streets-v11"),_o="20d01",Ho=["mapbox.com","mapbox.cn","tilestream.net"],Fo=$(`
<template>
  <div class="MapboxSearch">
    <div class="Label" role="label" aria-live="polite" aria-atomic="true">
    </div>
    <div class="Results" aria-hidden="true">
      <div class="ResultsList" role="listbox">
      </div>
      <div class="ResultsAttribution" aria-hidden="true">
        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
          Powered by Mapbox
        </a>
      </div>
    </div>
  </div>
</template>
`),Do=$(`
<template>
  <div class="Suggestion" role="option" tabindex="-1">
    <div class="SuggestionIcon" aria-hidden="true"></div>
    <div class="SuggestionText">
      <div class="SuggestionName"></div>
      <div class="SuggestionDesc"></div>
    </div>
  </div>
</template>
`),No=$(`
<template>
  <div class="SearchBox">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${br}</button>
      <div class="LoadingIcon">${_s}</div>
    </div>
  </div>
</template>
`),jo=$(`
<template>
  <div class="Geocoder">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${br}</button>
      <div class="LoadingIcon">${_s}</div>
    </div>
  </div>
</template>
`);function Te(){return"mbx"+new ne().id.slice(0,8)}function Pe(t){try{return JSON.parse(t)}catch(e){return null}}function ot(t,e){if(t==null||e==null||typeof t!="object"||typeof e!="object")return t===e;let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let s of r)if(!ot(t[s],e[s]))return!1;return!0}function Hs(t,e){let r=Math.pow(10,e);return Math.round(t*r)/r}function $o(t){return Boolean(t.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function Go(t){return Boolean(Ho.some(e=>t.includes(e)))}var It,at,lt,W=class extends HTMLElement{constructor(){super(...arguments);d(this,It,Te());d(this,at,void 0);d(this,lt,e=>`${i(this,It)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,r){let n=l=>l.replace(e,r);Ss(this,n);let s=Array.from(this.querySelectorAll("style"));for(let l of s)l.textContent=hr(l.textContent,n);s.length&&h(this,at,s[s.length-1]);let o=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(let l of o)l.id=l.id.replace(e,r)}connectedCallback(){if(this.childElementCount>0){let s=this.dataset.seed,o=i(this,It);s&&s!==o&&(this.clonedCallback(s,o),this.dataset.seed=o);return}this.dataset.seed=i(this,It);let e=this.template;if(e){let s=this.prepareTemplate(e);this.appendChild(s)}let r=this.templateStyle;if(r){let s=document.createElement("style");s.textContent=this.prepareCSS(r),this.appendChild(s)}let n=document.createElement("style");this.templateUserStyle&&(n.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(n),h(this,at,n)}prepareTemplate(e){let r=e.content.firstElementChild;return Ss(r.cloneNode(!0),i(this,lt))}prepareCSS(e){return Es(e,i(this,lt))}updateTemplateUserStyle(e){!i(this,at)||(i(this,at).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(hr(e,i(this,lt)))}querySelectorAll(e){return super.querySelectorAll(hr(e,i(this,lt)))}addEventListener(e,r,n){super.addEventListener(e,r,n)}removeEventListener(e,r,n){super.removeEventListener(e,r,n)}dispatchEvent(e){return super.dispatchEvent(e)}};It=new WeakMap,at=new WeakMap,lt=new WeakMap;var Uo='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>';var qo='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>';var zo=`<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />
</svg>`;var Vo=`<!-- TODO: I'm not sure if the way I added the circle will "scale" properly, need to check that -->
<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>
    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>
</svg>`;var Wo=`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>
</svg>`;var Yo="@mapbox/search-js-web",ct="1.0.0";var Xl=`https://api.mapbox.com/search-js/v${ct}/img/style-toggle-satellite.jpg`,Yl=`https://api.mapbox.com/search-js/v${ct}/img/style-toggle-default.jpg`,Kl=768-1,Zl=`@media only screen and (max-width: ${Kl}px)`,Fs={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:br,question:Uo,marker:qo,street:zo,addressMarker:Vo,search:Wo},images:{styleToggleDefault:Yl,styleToggleSatellite:Xl}};function N(t,e={}){let r=g(g({},Fs.variables),e.variables||{}),n=e.cssText||"",s="";for(let[o,l]of Object.entries(r)){if(!Array.isArray(l)){s+=`--${o}: ${l};`;continue}if(l[0]!=="mobile"){let u=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${o} ${u}`)}let[,a,c]=l;n+=`${Zl} { ${t} { --${o}: ${a} !important; } }`,s+=`--${o}: ${c};`}return n+`${t} { ${s} }`}function q(t,e={}){return g(g({},Fs.icons),e.icons||{})[t]}function Ko(t,e={}){return g(g({},Fs.images),e.images||{})[t]}function Sn(t){return t.split("-")[0]}function Ds(t){return t.split("-")[1]}function Ns(t){return["top","bottom"].includes(Sn(t))?"x":"y"}function Jo(t){return t==="y"?"height":"width"}function Zo(t,e,r){let{reference:n,floating:s}=t,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2,a=Ns(e),c=Jo(a),u=n[c]/2-s[c]/2,p=a==="x",m;switch(Sn(e)){case"top":m={x:o,y:n.y-s.height};break;case"bottom":m={x:o,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:l};break;case"left":m={x:n.x-s.width,y:l};break;default:m={x:n.x,y:n.y}}switch(Ds(e)){case"start":m[a]-=u*(r&&p?-1:1);break;case"end":m[a]+=u*(r&&p?-1:1)}return m}var ea=(t,e,r)=>j(void 0,null,function*(){let{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:l}=r,a=yield l.isRTL==null?void 0:l.isRTL(e),c=yield l.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:p}=Zo(c,n,a),m=n,b={};for(let S=0;S<o.length;S++){let{name:x,fn:y}=o[S],{x:A,y:w,data:U,reset:H}=yield y({x:u,y:p,initialPlacement:n,placement:m,strategy:s,middlewareData:b,rects:c,platform:l,elements:{reference:t,floating:e}});u=A!=null?A:u,p=w!=null?w:p,b=M(g({},b),{[x]:g(g({},b[x]),U)}),H&&(typeof H=="object"&&(H.placement&&(m=H.placement),H.rects&&(c=H.rects===!0?yield l.getElementRects({reference:t,floating:e,strategy:s}):H.rects),{x:u,y:p}=Zo(c,m,a)),S=-1)}return{x:u,y:p,placement:m,strategy:s,middlewareData:b}});function Ql(t){return typeof t!="number"?function(e){return g({top:0,right:0,bottom:0,left:0},e)}(t):{top:t,right:t,bottom:t,left:t}}function yr(t){return M(g({},t),{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}function ta(t,e){return j(this,null,function*(){var r;e===void 0&&(e={});let{x:n,y:s,platform:o,rects:l,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:b=!1,padding:S=0}=e,x=Ql(S),y=a[b?m==="floating"?"reference":"floating":m],A=yr(yield o.getClippingRect({element:(r=yield o.isElement==null?void 0:o.isElement(y))==null||r?y:y.contextElement||(yield o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:p,strategy:c})),w=yr(o.convertOffsetParentRelativeRectToViewportRelativeRect?yield o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m==="floating"?M(g({},l.floating),{x:n,y:s}):l.reference,offsetParent:yield o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating),strategy:c}):l[m]);return{top:A.top-w.top+x.top,bottom:w.bottom-A.bottom+x.bottom,left:A.left-w.left+x.left,right:w.right-A.right+x.right}})}var Jl={left:"right",right:"left",bottom:"top",top:"bottom"};function En(t){return t.replace(/left|right|bottom|top/g,e=>Jl[e])}function ec(t,e,r){r===void 0&&(r=!1);let n=Ds(t),s=Ns(t),o=Jo(s),l=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=En(l)),{main:l,cross:En(l)}}var tc={start:"end",end:"start"};function Qo(t){return t.replace(/start|end/g,e=>tc[e])}var rc=["top","right","bottom","left"],jd=rc.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);var js=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(e){return j(this,null,function*(){var r;let{placement:n,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:c}=e,T=t,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:b="bestFit",flipAlignment:S=!0}=T,x=go(T,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),y=Sn(n),A=m||(y===l||!S?[En(l)]:function(C){let O=En(C);return[Qo(C),O,Qo(O)]}(l)),w=[l,...A],U=yield ta(e,x),H=[],nt=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&H.push(U[y]),p){let{main:C,cross:O}=ec(n,o,yield a.isRTL==null?void 0:a.isRTL(c.floating));H.push(U[C],U[O])}if(nt=[...nt,{placement:n,overflows:H}],!H.every(C=>C<=0)){var F,f;let C=((F=(f=s.flip)==null?void 0:f.index)!=null?F:0)+1,O=w[C];if(O)return{data:{index:C,overflows:nt},reset:{placement:O}};let D="bottom";switch(b){case"bestFit":{var v;let Ue=(v=nt.map(le=>[le,le.overflows.filter(he=>he>0).reduce((he,vs)=>he+vs,0)]).sort((le,he)=>le[1]-he[1])[0])==null?void 0:v[0].placement;Ue&&(D=Ue);break}case"initialPlacement":D=l}if(n!==D)return{reset:{placement:D}}}return{}})}}};var $s=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(e){return j(this,null,function*(){let{x:r,y:n}=e,s=yield function(o,l){return j(this,null,function*(){let{placement:a,platform:c,elements:u}=o,p=yield c.isRTL==null?void 0:c.isRTL(u.floating),m=Sn(a),b=Ds(a),S=Ns(a)==="x",x=["left","top"].includes(m)?-1:1,y=p&&S?-1:1,A=typeof l=="function"?l(o):l,{mainAxis:w,crossAxis:U,alignmentAxis:H}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:g({mainAxis:0,crossAxis:0,alignmentAxis:null},A);return b&&typeof H=="number"&&(U=b==="end"?-1*H:H),S?{x:U*y,y:w*x}:{x:w*x,y:U*y}})}(e,t);return{x:r+s.x,y:n+s.y,data:s}})}}};function aa(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function _e(t){if(t==null)return window;if(!aa(t)){let e=t.ownerDocument;return e&&e.defaultView||window}return t}function Er(t){return _e(t).getComputedStyle(t)}function Oe(t){return aa(t)?"":t?(t.nodeName||"").toLowerCase():""}function la(){let t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Me(t){return t instanceof _e(t).HTMLElement}function Ye(t){return t instanceof _e(t).Element}function Us(t){return typeof ShadowRoot=="undefined"?!1:t instanceof _e(t).ShadowRoot||t instanceof ShadowRoot}function Mn(t){let{overflow:e,overflowX:r,overflowY:n}=Er(t);return/auto|scroll|overlay|hidden/.test(e+n+r)}function ic(t){return["table","td","th"].includes(Oe(t))}function ra(t){let e=/firefox/i.test(la()),r=Er(t);return r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].includes(r.willChange)||e&&r.willChange==="filter"||e&&!!r.filter&&r.filter!=="none"}function ca(){return!/^((?!chrome|android).)*safari/i.test(la())}var ia=Math.min,xr=Math.max,An=Math.round;function Be(t,e,r){var n,s,o,l;e===void 0&&(e=!1),r===void 0&&(r=!1);let a=t.getBoundingClientRect(),c=1,u=1;e&&Me(t)&&(c=t.offsetWidth>0&&An(a.width)/t.offsetWidth||1,u=t.offsetHeight>0&&An(a.height)/t.offsetHeight||1);let p=Ye(t)?_e(t):window,m=!ca()&&r,b=(a.left+(m&&(n=(s=p.visualViewport)==null?void 0:s.offsetLeft)!=null?n:0))/c,S=(a.top+(m&&(o=(l=p.visualViewport)==null?void 0:l.offsetTop)!=null?o:0))/u,x=a.width/c,y=a.height/u;return{width:x,height:y,top:S,right:b+x,bottom:S+y,left:b,x:b,y:S}}function Xe(t){return(e=t,(e instanceof _e(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function wn(t){return Ye(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function da(t){return Be(Xe(t)).left+wn(t).scrollLeft}function nc(t,e,r){let n=Me(e),s=Xe(e),o=Be(t,n&&function(c){let u=Be(c);return An(u.width)!==c.offsetWidth||An(u.height)!==c.offsetHeight}(e),r==="fixed"),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(n||!n&&r!=="fixed")if((Oe(e)!=="body"||Mn(s))&&(l=wn(e)),Me(e)){let c=Be(e,!0);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else s&&(a.x=da(s));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function ua(t){return Oe(t)==="html"?t:t.assignedSlot||t.parentNode||(Us(t)?t.host:null)||Xe(t)}function na(t){return Me(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function Gs(t){let e=_e(t),r=na(t);for(;r&&ic(r)&&getComputedStyle(r).position==="static";)r=na(r);return r&&(Oe(r)==="html"||Oe(r)==="body"&&getComputedStyle(r).position==="static"&&!ra(r))?e:r||function(n){let s=ua(n);for(Us(s)&&(s=s.host);Me(s)&&!["html","body"].includes(Oe(s));){if(ra(s))return s;s=s.parentNode}return null}(t)||e}function sa(t){if(Me(t))return{width:t.offsetWidth,height:t.offsetHeight};let e=Be(t);return{width:e.width,height:e.height}}function ha(t){let e=ua(t);return["html","body","#document"].includes(Oe(e))?t.ownerDocument.body:Me(e)&&Mn(e)?e:ha(e)}function Tn(t,e){var r;e===void 0&&(e=[]);let n=ha(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=_e(n),l=s?[o].concat(o.visualViewport||[],Mn(n)?n:[]):n,a=e.concat(l);return s?a:a.concat(Tn(l))}function oa(t,e,r){return e==="viewport"?yr(function(n,s){let o=_e(n),l=Xe(n),a=o.visualViewport,c=l.clientWidth,u=l.clientHeight,p=0,m=0;if(a){c=a.width,u=a.height;let b=ca();(b||!b&&s==="fixed")&&(p=a.offsetLeft,m=a.offsetTop)}return{width:c,height:u,x:p,y:m}}(t,r)):Ye(e)?function(n,s){let o=Be(n,!1,s==="fixed"),l=o.top+n.clientTop,a=o.left+n.clientLeft;return{top:l,left:a,x:a,y:l,right:a+n.clientWidth,bottom:l+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}(e,r):yr(function(n){var s;let o=Xe(n),l=wn(n),a=(s=n.ownerDocument)==null?void 0:s.body,c=xr(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=xr(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),p=-l.scrollLeft+da(n),m=-l.scrollTop;return Er(a||o).direction==="rtl"&&(p+=xr(o.clientWidth,a?a.clientWidth:0)-c),{width:c,height:u,x:p,y:m}}(Xe(t)))}function sc(t){let e=Tn(t),r=["absolute","fixed"].includes(Er(t).position)&&Me(t)?Gs(t):t;return Ye(r)?e.filter(n=>Ye(n)&&function(s,o){let l=o.getRootNode==null?void 0:o.getRootNode();if(s.contains(o))return!0;if(l&&Us(l)){let a=o;do{if(a&&s===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(n,r)&&Oe(n)!=="body"):[]}var oc={getClippingRect:function(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t,o=[...r==="clippingAncestors"?sc(e):[].concat(r),n],l=o[0],a=o.reduce((c,u)=>{let p=oa(e,u,s);return c.top=xr(p.top,c.top),c.right=ia(p.right,c.right),c.bottom=ia(p.bottom,c.bottom),c.left=xr(p.left,c.left),c},oa(e,l,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:r,strategy:n}=t,s=Me(r),o=Xe(r);if(r===o)return e;let l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if((s||!s&&n!=="fixed")&&((Oe(r)!=="body"||Mn(o))&&(l=wn(r)),Me(r))){let c=Be(r,!0);a.x=c.x+r.clientLeft,a.y=c.y+r.clientTop}return M(g({},e),{x:e.x-l.scrollLeft+a.x,y:e.y-l.scrollTop+a.y})},isElement:Ye,getDimensions:sa,getOffsetParent:Gs,getDocumentElement:Xe,getElementRects:t=>{let{reference:e,floating:r,strategy:n}=t;return{reference:nc(e,Gs(r),n),floating:M(g({},sa(r)),{x:0,y:0})}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Er(t).direction==="rtl"};function pa(t,e,r,n){n===void 0&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=!0,animationFrame:a=!1}=n,c=s&&!a,u=o&&!a,p=c||u?[...Ye(t)?Tn(t):[],...Tn(e)]:[];p.forEach(x=>{c&&x.addEventListener("scroll",r,{passive:!0}),u&&x.addEventListener("resize",r)});let m,b=null;l&&(b=new ResizeObserver(r),Ye(t)&&!a&&b.observe(t),b.observe(e));let S=a?Be(t):null;return a&&function x(){let y=Be(t);!S||y.x===S.x&&y.y===S.y&&y.width===S.width&&y.height===S.height||r(),S=y,m=requestAnimationFrame(x)}(),l||r(),()=>{var x;p.forEach(y=>{c&&y.removeEventListener("scroll",r),u&&y.removeEventListener("resize",r)}),(x=b)==null||x.disconnect(),b=null,a&&cancelAnimationFrame(m)}}var ma=(t,e,r)=>ea(t,e,g({platform:oc},r));var dt,Ln,kn=class{constructor(e,r,n){d(this,dt,void 0);d(this,Ln,{placement:"bottom-start",flip:!1,offset:10});this.update=()=>j(this,null,function*(){let e={placement:this.options.placement,middleware:[$s(this.options.offset),this.options.flip&&js()].filter(Boolean)},{x:r,y:n}=yield ma(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${r}px`,top:`${n}px`})});this.referenceEl=e,this.floatingEl=r,h(this,dt,g(g({},i(this,Ln)),n)),this.destroy=pa(this.referenceEl,this.floatingEl,this.update)}get options(){return i(this,dt)}set options(e){h(this,dt,g(g({},i(this,dt)),e))}};dt=new WeakMap,Ln=new WeakMap;var se="*{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Geocoder,.SearchBox{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);padding-bottom:0;padding-top:0;position:relative;width:100%}.SearchIcon{fill:#757575;left:.5em}.ActionIcon,.SearchIcon{bottom:0;height:20px;margin:auto 0;position:absolute;top:0;width:20px}.ActionIcon{right:.5em}.ActionIcon>button{background:none;border:none;color:inherit;cursor:pointer;font:inherit;height:100%;outline:inherit;padding:0;width:100%}.ActionIcon>button:hover{background:none!important}.ClearBtn{display:none}.ClearBtn:hover{color:#909090}.LoadingIcon{-moz-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;-webkit-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;display:none;height:100%}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.Input{background-color:transparent;border:0;color:#404040;color:rgba(0,0,0,.75);font:inherit;height:36px;margin:0;overflow:hidden;padding:0 40px;text-overflow:ellipsis;white-space:nowrap;width:100%}.Input::-ms-clear{display:none}.Input:focus{border:thin dotted;border-radius:var(--borderRadius);box-shadow:none;color:#404040;color:rgba(0,0,0,.75);outline:0}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var E=class extends CustomEvent{constructor(e,r){super(e,{composed:!0,detail:r})}clone(e){let r=new E(this.type,this.detail);return e&&Object.defineProperty(r,"target",{value:e}),r}};var fa="Type in 2 or more characters for results.",ga="When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",va="No search results.",ba=(t,e,r)=>`${e} ${e===1?"result is":"results are"} available. ${t}. ${r} of ${e} is selected.`,ya=t=>`${t} ${t===1?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`;function Cn(t){let e=t.currentTarget;(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var xa="search-listbox__description",Ke=t=>{let e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.setAttribute("role","status"),e.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");let r=document.createElement("div");return r.setAttribute("id",`${t}--${xa}`),e.appendChild(r),e},qs=(t,e)=>{var n;let r=(n=document.body.querySelector(`[id="${e}--${xa}"]`))!=null?n:null;r&&(r.textContent=t)},In=t=>{t.name=t.name+" address-search",t.setAttribute("data-lpignore","true")},Ea=(t,e,r)=>{let n=null,s=!e||e.length===0;if((t==null?void 0:t.length)<2)n=fa+" "+ga;else if(s)n=va;else if(r!==void 0){let o=e[r],l=o.name||o.feature_name||o.properties.name;n=ba(l,e.length,r+1)}else n=ya(e.length);return n};var Sr=(t,e)=>{switch(e){case 0:return t.matching_name||t.feature_name||t.address_line1;case 2:return t.name;case 1:return t.properties.name;default:return""}},Sa=(t,e)=>{switch(e){case 0:return t.description;case 2:return t.feature_type==="poi"?t.full_address:t.place_formatted;case 1:return t.properties.place_formatted;default:return""}};function zs(t,e){return`${t}-${e}`}var X,K,Rt,we,Pt,Ar,Ot,Tr,Aa,Rn,lc,Mr,wr,Lr,Bt,_t,ut,kr,fe=class extends W{constructor(){super(...arguments);d(this,Tr);d(this,Rn);this.suggestions=null;d(this,X,null);d(this,K,void 0);d(this,Rt,void 0);d(this,we,void 0);d(this,Pt,void 0);d(this,Ar,null);d(this,Ot,void 0);d(this,Mr,{});d(this,wr,{});d(this,Lr,e=>{let{Results:r}=i(this,K),n=e.target;if(n.dataset.mapboxSuccess){delete n.dataset.mapboxSuccess;return}let s=n.value;this.renderAriaMessage(),r.setAttribute("aria-busy","true"),this.dispatchEvent(new E("input",{lastInput:e.data,inputText:s}))});this.renderAriaMessage=()=>{var r;let e=Ea((r=this.input)==null?void 0:r.value,this.suggestions,this.selectedIndex);qs(e,this.dataset.seed)};this.clearAriaMessage=()=>{qs("",this.dataset.seed)};this.handleSuggest=e=>{if(this.suggestions=e,(!e||e.length===0)&&this.renderAriaMessage(),!e){this.hideResults();return}qe(this,Rn,lc).call(this),e.length&&qe(this,Tr,Aa).call(this);let{Results:r}=i(this,K);r.setAttribute("aria-busy","false")};this.handleError=()=>{let{Results:e}=i(this,K);e.setAttribute("aria-busy","false"),this.hideResults()};d(this,Bt,(e,r)=>j(this,null,function*(){let n=this.input;n&&(n.dataset.mapboxSuccess="true");let s={suggestion:e,selectedIndex:r};this.dispatchEvent(new E("select",s)),this.hideResults()}));d(this,_t,()=>{let e=this.input;delete e.dataset.mapboxSuccess,this.dispatchEvent(new E("focus")),this.renderAriaMessage(),qe(this,Tr,Aa).call(this)});d(this,ut,()=>{document.activeElement!==this.input&&(this.dispatchEvent(new E("blur")),this.clearAriaMessage(),this.hideResults())});this.handleArrowUp=()=>{this.selectedIndex===void 0?this.selectedIndex=this.suggestions.length-1:this.selectedIndex===0?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)};this.handleArrowDown=()=>{this.selectedIndex===void 0?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)};d(this,kr,e=>{var r;if(!!((r=this.suggestions)==null?void 0:r.length)){if(e.key==="ArrowDown"){e.preventDefault(),this.handleArrowDown();return}if(e.key==="ArrowUp"){e.preventDefault(),this.handleArrowUp();return}if(e.key==="Escape"){this.hideResults();return}if(this.selectedIndex!==void 0){if(e.key==="Tab"){i(this,Bt).call(this,this.suggestions[this.selectedIndex],this.selectedIndex);return}if(e.key==="Enter"){e.preventDefault(),i(this,Bt).call(this,this.suggestions[this.selectedIndex],this.selectedIndex);return}}}})}get template(){return Fo}get templateStyle(){return se}get templateUserStyle(){return N(".MapboxSearch",this.theme)}get input(){return i(this,Pt)}set input(e){let r=i(this,Pt);r&&(r.removeEventListener("input",i(this,Lr)),r.removeEventListener("focus",i(this,_t)),r.removeEventListener("blur",i(this,ut)),r.removeEventListener("keydown",i(this,kr)),i(this,X)&&i(this,X).destroy()),e&&(e.addEventListener("input",i(this,Lr)),e.addEventListener("focus",i(this,_t)),e.addEventListener("blur",i(this,ut)),e.addEventListener("keydown",i(this,kr)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",i(this,we)),this.isConnected&&h(this,X,new kn(e,i(this,K).Results,this.popoverOptions))),h(this,Pt,e)}get searchService(){return i(this,Ar)}set searchService(e){h(this,Ar,e)}get selectedIndex(){return i(this,Ot)}set selectedIndex(e){let r=i(this,Ot);h(this,Ot,e);let{ResultsList:n}=i(this,K),s=zs(i(this,we),e);if(e!==void 0?(this.input.setAttribute("aria-activedescendant",s),n.setAttribute("aria-activedescendant",s)):(this.input.removeAttribute("aria-activedescendant"),n.removeAttribute("aria-activedescendant")),r!==e){let o=zs(i(this,we),r),l=n.querySelector(`#${o}`);if(l==null||l.removeAttribute("aria-selected"),l==null||l.setAttribute("tabindex","-1"),e!==void 0){let a=n.querySelector(`#${s}`);a==null||a.setAttribute("aria-selected","true"),a==null||a.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){let{Results:e,ResultsList:r}=i(this,K);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),r.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){let r=this.prepareTemplate(Do);return r.id=zs(i(this,we),e),r}fillItem(e,r,n,s){let o=e.querySelector('[class$="SuggestionIcon"]'),l=e.querySelector('[class$="SuggestionName"]'),a=e.querySelector('[class$="SuggestionDesc"]');this.searchService===0?(o.innerHTML=q(r.accuracy==="street"?"street":"addressMarker",this.theme),o.removeAttribute("aria-hidden")):o.setAttribute("aria-hidden","true"),l.textContent=a.textContent="",l.textContent=Sr(r,this.searchService),a.textContent=Sa(r,this.searchService),n===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(n+1).toString()),e.setAttribute("aria-setsize",s.toString())}get theme(){return i(this,Mr)}set theme(e){h(this,Mr,e),!(!i(this,K)||!e)&&this.updateTemplateUserStyle(N(".MapboxSearch",e))}get popoverOptions(){return i(this,wr)}set popoverOptions(e){h(this,wr,e),i(this,X)&&(i(this,X).options=e,i(this,X).update())}connectedCallback(){super.connectedCallback(),this.dataSeed=this.dataset.seed,h(this,Rt,this.dataset.seed+"-Label"),h(this,we,this.dataset.seed+"-ResultsList"),this.input&&this.input.setAttribute("aria-controls",i(this,we)),h(this,K,re(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:r,Label:n}=i(this,K);n.id=i(this,Rt),r.id=i(this,we),r.setAttribute("aria-labelledby",i(this,Rt)),e.addEventListener("blur",i(this,ut)),!i(this,X)&&this.input&&h(this,X,new kn(this.input,i(this,K).Results,this.popoverOptions)),requestAnimationFrame(()=>{i(this,X)&&i(this,X).update()})}disconnectedCallback(){this.input=null;let{Results:e}=i(this,K);e.removeEventListener("blur",i(this,ut)),i(this,X)&&i(this,X).destroy()}focus(){document.activeElement===this.input?i(this,_t).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){i(this,X)&&i(this,X).update()}};X=new WeakMap,K=new WeakMap,Rt=new WeakMap,we=new WeakMap,Pt=new WeakMap,Ar=new WeakMap,Ot=new WeakMap,Tr=new WeakSet,Aa=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:r}=i(this,K),n=this.input.getBoundingClientRect();r.style.setProperty("--width",`${n.width}px`),r.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0},Rn=new WeakSet,lc=function(){let{ResultsList:e}=i(this,K);if(!this.suggestions||!this.suggestions.length){e.innerHTML="",this.hideResults();return}let r=yo(e);if(this.suggestions.length>r.length)for(let n=r.length;n<this.suggestions.length;n++){let s=this.renderItem(n);r.push(s),s.onmouseenter=()=>{this.selectedIndex=n},s.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(s)}if(this.suggestions.length<r.length)for(let n=this.suggestions.length;n<r.length;n++)r[n].remove();for(let n=0;n<this.suggestions.length;n++){let s=this.suggestions[n],o=r[n];this.fillItem(o,s,n,this.suggestions.length),o.onclick=()=>{i(this,Bt).call(this,s,n)}}},Mr=new WeakMap,wr=new WeakMap,Lr=new WeakMap,Bt=new WeakMap,_t=new WeakMap,ut=new WeakMap,kr=new WeakMap;window.MapboxSearchListbox=fe;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",fe);var cc=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),dc=new Set(["off","on","true","false"]);function Vs(t){let e=t.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function Cr(t){let e=t||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var uc="section-",hc="section-default",pc="section-shipping",mc="section-billing";function Ir(t){let e=Array.from(t.querySelectorAll("[autocomplete]")).filter(n=>{let s=n.tagName.toLowerCase();return s==="input"||s==="select"||s==="textarea"}),r=[];for(let n of e){if(!Eo(n))continue;let s=n.getAttribute("autocomplete")||"";if(!s||dc.has(s))continue;let o=s.toLowerCase().split(" ");if(o.length>3)continue;let l=o[o.length-1];if(!cc.has(l))continue;o.pop();let a=hc;if(o.length){let c=o[o.length-1];c==="shipping"&&(a=pc,o.pop()),c==="billing"&&(a=mc,o.pop())}if(o.length){let c=o[o.length-1];c.startsWith(uc)&&(a=c)}r.push({input:n,section:a,field:l})}return r}function ht(t,e){let r=[],n=[],s=Ir(t),o=null;for(let{input:l,section:a,field:c}of s){let u=r.length-1,p=!1;if(r.length?(n[u]!==a||r[u][c])&&(p=!0):p=!0,p){if(o)break;r.push({[c]:l}),n.push(a),u++}else r[u][c]=l;l===e&&(o=r[u])}return o!=null?o:{}}function Ws(t,e,r){var l;let n=ht(t,e),s=[r.address_line1,r.address_line2,r.address_line3].filter(a=>Boolean(a)).join(", ");pe(n["street-address"],n["address-line2"]?r.address_line1||"":s),pe(n["address-line1"],r.address_line1||""),pe(n["address-line2"],r.address_line2||""),pe(n["address-level1"],r.address_level1||""),pe(n["address-level2"],r.address_level2||""),pe(n["address-level3"],r.address_level3||"");let o=r.country_code||((l=r.metadata)==null?void 0:l.iso_3166_1)||"";if(n.country&&n.country instanceof HTMLSelectElement){let a=n.country.querySelector("option").value;a===""&&(a=n.country.querySelectorAll("option")[1].value);let c=a===a.toUpperCase();pe(n.country,c?o.toUpperCase():o)}else pe(n.country,o);pe(n["country-name"],r.country||""),pe(n["postal-code"],r.postcode||"")}function Pn(t,e){let r=ht(t,e),n={};for(let[s,o]of Object.entries(r))(o==null?void 0:o.value)&&(n[s]=o.value);return n}function Ht(t){let e=[];return t["street-address"]?e.push(t["street-address"]):e.push(t["address-line1"]||""),e.push(t["address-line2"]||""),e.push(t["address-line3"]||""),e.push(t["address-level3"]||""),e.push(t["address-level2"]||""),e.push(t["address-level1"]||""),e.push(t["postal-code"]||""),t["country-name"]?e.push(t["country-name"]):e.push(t.country||""),e.filter(r=>Boolean(r)).map(r=>r.trim()).join(", ")}function Rr(t,e){let r=Vs(e);if(!r)return;let n=Ct(t);Ws(r,e,n);let s=ht(r,e);s["address-line2"]&&!n.address_line2&&s["address-line2"].focus()}function Ta(t){var n;let e={},r=[t.properties.address_line1,t.properties.address_line2,t.properties.address_line3].filter(s=>Boolean(s)).join(", ");return e["street-address"]=r,e["address-line1"]=t.properties.address_line1,e["address-line2"]=t.properties.address_line2,e["address-line3"]=t.properties.address_line3,e["address-level1"]=t.properties.address_level1,e["address-level2"]=t.properties.address_level2,e["address-level3"]=t.properties.address_level3,e.country=(n=t.properties.metadata)==null?void 0:n.iso_3166_1,e["country-name"]=t.properties.country,e["postal-code"]=t.properties.postcode,e}function Ma(t,e){for(let[r,n]of Object.entries(t))if(e[r]!==n)return!0;return!1}var On=t=>t.filter((e,r,n)=>{let s=Sr(e,0);return e.accuracy!=="street"||n.findIndex(o=>s===Sr(o,0))===r}),ce=(t,e,r)=>{let o=r?e||"address-line1":"new-password";t&&(t.autocomplete=o)},Bn=(t,e,r)=>{if(!t||!r)return;ce(t,e,!0);let n={properties:M(g({},r),{address_line1:r.address_line1+" ",postcode:null})};Rr(n,t),ce(t,e,!1),t==null||t.focus()};var Qs=an(La());var ka=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Xs=ka.join(","),Pr=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ca=function(e,r,n){var s=Array.prototype.slice.apply(e.querySelectorAll(Xs));return r&&Pr.call(e,Xs)&&s.unshift(e),s=s.filter(n),s},fc=function(e){return e.contentEditable==="true"},Ia=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return isNaN(r)?fc(e)||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:r},gc=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Ys=function(e){return e.tagName==="INPUT"},vc=function(e){return Ys(e)&&e.type==="hidden"},bc=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return r},yc=function(e,r){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===r)return e[n]},xc=function(e){if(!e.name)return!0;var r=e.form||e.ownerDocument,n=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=yc(s,e.form);return!o||o===e},Ec=function(e){return Ys(e)&&e.type==="radio"},Sc=function(e){return Ec(e)&&!xc(e)},Ac=function(e,r){if(getComputedStyle(e).visibility==="hidden")return!0;var n=Pr.call(e,"details>summary:first-of-type"),s=n?e.parentElement:e;if(Pr.call(s,"details:not([open]) *"))return!0;if(!r||r==="full")for(;e;){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}else if(r==="non-zero-area"){var o=e.getBoundingClientRect(),l=o.width,a=o.height;return l===0&&a===0}return!1},Tc=function(e){if(Ys(e)||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="BUTTON")for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var s=r.children.item(n);if(s.tagName==="LEGEND")return!s.contains(e)}return!0}r=r.parentElement}return!1},Ks=function(e,r){return!(r.disabled||vc(r)||Ac(r,e.displayCheck)||bc(r)||Tc(r))},Ra=function(e,r){return!(!Ks(e,r)||Sc(r)||Ia(r)<0)},Pa=function(e,r){r=r||{};var n=[],s=[],o=Ca(e,r.includeContainer,Ra.bind(null,r));o.forEach(function(a,c){var u=Ia(a);u===0?n.push(a):s.push({documentOrder:c,tabIndex:u,node:a})});var l=s.sort(gc).map(function(a){return a.node}).concat(n);return l},Oa=function(e,r){r=r||{};var n=Ca(e,r.includeContainer,Ks.bind(null,r));return n},Or=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return Pr.call(e,Xs)===!1?!1:Ra(r,e)},Mc=ka.concat("iframe").join(","),Hn=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return Pr.call(e,Mc)===!1?!1:Ks(r,e)};function Ba(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function wc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ba(Object(r),!0).forEach(function(n){Lc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _a=function(){var t=[];return{activateTrap:function(r){if(t.length>0){var n=t[t.length-1];n!==r&&n.pause()}var s=t.indexOf(r);s===-1||t.splice(s,1),t.push(r)},deactivateTrap:function(r){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}}}(),kc=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Cc=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Ic=function(e){return e.key==="Tab"||e.keyCode===9},Ha=function(e){return setTimeout(e,0)},Zs=function(e,r){var n=-1;return e.every(function(s,o){return r(s)?(n=o,!1):!0}),n},Br=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,n):e},Fn=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Fa=function(e,r){var n=(r==null?void 0:r.document)||document,s=wc({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),o={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,a=function(f,v,T){return f&&f[v]!==void 0?f[v]:s[T||v]},c=function(f){return!!(f&&o.containers.some(function(v){return v.contains(f)}))},u=function(f){var v=s[f];if(typeof v=="function"){for(var T=arguments.length,C=new Array(T>1?T-1:0),O=1;O<T;O++)C[O-1]=arguments[O];v=v.apply(void 0,C)}if(!v){if(v===void 0||v===!1)return v;throw new Error("`".concat(f,"` was specified but was not a node, or did not return a node"))}var D=v;if(typeof v=="string"&&(D=n.querySelector(v),!D))throw new Error("`".concat(f,"` as selector refers to no known node"));return D},p=function(){var f=u("initialFocus");if(f===!1)return!1;if(f===void 0)if(c(n.activeElement))f=n.activeElement;else{var v=o.tabbableGroups[0],T=v&&v.firstTabbableNode;f=T||u("fallbackFocus")}if(!f)throw new Error("Your focus-trap needs to have at least one focusable element");return f},m=function(){if(o.tabbableGroups=o.containers.map(function(f){var v=Pa(f),T=Oa(f);if(v.length>0)return{container:f,firstTabbableNode:v[0],lastTabbableNode:v[v.length-1],nextTabbableNode:function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ue=T.findIndex(function(le){return le===O});return D?T.slice(Ue+1).find(function(le){return Or(le)}):T.slice(0,Ue).reverse().find(function(le){return Or(le)})}}}).filter(function(f){return!!f}),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},b=function F(f){if(f!==!1&&f!==n.activeElement){if(!f||!f.focus){F(p());return}f.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=f,kc(f)&&f.select()}},S=function(f){var v=u("setReturnFocus",f);return v||(v===!1?!1:f)},x=function(f){var v=Fn(f);if(!c(v)){if(Br(s.clickOutsideDeactivates,f)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Hn(v)});return}Br(s.allowOutsideClick,f)||f.preventDefault()}},y=function(f){var v=Fn(f),T=c(v);T||v instanceof Document?T&&(o.mostRecentlyFocusedNode=v):(f.stopImmediatePropagation(),b(o.mostRecentlyFocusedNode||p()))},A=function(f){var v=Fn(f);m();var T=null;if(o.tabbableGroups.length>0){var C=Zs(o.tabbableGroups,function(cr){var dr=cr.container;return dr.contains(v)}),O=C>=0?o.tabbableGroups[C]:void 0;if(C<0)f.shiftKey?T=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:T=o.tabbableGroups[0].firstTabbableNode;else if(f.shiftKey){var D=Zs(o.tabbableGroups,function(cr){var dr=cr.firstTabbableNode;return v===dr});if(D<0&&(O.container===v||Hn(v)&&!Or(v)&&!O.nextTabbableNode(v,!1))&&(D=C),D>=0){var Ue=D===0?o.tabbableGroups.length-1:D-1,le=o.tabbableGroups[Ue];T=le.lastTabbableNode}}else{var he=Zs(o.tabbableGroups,function(cr){var dr=cr.lastTabbableNode;return v===dr});if(he<0&&(O.container===v||Hn(v)&&!Or(v)&&!O.nextTabbableNode(v))&&(he=C),he>=0){var vs=he===o.tabbableGroups.length-1?0:he+1,rl=o.tabbableGroups[vs];T=rl.firstTabbableNode}}}else T=u("fallbackFocus");T&&(f.preventDefault(),b(T))},w=function(f){if(Cc(f)&&Br(s.escapeDeactivates,f)!==!1){f.preventDefault(),l.deactivate();return}if(Ic(f)){A(f);return}},U=function(f){if(!Br(s.clickOutsideDeactivates,f)){var v=Fn(f);c(v)||Br(s.allowOutsideClick,f)||(f.preventDefault(),f.stopImmediatePropagation())}},H=function(){if(!!o.active)return _a.activateTrap(l),o.delayInitialFocusTimer=s.delayInitialFocus?Ha(function(){b(p())}):b(p()),n.addEventListener("focusin",y,!0),n.addEventListener("mousedown",x,{capture:!0,passive:!1}),n.addEventListener("touchstart",x,{capture:!0,passive:!1}),n.addEventListener("click",U,{capture:!0,passive:!1}),n.addEventListener("keydown",w,{capture:!0,passive:!1}),l},nt=function(){if(!!o.active)return n.removeEventListener("focusin",y,!0),n.removeEventListener("mousedown",x,!0),n.removeEventListener("touchstart",x,!0),n.removeEventListener("click",U,!0),n.removeEventListener("keydown",w,!0),l};return l={activate:function(f){if(o.active)return this;var v=a(f,"onActivate"),T=a(f,"onPostActivate"),C=a(f,"checkCanFocusTrap");C||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,v&&v();var O=function(){C&&m(),H(),T&&T()};return C?(C(o.containers.concat()).then(O,O),this):(O(),this)},deactivate:function(f){if(!o.active)return this;clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,nt(),o.active=!1,o.paused=!1,_a.deactivateTrap(l);var v=a(f,"onDeactivate"),T=a(f,"onPostDeactivate"),C=a(f,"checkCanReturnFocus");v&&v();var O=a(f,"returnFocus","returnFocusOnDeactivate"),D=function(){Ha(function(){O&&b(S(o.nodeFocusedBeforeActivation)),T&&T()})};return O&&C?(C(S(o.nodeFocusedBeforeActivation)).then(D,D),this):(D(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,nt(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,m(),H(),this)},updateContainerElements:function(f){var v=[].concat(f).filter(Boolean);return o.containers=v.map(function(T){return typeof T=="string"?n.querySelector(T):T}),o.active&&m(),this}},l.updateContainerElements(e),l};var Da=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new ne;this.autofillSessionEnabled=!1;this.detectBrowserAutofillEnabled=!1}},_=new Da;Object.defineProperty(_,"autofillSessionToken",{configurable:!1,writable:!1});var Rc=$(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),_r,ae,pt,Hr,mt=class extends W{constructor(){super(...arguments);d(this,_r,!1);d(this,ae,void 0);d(this,pt,void 0);d(this,Hr,{})}get template(){return Rc}get templateStyle(){return se}get templateUserStyle(){return N(".MapboxAddressConfirmation",this.theme)}get theme(){return i(this,Hr)}set theme(e){if(h(this,Hr,e),!i(this,ae)||!e)return;this.updateTemplateUserStyle(N(".MapboxAddressConfirmation",e));let{ContentFeature:r,ContentNoFeature:n}=i(this,ae);r.theme=e,n.theme=e}connectedCallback(){super.connectedCallback(),h(this,ae,re(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=i(this,ae);e.setAttribute("aria-hidden","true");let r=this.theme;if(r){let{ContentFeature:n,ContentNoFeature:s}=i(this,ae);n.theme=r,s.theme=r}}disconnectedCallback(){h(this,pt,null)}hide(){var r;if(h(this,_r,!1),!i(this,ae))return;let{MapboxAddressConfirmation:e}=i(this,ae);e.setAttribute("aria-hidden","true"),(r=i(this,pt))==null||r.deactivate(),Qs.default.off()}show(e,r,n){return j(this,null,function*(){var b;if(!i(this,ae))return{type:"cancel"};let{MapboxAddressConfirmation:s,ContentFeature:o,ContentNoFeature:l}=i(this,ae),{accessToken:a,minimap:c=!1,theme:u,footer:p}=r;this.theme=u,n?(o.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),o.minimap=c,o.accessToken=a,o.footer=p,o.update(n,e)):(o.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),h(this,_r,!0),s.removeAttribute("aria-hidden"),Qs.default.on();let m=n?o:l;return h(this,pt,Fa(s,{fallbackFocus:m,escapeDeactivates:()=>(this.hide(),!0)})),(b=i(this,pt))==null||b.activate(),new Promise(S=>{let x=m,y=A=>{x.removeEventListener("result",y);let w=A.detail;this.hide(),S(w==="change"?{type:"change",feature:n}:{type:w})};x.addEventListener("result",y)})})}tryShow(e,r){return j(this,null,function*(){if(!i(this,ae))return{type:"cancel"};let{accessToken:n,options:s={}}=r,o=new Is(g({accessToken:n},s)),l=Ht(e),c=(yield o.validate(l,{sessionToken:_.autofillSessionToken})).features[0];if(c){let u=m=>m.properties.match_code.confidence===Ps.exact,{skipConfirmModal:p=u}=r;if(p(c))return{type:"nochange"}}return yield this.show(e,r,c)})}};_r=new WeakMap,ae=new WeakMap,pt=new WeakMap,Hr=new WeakMap;window.MapboxAddressConfirmation=mt;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",mt);var Js=new mt;function Dn(r){return j(this,arguments,function*(t,e={}){var c;let{sections:n=[]}=e;Js.parentNode||document.body.appendChild(Js);let s={type:"nochange"},o=Cr(t),l=Ir(t),a=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let u of o){if(n.length){let y=l.find(A=>A.input===u);if(!y||!n.includes(y.section))continue}let p=Pn(t,u),m=a.find(y=>y.input===u),b=m==null?void 0:m.autofillHost;if(b){let y=b.retrieveFeature;if(y){let A=Ta(y);if(!Ma(p,A))continue}}let S=e.accessToken||_.accessToken,x=yield Js.tryShow(p,M(g({},e),{accessToken:S}));if(x.type==="change"){let y=ht(t,u);if(((c=y["address-line2"])==null?void 0:c.value)&&(x.feature.properties.address_line2=y["address-line2"].value),m)b.simulateRetrieve(x.feature);else{u.dataset.mapboxSuccess="true";let A=Ct(x.feature);Ws(t,u,A)}}x.type==="change"&&s.type!=="cancel"&&(s=x),x.type==="cancel"&&(s=x)}return s})}function Nn(t,e,r,n,s){if(e){let o=$(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[l,a]=Array.from(o.querySelectorAll("span > span"));if(r&&n)l.textContent=r,a.textContent=n;else{let c=e.split(",");l.textContent=c[0].trim(),a.textContent=c.slice(1).join(",").trim()}if(!s){if(t["address-line2"]){let c=document.createElement("span");c.textContent=t["address-line2"],o.insertBefore(c,a),o.insertBefore(document.createElement("br"),a)}if(t["address-line3"]){let c=document.createElement("span");c.textContent=t["address-line3"],o.insertBefore(c,a),o.insertBefore(document.createElement("br"),a)}}return o}else{let o=t["street-address"]||t["address-line1"]||"",l=t["address-line2"],a=t["address-line3"],c=[t["address-level4"]||"",t["address-level3"]||"",t["address-level2"]||"",`${t["address-level1"]||""} ${t["postal-code"]||""}`,t.country||t["country-name"]||""].filter(Boolean).join(", "),p=[o,l,a,c].filter(Boolean).map(b=>`<span>${b}</span>`).join("<br />");return $(`
        <span>${p}</span>
      `)}}function jn(t,e,r,n){return j(this,null,function*(){if(!r)return;let s=Vs(t),o=Object.values(ht(s,t));if(!e.detail.elements.some(b=>o.includes(b)))return;let l=Ir(s),c=l.find(b=>b.input===t).section,u=Array.from(new Set(l.filter(b=>e.detail.elements.includes(b.input)).map(b=>b.section)));if(!u.includes(c))return;let p=typeof r=="object"&&r.sections||[];if(p.length&&!p.some(b=>u.includes(b)))return;let m=typeof r=="object"?r:{};m=M(g({},m),{accessToken:n,sections:[c]}),yield Dn(s,m)})}var Pc="https://contribute-api.mapbox.com/v1",Oc="https://contribute-api-staging.tilestream.net/v1",Bc="edit-suggestion";function $n(t,e){if(!_.feedbackEnabled)return;let r=window.location.hostname,s=`${$o(r)||Go(r)?Oc:Pc}/${Bc}/address?access_token=${t}`,{originalCoordinate:o,originalAddress:l,changes:a}=e,c={action:"update",reason:"incorrect_address",location:{longitude:o[0],latitude:o[1]},userEmail:"no-reply-autofill@mapbox.com",changes:a,placeName:l};fetch(s,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${ct}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(c)})}var _c=$(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),Le,Fr,Ft,Dr,Nr,jr,$r,Gr,eo=class extends W{constructor(){super(...arguments);d(this,Le,void 0);d(this,Fr,{});this.minimap=!1;d(this,Ft,void 0);d(this,Dr,void 0);this.update=(e,r)=>{var a;h(this,Ft,e),h(this,Dr,r);let{ModalMap:n,Minimap:s,ModalAddressApprove:o}=i(this,Le);if(this.minimap){if(n.removeAttribute("aria-hidden"),s.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:c,theme:u,mapStyleMode:p,satelliteToggle:m}=this.minimap;c&&(s.defaultMapStyle=this.minimap.defaultMapStyle),u&&(s.theme=this.minimap.theme),p&&(s.mapStyleMode=p),m!==void 0&&(s.satelliteToggle=m)}s.feature=e}else n.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;o.innerHTML="",o.appendChild(Nn(r,l,e.properties.feature_name,e.properties.description,((a=e.properties.place_type)==null?void 0:a[0])==="secondary_address"))};d(this,Nr,()=>{this.dispatchEvent(new E("result","cancel"))});this.approve=()=>{this.dispatchEvent(new E("result","change"))};this.reject=()=>{this.dispatchEvent(new E("result","nochange")),$n(this.accessToken,{originalCoordinate:i(this,Ft).geometry.coordinates,originalAddress:i(this,Ft).properties.full_address,changes:{address:Ht(i(this,Dr))}})};d(this,jr,Te());d(this,$r,Te());d(this,Gr,Te())}get template(){return _c}get templateStyle(){return se}get templateUserStyle(){return N(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return i(this,Fr)}set theme(e){if(h(this,Fr,e),!i(this,Le)||!e)return;this.updateTemplateUserStyle(N(".MapboxAddressConfirmationFeature",e));let{IconQuestion:r,IconClose:n}=i(this,Le);r.innerHTML=q("question",e),n.innerHTML=q("close",e)}set footer(e){if(e===void 0)return;let r=this.querySelector(".ModalFooter");typeof e=="string"?(r.textContent=e,r.removeAttribute("aria-hidden")):e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),h(this,Le,re(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:r,IconClose:n,ButtonApprove:s,ButtonReject:o,ModalAddressApprove:l}=i(this,Le);e.setAttribute("aria-labelledby",i(this,$r)),e.setAttribute("aria-describedby",i(this,Gr)),n.setAttribute("aria-controls",i(this,jr)),e.id=i(this,jr),r.id=i(this,$r),l.id=i(this,Gr);let a=Array.from(this.querySelectorAll('[role="button"]'));for(let u of a)u.addEventListener("keydown",Cn);n.addEventListener("click",i(this,Nr)),s.addEventListener("click",this.approve),o.addEventListener("click",this.reject);let c=this.theme;if(c){let{IconQuestion:u,IconClose:p}=i(this,Le);u.innerHTML=q("question",c),p.innerHTML=q("close",c)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:r}=i(this,Le);e.removeEventListener("click",i(this,Nr)),r.removeEventListener("click",this.approve)}};Le=new WeakMap,Fr=new WeakMap,Ft=new WeakMap,Dr=new WeakMap,Nr=new WeakMap,jr=new WeakMap,$r=new WeakMap,Gr=new WeakMap;window.MapboxAddressConfirmationFeature=eo;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",eo);var Hc=$(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),ke,Ur,qr,zr,Vr,Wr,to=class extends W{constructor(){super(...arguments);d(this,ke,void 0);d(this,Ur,{});this.update=e=>{let{ModalAddress:r}=i(this,ke);r.innerHTML="",r.appendChild(Nn(e))};d(this,qr,()=>{this.dispatchEvent(new E("result","cancel"))});this.reject=()=>{this.dispatchEvent(new E("result","nochange"))};d(this,zr,Te());d(this,Vr,Te());d(this,Wr,Te())}get template(){return Hc}get templateStyle(){return se}get templateUserStyle(){return N(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return i(this,Ur)}set theme(e){if(h(this,Ur,e),!i(this,ke)||!e)return;this.updateTemplateUserStyle(N(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:r,IconClose:n}=i(this,ke);r.innerHTML=q("question",e),n.innerHTML=q("close",e)}connectedCallback(){super.connectedCallback(),h(this,ke,re(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:r,IconClose:n,ModalAddress:s,ButtonReject:o}=i(this,ke);e.setAttribute("aria-labelledby",i(this,Vr)),e.setAttribute("aria-describedby",i(this,Wr)),n.setAttribute("aria-controls",i(this,zr)),e.id=i(this,zr),r.id=i(this,Vr),s.id=i(this,Wr);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let c of l)c.addEventListener("keydown",Cn);n.addEventListener("click",i(this,qr)),o.addEventListener("click",this.reject);let a=this.theme;if(a){let{IconQuestion:c,IconClose:u}=i(this,ke);c.innerHTML=q("question",a),u.innerHTML=q("close",a)}}disconnectedCallback(){let{IconClose:e,ButtonReject:r}=i(this,ke);e.removeEventListener("click",i(this,qr)),r.removeEventListener("click",this.reject)}};ke=new WeakMap,Ur=new WeakMap,qr=new WeakMap,zr=new WeakMap,Vr=new WeakMap,Wr=new WeakMap;window.MapboxAddressConfirmationNoFeature=to;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",to);var Na='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}';var Gn="browser-autofilled",ro=[];function Dc(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:ro}})),ro=[]}var Nc=Bs(Dc,5);function ja(t){t.hasAttribute(Gn)||(t.setAttribute(Gn,""),ro.push(t),Nc())}function $a(t){!t.hasAttribute(Gn)||t.removeAttribute(Gn)}function jc(t){t.animationName==="onbrowserautofillstart"?ja(t.target):$a(t.target)}function $c(t){let e=t.target;e.nodeName.toLowerCase()!=="select"&&!t.simulated&&!(t instanceof E)&&(t.inputType==="insertReplacementText"||!("data"in t))?ja(e):$a(e)}function Un(){_.detectBrowserAutofillEnabled||(_.detectBrowserAutofillEnabled=!0,So(Na),document.addEventListener("animationstart",jc,!0),document.addEventListener("input",$c,!0))}var io=(t,e)=>{if(typeof t=="string")if(t==="ip"){let r=e==null?void 0:e.get("ip-proximity");return r&&typeof r=="string"?r.split(",").map(parseFloat):[999,999]}else return t.split(",").map(Number);else return B.convert(t).toArray()},Gc=t=>{let e={};return t.bbox&&(typeof t.bbox=="string"?e.bbox=t.bbox.split(",").map(Number):e.bbox=Y.convert(t.bbox).toFlatArray()),t.proximity&&(e.proximity=io(t.proximity)),t.country&&(e.country=t.country.split(",")),t.language&&(e.language=t.language.split(",")),t.types&&(typeof t.types=="string"?e.types=t.types.split(","):e.types=Array.from(t.types)),t.limit&&(typeof t.limit=="string"?e.limit=parseInt(t.limit):e.limit=t.limit),e},Uc=(t,e)=>{let r={};return t.bbox&&(typeof t.bbox=="string"?r.bbox=t.bbox.split(",").map(Number):r.bbox=Y.convert(t.bbox).toFlatArray()),t.proximity&&(r.proximity=io(t.proximity,e)),t.country&&(r.country=t.country.split(",")),t.language&&(r.language=t.language.split(",")),t.types&&(typeof t.types=="string"?r.types=t.types.split(","):r.types=Array.from(t.types)),t.limit&&(typeof t.limit=="string"?r.limit=parseInt(t.limit):r.limit=t.limit),typeof t.autocomplete=="boolean"&&(r.autocomplete=t.autocomplete),t.worldview&&(r.worldview=t.worldview),t.permanent&&(r.permanent=t.permanent),r},qc=(t,e)=>{let r={};return t.bbox&&(typeof t.bbox=="string"?r.bbox=t.bbox.split(",").map(Number):r.bbox=Y.convert(t.bbox).toFlatArray()),t.proximity&&(r.proximity=io(t.proximity,e)),t.country&&(r.country=t.country.split(",")),t.language&&(r.language=t.language.split(",")),t.limit&&(typeof t.limit=="string"?r.limit=parseInt(t.limit):r.limit=t.limit),t.streets!==void 0&&t.streets!==null&&(typeof t.streets=="string"?r.streets=t.streets==="true":r.streets=t.streets),r},Ga=(t,e,r)=>{switch(e){case 2:return Gc(t);case 1:return Uc(t,r);case 0:return qc(t,r)}},zc=t=>({suggestionIds:t.map(e=>e.mapbox_id||""),suggestionNames:t.map(e=>e.feature_type==="poi"?[e.name,e.full_address].filter(Boolean).join(", "):e.full_address?e.full_address:e.name),suggestionTypes:t.map(e=>e.feature_type||""),suggestionSources:t.map(()=>"mapbox")}),Vc=t=>({suggestionIds:t.map(e=>e.properties.mapbox_id||e.id||""),suggestionNames:t.map(e=>e.properties.full_address||""),suggestionTypes:t.map(e=>e.properties.feature_type||""),suggestionSources:t.map(()=>"mapbox")}),Wc=t=>({suggestionIds:t.map(e=>e.mapbox_id||""),suggestionNames:t.map(e=>e.full_address||""),suggestionTypes:t.map(e=>{var r;return((r=e.place_type)==null?void 0:r[0])||""}),suggestionSources:t.map(()=>"mapbox")}),Ua=(t,e)=>{switch(e){case 2:return zc(t);case 1:return Vc(t);case 0:return Wc(t)}},no=(t,e)=>{switch(t){case 2:return"search/searchbox/v1/suggest";case 1:return`search/geocode/v6/${/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/.test(e)?"reverse":"forward"}`;case 0:return"autofill/v1/suggest"}};var qn,zn,Qe,Xr,Vn,Je,Dt,Nt,jt,$t,Wn,ft,Ce,Xn,Yn,Kn,Gt,Zn,Qn,Jn,es,ts,rs,Ut,et,qt,He=class{constructor(e){d(this,qn,"https://api.mapbox.com");d(this,zn,"events/v2");d(this,Qe,void 0);d(this,Xr,void 0);d(this,Vn,navigator.language||null);d(this,Je,[]);d(this,Dt,"");d(this,Nt,0);d(this,jt,!0);d(this,$t,1e3);d(this,Wn,100);d(this,ft,void 0);d(this,Ce,void 0);this.start=(e,r,n,s)=>{h(this,Qe,r.accessToken);let o=i(this,Gt).call(this,"search.start",{queryString:e,options:r,map:n,responseHeaders:s});!o||i(this,qt).call(this,o)};this.input=(e,r,n,s,o)=>{if(h(this,Qe,n.accessToken),i(this,jt)&&(this.start(e,n,s,o),h(this,jt,!1)),!r)return;let l=i(this,Gt).call(this,"search.keystroke",{lastInput:r,queryString:e,options:n,map:s,responseHeaders:o});!l||i(this,qt).call(this,l)};this.select=(e,r,n,s,o,l)=>{h(this,Qe,s.accessToken);let a=i(this,Gt).call(this,"search.select",{queryString:e,selectedIndex:r,suggestions:n,options:s,map:o,responseHeaders:l});!a||a.resultIndex===i(this,Nt)&&a.queryString===i(this,Dt)||a.resultIndex===-1||(h(this,Nt,a.resultIndex),h(this,Dt,a.queryString),i(this,qt).call(this,a))};this.clear=()=>{h(this,jt,!0),h(this,Dt,""),h(this,Nt,0),i(this,et).call(this)};d(this,Xn,e=>{let r=`${i(this,qn)}/${i(this,zn)}?access_token=${i(this,Qe)}`,n=i(this,Yn).call(this,e);try{fetch(r,n)}catch(s){i(this,Kn).call(this,s)}});d(this,Yn,e=>(Array.isArray(e)||(e=[e]),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));d(this,Kn,e=>{console.log(e)});d(this,Gt,(e,r)=>{if(e==="search.select"&&!(typeof r.selectedIndex=="number"||r.suggestions)||e==="search.keystroke"&&!r.lastInput)return null;let n=Ga(r.options,i(this,Ce),r.responseHeaders),s=i(this,Zn).call(this,e,r,n);return e==="search.keystroke"?i(this,Qn).call(this,s,r,n):e==="search.select"&&i(this,Jn).call(this,s,r,n),i(this,rs).call(this,s)?s:null});d(this,Zn,(e,r,n)=>{let s={event:e,version:i(this,ts).call(this,e),created:+new Date,sessionIdentifier:r.options.sessionToken,userAgent:i(this,Xr),keyboardLocale:i(this,Vn),queryString:r.queryString};if(n&&(s=g(g({},s),n)),e==="search.start")for(let o of["streets","permanent"])delete s[o];if(r.map){let o=r.map.getZoom()||void 0,l=r.map.getCenter();s=M(g({},s),{mapZoom:o,mapCenterLat:l.lat,mapCenterLng:l.lng})}return s});d(this,Qn,(e,r,n)=>{switch(i(this,Ce)){case 0:n.streets&&(e.streets=n.streets);break;case 1:n.permanent&&(e.permanent=n.permanent);break}e.path=no(i(this,Ce),r.queryString),e.lastAction=r.lastInput});d(this,Jn,(e,r,n)=>{switch(i(this,Ce)){case 0:n.streets&&(e.streets=n.streets);break;case 1:n.permanent&&(e.permanent=n.permanent);break}e.path=no(i(this,Ce),r.queryString);let{selectedIndex:s,suggestions:o}=r;if(o&&o.length>0){let l=Ua(o,i(this,Ce));e.resultIndex=s,e.resultPlaceName=l.suggestionNames[s],e.resultId=l.suggestionIds[s],e.resultId.startsWith("dXJuOm1ie")&&(e.resultMapboxId=e.resultId),e.suggestionIds=l.suggestionIds,e.suggestionNames=l.suggestionNames,e.suggestionTypes=l.suggestionTypes,e.suggestionSources=l.suggestionSources}});d(this,es,()=>`mapbox.${Yo.split("/")[1]}.${ct}.${navigator.userAgent}`);d(this,ts,e=>["search.keystroke","search.select"].includes(e)?"2.2":"2.0");d(this,rs,e=>{if(!e||!e.event)return!1;let r=["event","created","sessionIdentifier","queryString"],n=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],o=e.event;return o==="search.start"?i(this,Ut).call(this,e,r):o==="search.keystroke"?i(this,Ut).call(this,e,n):o==="search.select"?i(this,Ut).call(this,e,s):!0});d(this,Ut,(e,r)=>r.every(n=>n==="queryString"?typeof e[n]=="string"&&e[n].length>0:e[n]!==void 0));d(this,et,()=>{i(this,Je).length>0&&i(this,Qe)&&(i(this,Xn).call(this,i(this,Je)),h(this,Je,[])),i(this,ft)&&clearTimeout(i(this,ft)),i(this,$t)&&h(this,ft,setTimeout(i(this,et),i(this,$t)))});d(this,qt,(e,r)=>{i(this,Je).push(e),(i(this,Je).length>=i(this,Wn)||r)&&i(this,et).call(this)});this.remove=()=>{i(this,et).call(this)};h(this,Ce,e),h(this,Xr,i(this,es).call(this)),h(this,ft,setTimeout(i(this,et),i(this,$t)))}};qn=new WeakMap,zn=new WeakMap,Qe=new WeakMap,Xr=new WeakMap,Vn=new WeakMap,Je=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,jt=new WeakMap,$t=new WeakMap,Wn=new WeakMap,ft=new WeakMap,Ce=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Kn=new WeakMap,Gt=new WeakMap,Zn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,es=new WeakMap,ts=new WeakMap,rs=new WeakMap,Ut=new WeakMap,et=new WeakMap,qt=new WeakMap;var Fe,Q,J,L,gt,De,zt,Yr,Kr,Vt,Zr,Qr,Jr,ei,ti,ri,ii,is,Wt=class extends W{constructor(){super(...arguments);d(this,Fe,new gr);d(this,Q,new We(i(this,Fe)));d(this,J,void 0);d(this,L,new fe);d(this,gt,new He(0));d(this,De,void 0);this.options={};this.confirmOnBrowserAutofill=!1;d(this,zt,!1);d(this,Yr,e=>{let r=(e==null?void 0:e.suggestions)?On(e.suggestions):null;i(this,L).handleSuggest(r),this.dispatchEvent(new E("suggest",e))});d(this,Kr,e=>{i(this,L).handleError(),this.dispatchEvent(new E("suggesterror",e))});d(this,Vt,e=>{var n;if(this.dispatchEvent(new E("retrieve",e)),this.retrieveFeature=(n=e.features)==null?void 0:n[0],!i(this,J))return;let r=e;!r||!r.features||!r.features.length||Rr(r.features[0],i(this,J))});d(this,Zr,()=>{var e;try{let r=(e=this.querySelector("input"))!=null?e:null;h(this,J,r),i(this,L).input=r}catch(r){h(this,J,null),i(this,L).input=null,console.error(r.message||r)}});d(this,Qr,new MutationObserver(i(this,Zr)));d(this,Jr,e=>{i(this,L).blur(),jn(i(this,J),e,this.confirmOnBrowserAutofill,this.accessToken)});this.retrieveFeature=null;this.interceptSearch=null;d(this,ei,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:r,inputText:n}=e.detail,s=this.browserAutofillEnabled===!0&&(n==null?void 0:n.length)<=2;if(ce(i(this,J),i(this,De),s),!n){i(this,is).call(this);return}let o=this.interceptSearch&&this.interceptSearch(n),l=this.interceptSearch?o:n;if(this.interceptSearch&&!o||(l==null?void 0:l.length)<=2){i(this,L).handleSuggest(null);return}i(this,Q).suggest(l,this.options),i(this,gt).input(l,r,M(g({},this.options),{sessionToken:i(this,Q).sessionToken,accessToken:this.accessToken}),null,i(this,Fe).responseHeaders)});d(this,ti,e=>{let{suggestion:r,selectedIndex:n}=e.detail;r.accuracy!=="street"?(ce(i(this,J),i(this,De),!0),i(this,Q).retrieve(r,this.options),i(this,gt).select(this.input.value,n,i(this,L).suggestions,M(g({},this.options),{sessionToken:i(this,Q).sessionToken,accessToken:this.accessToken}),null,i(this,Fe).responseHeaders)):Bn(i(this,J),i(this,De),r)});d(this,ri,()=>{ce(i(this,J),i(this,De),!0),i(this,Q).abort()});d(this,ii,()=>{var r;let e=this.browserAutofillEnabled===!0&&((r=i(this,J).value)==null?void 0:r.length)<=2;ce(i(this,J),i(this,De),e)});d(this,is,()=>{i(this,L).handleSuggest(null),i(this,gt).clear()})}get accessToken(){return i(this,Fe).accessToken}set accessToken(e){i(this,Fe).accessToken=e}get input(){return i(this,J)}get theme(){return i(this,L).theme}set theme(e){i(this,L).theme=e}get popoverOptions(){return i(this,L).popoverOptions}set popoverOptions(e){i(this,L).popoverOptions=e}get browserAutofillEnabled(){return i(this,zt)}set browserAutofillEnabled(e){h(this,zt,e)}connectedCallback(){var r;super.connectedCallback(),_.autofillSessionEnabled=!0,i(this,Q).sessionToken=_.autofillSessionToken.id,i(this,L).autofillHost=this,i(this,L).searchService=0;let e=(r=this.querySelector("input"))!=null?r:null;i(this,Qr).observe(this,{subtree:!0,childList:!0}),i(this,Zr).call(this),i(this,L).addEventListener("input",i(this,ei)),i(this,L).addEventListener("select",i(this,ti)),i(this,L).addEventListener("blur",i(this,ri)),i(this,L).addEventListener("focus",i(this,ii)),i(this,Q).addEventListener("suggest",i(this,Yr)),i(this,Q).addEventListener("suggesterror",i(this,Kr)),i(this,Q).addEventListener("retrieve",i(this,Vt)),document.body.appendChild(i(this,L)),e&&(e.insertAdjacentElement("beforebegin",Ke(i(this,L).dataSeed)),In(e),h(this,De,e.autocomplete)),Un(),window.addEventListener("browserautofill",i(this,Jr))}disconnectedCallback(){i(this,L).remove(),i(this,L).removeEventListener("input",i(this,ei)),i(this,L).removeEventListener("select",i(this,ti)),i(this,L).removeEventListener("blur",i(this,ri)),i(this,L).removeEventListener("focus",i(this,ii)),i(this,Q).removeEventListener("suggest",i(this,Yr)),i(this,Q).removeEventListener("suggesterror",i(this,Kr)),i(this,Q).removeEventListener("retrieve",i(this,Vt)),i(this,gt).remove(),i(this,Qr).disconnect(),window.removeEventListener("browserautofill",i(this,Jr))}attributeChangedCallback(e,r,n){if(e==="access-token"){i(this,Fe).accessToken=n;return}if(e==="browser-autofill-enabled"){h(this,zt,Boolean(n));return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n}focus(){i(this,L).focus()}simulateRetrieve(e){let r=this.input;r&&(r.dataset.mapboxSuccess="true"),i(this,L).hideResults();let n={type:"FeatureCollection",features:[e],url:""};i(this,Vt).call(this,n)}};Fe=new WeakMap,Q=new WeakMap,J=new WeakMap,L=new WeakMap,gt=new WeakMap,De=new WeakMap,zt=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Vt=new WeakMap,Zr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,ei=new WeakMap,ti=new WeakMap,ri=new WeakMap,ii=new WeakMap,is=new WeakMap,Wt.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity","streets"];window.MapboxAddressAutofill=Wt;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",Wt);var za=an(so());var Xc={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},ss={placeholder:Xc};var Yc=9,ge,vt,ee,de,ve,I,bt,os,Kc,yt,ni,si,oi,tt,ai,li,Xt,ci,di,Ne,ui,hi,Yt=class extends W{constructor(){super(...arguments);d(this,os);d(this,ge,void 0);d(this,vt,new Cs({}));d(this,ee,new We(i(this,vt)));d(this,de,null);d(this,ve,void 0);d(this,I,new fe);d(this,bt,new He(2));this.options={};d(this,yt,void 0);d(this,ni,e=>{i(this,Ne).call(this),i(this,I).handleSuggest((e==null?void 0:e.suggestions)||null),this.dispatchEvent(new E("suggest",e))});d(this,si,e=>{i(this,Ne).call(this),i(this,I).handleError(),this.dispatchEvent(new E("suggesterror",e))});d(this,oi,e=>{i(this,Ne).call(this),this.dispatchEvent(new E("retrieve",e));let r=e;if(!r||!r.features.length)return;let n=Ct(r.features[0]);i(this,ve).value=n.name;let s=i(this,de);if(!s)return;let o=r.features[0];if(!o)return;let l=o.properties.feature_type,a=o.properties.bbox;if(a)s.flyTo(bn(s,Y.convert(a).toFlatArray()));else{let c=o.geometry.coordinates,u=yn(l);s.flyTo({center:c,zoom:u,speed:vr})}this.marker&&this.mapboxgl&&i(this,li).call(this,o)});d(this,tt,void 0);d(this,ai,()=>{i(this,tt)&&(i(this,tt).remove(),h(this,tt,null))});d(this,li,e=>{if(!i(this,de)||(i(this,ai).call(this),!e))return;let n=g(g({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);h(this,tt,new this.mapboxgl.Marker(n)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&i(this,tt).setLngLat(e.geometry.coordinates).addTo(i(this,de))});this.interceptSearch=null;d(this,Xt,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:r,inputText:n}=e.detail;if(!n){i(this,ui).call(this);return}let s=this.interceptSearch&&this.interceptSearch(n),o=this.interceptSearch?s:n;if(this.interceptSearch&&!s){i(this,I).hideResults();return}i(this,ee).suggest(o,this.options),i(this,bt).input(o,r,M(g({},this.options),{sessionToken:i(this,ee).sessionToken,accessToken:this.accessToken}),i(this,de)),i(this,Ne).call(this,!0)});d(this,ci,e=>{let{suggestion:r,selectedIndex:n}=e.detail;i(this,ee).retrieve(r,this.options),i(this,bt).select(this.value,n,i(this,I).suggestions,M(g({},this.options),{sessionToken:i(this,ee).sessionToken,accessToken:this.accessToken}),i(this,de)),i(this,Ne).call(this,!0)});d(this,di,()=>{i(this,ee).abort()});d(this,Ne,(e=!1)=>{e?(i(this,ge).ClearBtn.style.display="none",i(this,ge).LoadingIcon.style.display="block"):(i(this,ge).LoadingIcon.style.display="none",i(this,ge).ClearBtn.style.display=this.value?"block":"none")});d(this,ui,()=>{this.value="",i(this,Ne).call(this),i(this,li).call(this,null),i(this,I).handleSuggest(null),i(this,bt).clear(),i(this,ee).incrementSession(),this.dispatchEvent(new E("clear"))});this.marker=!0;d(this,hi,()=>{let e=i(this,de),r=g({},this.options);if(e.getZoom()<=Yc){delete r.proximity,this.options=r;return}let n=e.getCenter();this.options=M(g({},r),{proximity:n})})}get accessToken(){return i(this,vt).accessToken}set accessToken(e){i(this,vt).accessToken=e}get value(){return i(this,ve).value}set value(e){i(this,ve).value=e||""}get input(){return i(this,ve)}get template(){return No}get templateStyle(){return se}get templateUserStyle(){return N(".SearchBox",i(this,I).theme)}get theme(){return i(this,I).theme}set theme(e){if(i(this,I).theme=e,!i(this,ge)||!e)return;this.updateTemplateUserStyle(N(".SearchBox",e)),i(this,I).updatePopover();let{SearchIcon:r}=i(this,ge);r.innerHTML=q("search",e)}get popoverOptions(){return i(this,I).popoverOptions}set popoverOptions(e){i(this,I).popoverOptions=e}get placeholder(){return i(this,yt)||qe(this,os,Kc).call(this)}set placeholder(e){h(this,yt,e),i(this,ve)&&(i(this,ve).placeholder=this.placeholder,i(this,ve).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),h(this,ge,re(this,{SearchBox:".SearchBox",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=g({},this.theme);let{Input:e,ClearBtn:r}=i(this,ge);h(this,ve,e),i(this,I).input=e,i(this,I).searchService=2,i(this,I).addEventListener("input",i(this,Xt)),i(this,I).addEventListener("select",i(this,ci)),i(this,I).addEventListener("blur",i(this,di)),i(this,ee).addEventListener("suggest",i(this,ni)),i(this,ee).addEventListener("suggesterror",i(this,si)),i(this,ee).addEventListener("retrieve",i(this,oi)),r.addEventListener("click",i(this,ui)),this.placeholder=i(this,yt),this.parentElement.appendChild(i(this,I)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Ke(i(this,I).dataSeed)))}disconnectedCallback(){i(this,I).remove(),i(this,I).input=null,i(this,I).removeEventListener("input",i(this,Xt)),i(this,I).removeEventListener("select",i(this,ci)),i(this,I).removeEventListener("blur",i(this,di)),i(this,ee).removeEventListener("suggest",i(this,ni)),i(this,ee).removeEventListener("suggesterror",i(this,si)),i(this,ee).removeEventListener("retrieve",i(this,oi)),i(this,bt).remove()}attributeChangedCallback(e,r,n){if(e==="access-token"){i(this,vt).accessToken=n;return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}if(e==="placeholder"){this.placeholder=n;return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n,s==="language"&&(this.placeholder=i(this,yt))}focus(){i(this,I).focus()}search(e){this.value=e;let r={lastInput:e,inputText:e};i(this,Xt).call(this,new E("input",r))}bindMap(e){i(this,de)&&i(this,de).off("moveend",i(this,hi)),e&&e.on("moveend",i(this,hi)),h(this,de,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let r=document.createElement("div");return r.className="mapboxgl-ctrl",r.style.width="300px",r.appendChild(this),r}onRemove(){this.remove(),this.unbindMap(),i(this,ai).call(this)}getDefaultPosition(){return"top-right"}};ge=new WeakMap,vt=new WeakMap,ee=new WeakMap,de=new WeakMap,ve=new WeakMap,I=new WeakMap,bt=new WeakMap,os=new WeakSet,Kc=function(){if(this.options.language){let e=this.options.language.split(",")[0],r=za.default.language(e),n=ss.placeholder[r];if(n)return n}return"Search"},yt=new WeakMap,ni=new WeakMap,si=new WeakMap,oi=new WeakMap,tt=new WeakMap,ai=new WeakMap,li=new WeakMap,Xt=new WeakMap,ci=new WeakMap,di=new WeakMap,Ne=new WeakMap,ui=new WeakMap,hi=new WeakMap,Yt.observedAttributes=["access-token","theme","popover-options","placeholder","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=Yt;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",Yt);var Va=an(so());var Zc=9,be,je,te,ue,ye,R,xt,as,Qc,Et,pi,mi,fi,rt,gi,vi,Kt,bi,yi,$e,xi,Ei,Zt=class extends W{constructor(){super(...arguments);d(this,as);d(this,be,void 0);d(this,je,new Oo({}));d(this,te,new We(i(this,je)));d(this,ue,null);d(this,ye,void 0);d(this,R,new fe);d(this,xt,new He(1));this.options={};d(this,Et,void 0);d(this,pi,e=>{i(this,$e).call(this),i(this,R).handleSuggest((e==null?void 0:e.features)||null),this.dispatchEvent(new E("suggest",e))});d(this,mi,e=>{i(this,$e).call(this),i(this,R).handleError(),this.dispatchEvent(new E("suggesterror",e))});d(this,fi,e=>{i(this,$e).call(this),this.dispatchEvent(new E("retrieve",e));let r=e;if(!r)return;i(this,ye).value=r.properties.full_address;let n=i(this,ue);if(!n)return;let s=r.properties.feature_type,o=r.properties.bbox;if(o)n.flyTo(bn(n,Y.convert(o).toFlatArray()));else{let l=r.geometry.coordinates,a=yn(s);n.flyTo({center:l,zoom:a,speed:vr})}this.marker&&this.mapboxgl&&i(this,vi).call(this,r)});d(this,rt,void 0);d(this,gi,()=>{i(this,rt)&&(i(this,rt).remove(),h(this,rt,null))});d(this,vi,e=>{if(!i(this,ue)||(i(this,gi).call(this),!e))return;let n=g(g({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);h(this,rt,new this.mapboxgl.Marker(n)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&i(this,rt).setLngLat(e.geometry.coordinates).addTo(i(this,ue))});this.interceptSearch=null;d(this,Kt,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:r,inputText:n}=e.detail;if(!n){i(this,xi).call(this);return}let s=this.interceptSearch&&this.interceptSearch(n),o=this.interceptSearch?s:n;if(this.interceptSearch&&!s){i(this,R).hideResults();return}i(this,te).suggest(o,this.options),i(this,xt).input(o,r,M(g({},this.options),{sessionToken:i(this,te).sessionToken,accessToken:this.accessToken}),i(this,ue),i(this,je).responseHeaders),i(this,$e).call(this,!0)});d(this,bi,e=>{let{suggestion:r,selectedIndex:n}=e.detail;i(this,te).retrieve(r,this.options),i(this,xt).select(this.value,n,i(this,R).suggestions,M(g({},this.options),{sessionToken:i(this,te).sessionToken,accessToken:this.accessToken}),i(this,ue),i(this,je).responseHeaders),i(this,$e).call(this,!0)});d(this,yi,()=>{i(this,te).abort()});d(this,$e,(e=!1)=>{e?(i(this,be).ClearBtn.style.display="none",i(this,be).LoadingIcon.style.display="block"):(i(this,be).LoadingIcon.style.display="none",i(this,be).ClearBtn.style.display=this.value?"block":"none")});d(this,xi,()=>{this.value="",i(this,$e).call(this),i(this,vi).call(this,null),i(this,R).handleSuggest(null),i(this,xt).clear(),i(this,te).incrementSession(),this.dispatchEvent(new E("clear"))});this.marker=!0;d(this,Ei,()=>{let e=i(this,ue),r=g({},this.options);if(e.getZoom()<=Zc){delete r.proximity,this.options=r;return}let n=e.getCenter();this.options=M(g({},r),{proximity:n})})}get accessToken(){return i(this,je).accessToken}set accessToken(e){i(this,je).accessToken=e}get value(){return i(this,ye).value}set value(e){i(this,ye).value=e||""}get input(){return i(this,ye)}get template(){return jo}get templateStyle(){return se}get templateUserStyle(){return N(".Geocoder",i(this,R).theme)}get theme(){return i(this,R).theme}set theme(e){if(i(this,R).theme=e,!i(this,be)||!e)return;this.updateTemplateUserStyle(N(".Geocoder",e)),i(this,R).updatePopover();let{SearchIcon:r}=i(this,be);r.innerHTML=q("search",e)}get popoverOptions(){return i(this,R).popoverOptions}set popoverOptions(e){i(this,R).popoverOptions=e}get placeholder(){return i(this,Et)||qe(this,as,Qc).call(this)}set placeholder(e){h(this,Et,e),i(this,ye)&&(i(this,ye).placeholder=this.placeholder,i(this,ye).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),h(this,be,re(this,{Geocoder:".Geocoder",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=g({},this.theme);let{Input:e,ClearBtn:r}=i(this,be);h(this,ye,e),i(this,R).input=e,i(this,R).searchService=1,i(this,R).addEventListener("input",i(this,Kt)),i(this,R).addEventListener("select",i(this,bi)),i(this,R).addEventListener("blur",i(this,yi)),i(this,te).addEventListener("suggest",i(this,pi)),i(this,te).addEventListener("suggesterror",i(this,mi)),i(this,te).addEventListener("retrieve",i(this,fi)),r.addEventListener("click",i(this,xi)),this.placeholder=i(this,Et),this.parentElement.appendChild(i(this,R)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Ke(i(this,R).dataSeed)))}disconnectedCallback(){i(this,R).remove(),i(this,R).input=null,i(this,R).removeEventListener("input",i(this,Kt)),i(this,R).removeEventListener("select",i(this,bi)),i(this,R).removeEventListener("blur",i(this,yi)),i(this,te).removeEventListener("suggest",i(this,pi)),i(this,te).removeEventListener("suggesterror",i(this,mi)),i(this,te).removeEventListener("retrieve",i(this,fi)),i(this,xt).remove()}attributeChangedCallback(e,r,n){if(e==="access-token"){i(this,je).accessToken=n;return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}if(e==="placeholder"){this.placeholder=n;return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n,s==="language"&&(this.placeholder=i(this,Et))}focus(){i(this,R).focus()}search(e){this.value=e;let r={lastInput:e,inputText:e};i(this,Kt).call(this,new E("input",r))}bindMap(e){i(this,ue)&&i(this,ue).off("moveend",i(this,Ei)),e&&e.on("moveend",i(this,Ei)),h(this,ue,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let r=document.createElement("div");return r.className="mapboxgl-ctrl",r.style.width="300px",r.appendChild(this),r}onRemove(){this.remove(),this.unbindMap(),i(this,gi).call(this)}getDefaultPosition(){return"top-right"}};be=new WeakMap,je=new WeakMap,te=new WeakMap,ue=new WeakMap,ye=new WeakMap,R=new WeakMap,xt=new WeakMap,as=new WeakSet,Qc=function(){if(this.options.language){let e=this.options.language.split(",")[0],r=Va.default.language(e),n=ss.placeholder[r];if(n)return n}return"Search"},Et=new WeakMap,pi=new WeakMap,mi=new WeakMap,fi=new WeakMap,rt=new WeakMap,gi=new WeakMap,vi=new WeakMap,Kt=new WeakMap,bi=new WeakMap,yi=new WeakMap,$e=new WeakMap,xi=new WeakMap,Ei=new WeakMap,Zt.observedAttributes=["access-token","theme","popover-options","placeholder","autocomplete","language","country","bbox","limit","proximity","types","worldview","permanent"];window.MapboxGeocoder=Zt;window.customElements.get("mapbox-geocoder")||customElements.define("mapbox-geocoder",Zt);var Ka=an(Wa());var Xa=new Ka.default({size:512,antimeridian:!0}),Tt=1280;function Ya(t,e){let{width:r,height:n}=ln(t,!0);switch(e){case"center":return[0,0];case"top":return[0,n/2];case"bottom":return[0,-1*n/2];case"left":return[r/2,0];case"right":return[-1*r/2,0];case"top-left":return[r/2,n/2];case"top-right":return[-1*r/2,n/2];case"bottom-left":return[r/2,-1*n/2];case"bottom-right":return[-1*r/2,-1*n/2]}}var Si,ls,St,Ai,Ti,cs,Mi,wi,ds,Li,ki,At,us,Ci,lo=class{constructor(e,r,n,s,o,l){d(this,Si,void 0);d(this,ls,()=>{[this.anchorOffsetX,this.anchorOffsetY]=Ya(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});d(this,St,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0});d(this,Ai,!1);d(this,Ti,void 0);d(this,cs,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),i(this,At).call(this,e),window.addEventListener("pointermove",i(this,wi)),window.addEventListener("pointerup",i(this,Mi)))});d(this,Mi,()=>{window.removeEventListener("pointermove",i(this,wi)),window.removeEventListener("pointerup",i(this,Mi))});d(this,wi,e=>{e.preventDefault(),e.stopPropagation();let r=this.curPointerXPos-e.pageX,n=this.curPointerYPos-e.pageY;this.markerDeltaX+=r,this.markerDeltaY-=n,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let s=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],o=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-s,a=this.markerDeltaY+o;this.markerTransform={globalX:l,globalY:a},i(this,At).call(this,e)});d(this,ds,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),i(this,At).call(this,e),window.addEventListener("pointermove",i(this,ki)),window.addEventListener("pointerup",i(this,Li)))});d(this,Li,()=>{window.removeEventListener("pointermove",i(this,ki)),window.removeEventListener("pointerup",i(this,Li))});d(this,ki,e=>{e.preventDefault();let r=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));r=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,r),0);let n=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));n=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,n),0),this.imgContainerElement.scrollTop=r,this.imgContainerElement.scrollLeft=n;let s=Math.round(n-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),o=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-r);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+s,this.imgCenterPx[1]-o],!this.keepMarkerCentered){let l=this.markerDeltaX+s,a=this.markerDeltaY+o;this.markerTransform={globalX:l,globalY:a}}i(this,Ci).call(this,n,r),i(this,At).call(this,e)});d(this,At,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});d(this,us,()=>{let{anchorX:e,anchorY:r,globalX:n,globalY:s,correctionX:o,correctionY:l}=i(this,St),a=e-n+o,c=r+s+l;this.markerElement.style.transform=`translate(calc(-50% + ${a}px), calc(-50% + ${c}px))`});this.reCenter=()=>{let e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,r=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=r,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}};this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let e=this.imgCenterOffset.x,r=this.imgCenterOffset.y,n=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,s=this.imgElement.height/2-r-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=n,this.imgContainerElement.scrollTop=s,i(this,Ci).call(this,n,s)};d(this,Ci,(e,r)=>{let n=this.imgCenterOffset.x,s=this.imgCenterOffset.y,{correctionX:o,correctionY:l}=this.markerTransform,a={};if(e/2<n*-1){let c=n*-1-e/2;a.correctionX=c*2}else e<0?a.correctionX=e:o!==0&&(a.correctionX=0);if(r/2<s*-1){let c=s*-1-r/2;a.correctionY=c*2}else r<0?a.correctionY=r:l!==0&&(a.correctionY=0);this.markerTransform=a});this.markerElement=n,this.imgContainerElement=e,this.imgElement=r,this.keepMarkerCentered=s,this.zoom=o,this.anchor=l,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",i(this,ds)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",i(this,cs)),new ResizeObserver(i(this,ls)).observe(this.markerElement)}get anchor(){return i(this,Si)}set anchor(e){h(this,Si,e),[this.anchorOffsetX,this.anchorOffsetY]=Ya(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return i(this,St)}set markerTransform(e){h(this,St,g(g({},i(this,St)),e)),i(this,us).call(this)}get isActive(){return i(this,Ai)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",h(this,Ai,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(ot(e,this.imgCenterPx))return i(this,Ti);{let r=Xa.ll(e,this.zoom);return[Hs(r[0],6),Hs(r[1],6)]}}set coordinate(e){h(this,Ti,e),this.imgCenterPx=this.imgCenterAdjustedPx=Xa.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};Si=new WeakMap,ls=new WeakMap,St=new WeakMap,Ai=new WeakMap,Ti=new WeakMap,cs=new WeakMap,Mi=new WeakMap,wi=new WeakMap,ds=new WeakMap,Li=new WeakMap,ki=new WeakMap,At=new WeakMap,us=new WeakMap,Ci=new WeakMap;var Za='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>';var Qa=16,td=$(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${Za}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),rd=$(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),id=$(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),co="Adjust pin",uo="Save",ho="Cancel",nd=$(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">${co}</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${uo}</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">${ho}</div>
  </div>
</template>
`),Ii,Mt,Qt,Ie,it,xe,Ee,P,G,Ri,Pi,Oi,wt,Bi,_i,Hi,Fi,Di,Ni,Jt,ji,$i,Gi,Ui,hs,ps,qi,er,tr,zi,Vi,ms,Wi,fs,rr=class extends W{constructor(){super(...arguments);d(this,Ii,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";d(this,Mt,!1);d(this,Qt,!1);d(this,Ie,void 0);d(this,it,"");d(this,xe,void 0);d(this,Ee,void 0);d(this,P,void 0);d(this,G,void 0);d(this,Ri,void 0);d(this,Pi,{});d(this,Oi,!1);d(this,wt,"default");d(this,Bi,void 0);d(this,_i,void 0);d(this,Hi,void 0);d(this,Fi,["mapbox","streets-v11"]);d(this,Di,void 0);d(this,Ni,void 0);d(this,Jt,()=>{let{ImageContainer:e,ButtonAdjust:r,ButtonSave:n,ButtonCancel:s}=i(this,P);i(this,Mt)?(e.classList.add(`${this.dataset.seed}--draggable`),i(this,G).isActive=!0,r.setAttribute("aria-hidden","true"),n.removeAttribute("aria-hidden"),s.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),i(this,G).isActive=!1,r.removeAttribute("aria-hidden"),n.setAttribute("aria-hidden","true"),s.setAttribute("aria-hidden","true"))});d(this,ji,()=>{h(this,Mt,!0),i(this,Jt).call(this)});d(this,$i,()=>{if(this.feature.properties.full_address&&!ot(this.feature.geometry.coordinates,i(this,G).coordinate)){let[e,r]=i(this,G).coordinate;$n(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:r}}})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(i(this,G).coordinate),h(this,Mt,!1),i(this,Jt).call(this)});d(this,Gi,()=>{i(this,G).reCenter(),h(this,Mt,!1),i(this,Jt).call(this)});d(this,Ui,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});d(this,hs,()=>{i(this,Qt)||i(this,G).reCenter(),h(this,Qt,!0),i(this,G)&&i(this,G).handleMinimapResize()});d(this,ps,()=>{h(this,Qt,!1)});d(this,qi,e=>{if(i(this,xe)===0||i(this,Ee)===0)return"";let[r,n]=this.defaultMapStyle,s=xn(r,n),o=this.mapStyleMode==="default"?s:Bo,l=_o+_.autofillSessionToken.toString(),a=o+B.convert(e).toArray().join(",")+","+Qa+",0/"+Math.min(i(this,xe)*2,Tt)+"x"+Math.min(i(this,Ee)*2,Tt)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return _.autofillSessionEnabled&&(a+=`&sku=${l}`),a});d(this,er,()=>{if(i(this,Ie)){let e=i(this,Ie).geometry.coordinates;h(this,it,i(this,qi).call(this,e));let{Image:r}=i(this,P);r.src=i(this,it)}});d(this,tr,e=>`url("${Ko(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);d(this,zi,()=>{let{MapboxAddressMinimap:e,ImageContainer:r,Image:n}=i(this,P),{width:s,height:o}=ln(this.container),[l,a]=[i(this,xe),i(this,Ee)];h(this,xe,Math.min(s,Tt)),h(this,Ee,Math.min(o,Tt)),e.style.setProperty("width",`${i(this,xe)}px`),e.style.setProperty("height",`${i(this,Ee)}px`),r.style.setProperty("height",`${i(this,Ee)}px`),r.style.setProperty("width",`${i(this,xe)}px`);let[c,u]=[n.width,n.height];i(this,xe)>l&&i(this,xe)>c/2&&c<Tt||i(this,Ee)>a&&i(this,Ee)>u/2&&u<Tt?i(this,er).call(this):i(this,G)&&i(this,G).handleMinimapResize()});d(this,Vi,()=>{if(this.querySelector(".MinimapFooter"))return;let r=this.prepareTemplate(id),n=this.querySelector(".MapboxAddressMinimap");if(!n||(n.appendChild(r),this.querySelector(".MinimapEditButtons")))return;let o=this.prepareTemplate(nd);this.querySelector(".MinimapInnerFrame").appendChild(o),h(this,P,M(g({},i(this,P)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:a,ButtonSave:c,ButtonCancel:u}=i(this,P);a.addEventListener("click",i(this,ji)),c.addEventListener("click",i(this,$i)),u.addEventListener("click",i(this,Gi))});d(this,ms,()=>{if(!i(this,P))return;let{EditButtons:e,ButtonAdjust:r,ButtonSave:n,ButtonCancel:s}=i(this,P),o=this.querySelector(".MinimapFooter");o==null||o.remove(),e==null||e.remove(),r&&(r.remove(),r.removeEventListener("click",i(this,ji))),n&&(n.remove(),n.removeEventListener("click",i(this,$i))),s&&(s.remove(),s.removeEventListener("click",i(this,Gi))),delete i(this,P).EditButtons,delete i(this,P).ButtonAdjust,delete i(this,P).ButtonSave,delete i(this,P).ButtonCancel});d(this,Wi,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let r=this.prepareTemplate(rd),n=this.querySelector(".MinimapInnerFrame");!n||(n.appendChild(r),i(this,P).MapStyleToggle=r,r.addEventListener("click",i(this,Ui)),r.style.backgroundImage=i(this,tr).call(this,this.mapStyleMode==="default"?"satellite":"default"),r.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});d(this,fs,()=>{if(!i(this,P))return;let{MapStyleToggle:e}=i(this,P);!e||(e.remove(),e.removeEventListener("click",i(this,Ui)),delete i(this,P).MapStyleToggle)})}get canAdjustMarker(){return i(this,Ii)}set canAdjustMarker(e){h(this,Ii,e),e?i(this,Vi).call(this):i(this,ms).call(this)}get accessToken(){return i(this,Ri)||_.accessToken}set accessToken(e){h(this,Ri,e)}get feature(){return i(this,Ie)}set feature(e){h(this,Ie,e),e?this.show():this.hide()}get template(){return td}get templateStyle(){return se}get templateUserStyle(){return N(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return i(this,Oi)}set satelliteToggle(e){h(this,Oi,e),e?i(this,Wi).call(this):i(this,fs).call(this)}get theme(){return i(this,Pi)}set theme(e){if(h(this,Pi,e),!i(this,P)||!e)return;this.updateTemplateUserStyle(N(".MapboxAddressMinimap",e));let{Marker:r,MapStyleToggle:n}=i(this,P);r.innerHTML=q("marker",e),n&&(n.style.backgroundImage=i(this,tr).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get adjustBtnText(){return i(this,Bi)||co}set adjustBtnText(e){h(this,Bi,e);let r=this.querySelector(".MinimapButtonAdjust");r.textContent=e||co}get saveBtnText(){return i(this,_i)||uo}set saveBtnText(e){h(this,_i,e);let r=this.querySelector(".MinimapButtonSave");r.textContent=e||uo}get cancelBtnText(){return i(this,Hi)||ho}set cancelBtnText(e){h(this,Hi,e);let r=this.querySelector(".MinimapButtonCancel");r.textContent=e||ho}get mapStyleMode(){return i(this,wt)}set mapStyleMode(e){let r=i(this,wt);if(r===e||(h(this,wt,e),!i(this,P)))return;let{MapStyleToggle:n}=i(this,P);!n||(n.style.backgroundImage=i(this,tr).call(this,r),n.setAttribute("title",`Switch to ${r==="satellite"?"Satellite":"Default"}`),i(this,er).call(this))}get defaultMapStyle(){return i(this,Fi)}set defaultMapStyle(e){h(this,Fi,e),i(this,er).call(this)}get footer(){return i(this,Di)}set footer(e){h(this,Di,e);let r=this.querySelector(".MinimapFooter");r&&(typeof e=="string"?(r.textContent=e,r.removeAttribute("aria-hidden")):e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true"))}get container(){return i(this,Ni)}set container(e){e&&(e.style.position="relative",h(this,Ni,e))}show(){if(!i(this,Ie))return;let e=i(this,Ie).geometry.coordinates;i(this,G).coordinate=e,h(this,it,i(this,qi).call(this,e));let{MapboxAddressMinimap:r,Image:n}=i(this,P);n.src=i(this,it),r.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=i(this,P);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),h(this,P,re(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=i(this,wt),this.theme=g({},this.theme),this.canAdjustMarker&&i(this,Vi).call(this),this.satelliteToggle&&i(this,Wi).call(this),this.container=this.parentElement,new ResizeObserver(i(this,zi)).observe(this.container),i(this,zi).call(this);let{MapboxAddressMinimap:r,ImageContainer:n,Image:s,Marker:o}=i(this,P);h(this,G,new lo(n,s,o,this.keepMarkerCentered,Qa,this.markerAnchor)),i(this,G).reCenter(),s.onload=i(this,hs),s.onerror=i(this,ps),s.src=i(this,it),i(this,Ie)?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden","true")}attributeChangedCallback(e,r,n){if(e==="access-token")this.accessToken=n;else if(e==="can-adjust-marker")this.canAdjustMarker=n==="true";else if(e==="keep-marker-centered")this.keepMarkerCentered=n==="true";else if(e==="marker-anchor"){let s=n;this.markerAnchor=s,i(this,G)&&(i(this,G).anchor=s)}else e==="satellite-toggle"&&(this.satelliteToggle=n==="true")}};Ii=new WeakMap,Mt=new WeakMap,Qt=new WeakMap,Ie=new WeakMap,it=new WeakMap,xe=new WeakMap,Ee=new WeakMap,P=new WeakMap,G=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,Oi=new WeakMap,wt=new WeakMap,Bi=new WeakMap,_i=new WeakMap,Hi=new WeakMap,Fi=new WeakMap,Di=new WeakMap,Ni=new WeakMap,Jt=new WeakMap,ji=new WeakMap,$i=new WeakMap,Gi=new WeakMap,Ui=new WeakMap,hs=new WeakMap,ps=new WeakMap,qi=new WeakMap,er=new WeakMap,tr=new WeakMap,zi=new WeakMap,Vi=new WeakMap,ms=new WeakMap,Wi=new WeakMap,fs=new WeakMap,rr.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=rr;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",rr);var z,Se,Z,ir,nr,Ge,Xi,Yi,Ki,Zi,gs,Qi,Ji,sr,Ja=class{constructor(e,r,n){d(this,z,void 0);d(this,Se,void 0);d(this,Z,void 0);d(this,ir,void 0);this.options={};this.retrieveFeature=null;this.listbox=new fe;d(this,nr,new He(0));d(this,Ge,void 0);d(this,Xi,e=>{let{lastInput:r,inputText:n}=e.detail,s=i(this,Se).browserAutofillEnabled===!0&&(n==null?void 0:n.length)<=2;if(ce(i(this,z),i(this,Ge),s),!n){i(this,gs).call(this);return}if((n==null?void 0:n.length)<=2){this.listbox.handleSuggest(null);return}i(this,Z).suggest(n,this.options),i(this,nr).input(n,r,M(g({},this.options),{sessionToken:i(this,Z).sessionToken,accessToken:i(this,Se).accessToken}),null,i(this,ir).responseHeaders)});d(this,Yi,e=>{let{suggestion:r,selectedIndex:n}=e.detail;r.accuracy!=="street"?(ce(i(this,z),i(this,Ge),!0),i(this,Z).retrieve(r,this.options),i(this,nr).select(this.input.value,n,this.listbox.suggestions,M(g({},this.options),{sessionToken:i(this,Z).sessionToken,accessToken:i(this,Se).accessToken}),null,i(this,ir).responseHeaders)):Bn(i(this,z),i(this,Ge),r)});d(this,Ki,()=>{ce(i(this,z),i(this,Ge),!0),i(this,Z).abort()});d(this,Zi,()=>{var r;let e=i(this,Se).browserAutofillEnabled===!0&&((r=i(this,z).value)==null?void 0:r.length)<=2;ce(i(this,z),i(this,Ge),e)});d(this,gs,()=>{this.listbox.handleSuggest(null),i(this,nr).clear()});d(this,Qi,e=>{let r=(e==null?void 0:e.suggestions)?On(e.suggestions):null;this.listbox.handleSuggest(r);let n=new E("suggest",e);Object.defineProperty(n,"target",{value:i(this,z)}),i(this,Se).fire("suggest",n)});d(this,Ji,e=>{this.listbox.handleError();let r=new E("suggesterror",e);Object.defineProperty(r,"target",{value:i(this,z)}),i(this,Se).fire("suggesterror",r)});d(this,sr,e=>{var s;let r=new E("retrieve",e);if(Object.defineProperty(r,"target",{value:i(this,z)}),i(this,Se).fire("retrieve",r),this.retrieveFeature=(s=e.features)==null?void 0:s[0],!i(this,z))return;let n=e;!n||!n.features||!n.features.length||Rr(n.features[0],i(this,z))});h(this,z,r),h(this,Se,e),h(this,Z,new We(n)),i(this,Z).sessionToken=_.autofillSessionToken.id,h(this,ir,n),this.listbox.input=i(this,z),this.listbox.autofillHost=this,this.listbox.searchService=0,this.listbox.addEventListener("input",i(this,Xi)),this.listbox.addEventListener("select",i(this,Yi)),this.listbox.addEventListener("blur",i(this,Ki)),this.listbox.addEventListener("focus",i(this,Zi)),i(this,Z).addEventListener("suggest",i(this,Qi)),i(this,Z).addEventListener("suggesterror",i(this,Ji)),i(this,Z).addEventListener("retrieve",i(this,sr)),document.body.appendChild(this.listbox),r&&(r.insertAdjacentElement("beforebegin",Ke(this.listbox.dataSeed)),In(r),h(this,Ge,r.autocomplete))}get input(){return i(this,z)}remove(){this.listbox.remove(),this.listbox.removeEventListener("input",i(this,Xi)),this.listbox.removeEventListener("select",i(this,Yi)),this.listbox.removeEventListener("blur",i(this,Ki)),this.listbox.removeEventListener("focus",i(this,Zi)),i(this,Z).removeEventListener("suggest",i(this,Qi)),i(this,Z).removeEventListener("suggesterror",i(this,Ji)),i(this,Z).removeEventListener("retrieve",i(this,sr))}simulateRetrieve(e){let r=i(this,z);r&&(r.dataset.mapboxSuccess="true"),this.listbox.hideResults();let n={type:"FeatureCollection",features:[e],url:""};i(this,sr).call(this,n)}};z=new WeakMap,Se=new WeakMap,Z=new WeakMap,ir=new WeakMap,nr=new WeakMap,Ge=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Ki=new WeakMap,Zi=new WeakMap,gs=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,sr=new WeakMap;var or,ar,lr,en,tn,rn,nn,sn,el=class extends Os{constructor({accessToken:e,options:r,theme:n,popoverOptions:s,confirmOnBrowserAutofill:o,browserAutofillEnabled:l}){super();this.instances=[];d(this,or,void 0);d(this,ar,new gr);d(this,lr,void 0);d(this,en,void 0);d(this,tn,void 0);this.confirmOnBrowserAutofill=!1;this.browserAutofillEnabled=!1;d(this,rn,()=>{ot(Cr(),i(this,or))||this.update()});d(this,nn,new MutationObserver(i(this,rn)));d(this,sn,e=>j(this,null,function*(){this.instances.forEach(r=>r.listbox.blur());for(let r of this.instances){let n=r.listbox.input;yield jn(n,e,this.confirmOnBrowserAutofill,this.accessToken)}}));Un(),window.addEventListener("browserautofill",i(this,sn)),_.autofillSessionEnabled=!0,this.accessToken=e||_.accessToken,r&&(this.options=r),n&&(this.theme=n),s&&(this.popoverOptions=s),o&&(this.confirmOnBrowserAutofill=o),l&&(this.browserAutofillEnabled=l),this.update()}get accessToken(){return i(this,ar).accessToken}set accessToken(e){i(this,ar).accessToken=e}get options(){return i(this,lr)}set options(e){h(this,lr,g(g({},i(this,lr)),e)),this.instances.forEach(r=>{r.options=g(g({},r.options),e)})}get theme(){return i(this,en)}set theme(e){h(this,en,e),this.instances.forEach(r=>{r.listbox.theme=e})}get popoverOptions(){return i(this,tn)}set popoverOptions(e){h(this,tn,e),this.instances.forEach(r=>{r.listbox.popoverOptions=e})}update(){this.instances.forEach(e=>{e.remove()}),h(this,or,Cr()),this.instances=[],i(this,or).forEach(e=>{let r=new Ja(this,e,i(this,ar));r.options=this.options,r.listbox.theme=this.theme,r.listbox.popoverOptions=this.popoverOptions,this.instances.push(r)})}observe(){i(this,nn).observe(document,{subtree:!0,childList:!0}),i(this,rn).call(this)}unobserve(){i(this,nn).disconnect()}remove(){this.instances.forEach(e=>{e.remove()}),this.unobserve(),window.removeEventListener("browserautofill",i(this,sn))}};or=new WeakMap,ar=new WeakMap,lr=new WeakMap,en=new WeakMap,tn=new WeakMap,rn=new WeakMap,nn=new WeakMap,sn=new WeakMap;function tl(t){return new el(t)}return dl(sd);})();
/*!
* focus-trap 6.7.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
//# sourceMappingURL=mapboxsearch.js.map
